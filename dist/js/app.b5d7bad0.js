(function(t){function e(e){for(var n,i,o=e[0],l=e[1],u=e[2],m=0,d=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"013f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:"SERV Portal"}},[a("div",{attrs:{id:"login-top"}},[a("div",{attrs:{id:"login-banner"}},[t._v("Please log in.")]),a("div",{attrs:{id:"login-forserv"}},[t._v("This web site is for SERV volunteers only.\nIf you are interested in joining one of the SERV volunteer organizations,\nplease visit Sunnyvale’s "),a("a",{attrs:{href:"https://sunnyvale.ca.gov/government/safety/emergency.htm"}},[t._v("emergency response page")]),t._v(".")]),a("form",{attrs:{id:"login-form"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-form-group",{attrs:{label:"Email address","label-for":"login-email","label-cols-sm":"4"}},[a("b-input",{attrs:{id:"login-email",autocorrect:"off",autocapitalize:"none",autofocus:"",required:"",trim:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("b-form-group",{attrs:{label:"Password","label-for":"login-password","label-cols-sm":"4"}},[a("b-input",{ref:"password",attrs:{id:"login-password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("div",{attrs:{id:"login-submit-row"}},[a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Log in")])],1),t.failed?a("div",{attrs:{id:"login-failed"}},[t._v("Login incorrect. Please try again.")]):t._e()],1)])])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={data:function(){return{email:"",password:"",failed:!1}},methods:{onSubmit:function(){var t=l(i.a.mark((function t(){var e,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.email&&this.password){t.next=2;break}return t.abrupt("return");case 2:return e=new FormData,e.append("email",this.email),e.append("password",this.password),t.prev=5,t.next=8,this.$axios.post("/api/login",e);case 8:a=t.sent.data,this.$store.commit("login",a),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](5),console.error(t.t0),this.failed=!0;case 16:case"end":return t.stop()}}),t,this,[[5,12]])})));function e(){return t.apply(this,arguments)}return e}()}},c=u,m=(a("03df"),a("2877")),d=Object(m["a"])(c,n,r,!1,null,"b8ca6466",null);e["default"]=d.exports},"03df":function(t,e,a){"use strict";var n=a("2311"),r=a.n(n);r.a},"0619":function(t,e,a){"use strict";var n=a("be131"),r=a.n(n);r.a},"0964":function(t,e,a){},"0d89":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:"Teams and Roles",subtitle:"Teams and Roles",menuItem:"teams"}},[t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("table",{attrs:{id:"teams-table"}},[a("tr",[a("th",[t._v("Team")]),a("th",[t._v("Email")]),a("th",[t._v("Roles")]),a("th")]),t._l(t.teams,(function(e){return a("tr",{key:e.id},[a("td",{class:"indent-"+e.indent},[a("b-link",{attrs:{to:"/teams/"+e.id},domProps:{textContent:t._s(e.name)}})],1),a("td",{domProps:{textContent:t._s(e.email||"—")}}),a("td",t._l(e.roles,(function(n){return a("div",{key:n.id},[a("b-link",{attrs:{to:"/teams/"+e.id+"/roles/"+n.id},domProps:{textContent:t._s(n.name||"(member)")}})],1)})),0),a("td",["normal"===e.type?a("b-link",{attrs:{to:"/teams/"+e.id+"/roles/NEW"}},[t._v("Add Role")]):t._e(),"ancestor"===e.type?a("b-link",{attrs:{to:"/teams/NEW?parent="+e.id}},[t._v("Add Child Team")]):t._e()],1)])}))],2)])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={data:function(){return{loading:!1,teams:null}},created:function(){var t=l(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/teams");case 3:this.teams=t.sent.data,this.loading=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},c=u,m=(a("81fc"),a("2877")),d=Object(m["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},"0fe9":function(t,e,a){},"13d7":function(t,e,a){},1628:function(t,e,a){var n={"./Main.vue":"3ac4","./base/Page.vue":"2213","./pages/Event.vue":"3a11","./pages/EventAttendance.vue":"4381","./pages/Events.vue":"e640","./pages/Login.vue":"013f","./pages/Logout.vue":"4ab3","./pages/People.vue":"2a8c","./pages/Person.vue":"9350","./pages/PersonTeam.vue":"e5f1","./pages/Reports.vue":"b439","./pages/Role.vue":"592a","./pages/Team.vue":"740d","./pages/Teams.vue":"0d89","./pages/reports/CERTAttendance.vue":"fec3","./pages/reports/CERTAttendanceForm.vue":"ea21"};function r(t){var e=s(t);return a(e)}function s(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=s,t.exports=r,r.id="1628"},2213:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"page-top"}},[a("div",{attrs:{id:"page-heading"}},[a("div",{attrs:{id:"page-menu-trigger-box"},on:{click:t.onMenuTrigger}},[a("svg",{staticClass:"bi bi-list",attrs:{id:"page-menu-trigger",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M4.5 13.5A.5.5 0 015 13h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5zm0-4A.5.5 0 015 9h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5zm0-4A.5.5 0 015 5h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5z","clip-rule":"evenodd"}})])]),a("div",{attrs:{id:"page-titlebox"}},[a("div",{attrs:{id:"page-title"},domProps:{textContent:t._s(t.title)}})]),a("div",{attrs:{id:"page-menu-spacer"}})]),a("div",{class:{"page-has-menu":!!t.$store.state.me,"page-menu-open":t.menuOpen},attrs:{id:"page-main"}},[t.$store.state.me?a("div",{attrs:{id:"page-menu"}},[a("div",{attrs:{id:"page-menu-welcome"}},[t._v("Welcome"),a("br"),a("b",{domProps:{textContent:t._s(t.$store.state.me.firstName+" "+t.$store.state.me.lastName)}})]),a("router-link",{staticClass:"page-menu-item",class:{"page-menu-item-active":"events"===t.menuItem},attrs:{to:"/events"}},[t._v("Events")]),a("router-link",{staticClass:"page-menu-item",class:{"page-menu-item-active":"people"===t.menuItem},attrs:{to:"/people"}},[t._v("People")]),t.$store.state.me.webmaster?a("router-link",{staticClass:"page-menu-item",class:{"page-menu-item-active":"teams"===t.menuItem},attrs:{to:"/teams"}},[t._v("Teams")]):t._e(),a("router-link",{staticClass:"page-menu-item",class:{"page-menu-item-active":"reports"===t.menuItem},attrs:{to:"/reports"}},[t._v("Reports")]),a("router-link",{staticClass:"page-menu-item",attrs:{to:"/people/"+t.$store.state.me.id}},[t._v("Profile")]),a("router-link",{staticClass:"page-menu-item",attrs:{to:"/logout"}},[t._v("Logout")])],1):t._e(),a("div",{attrs:{id:"page-content"}},[t.subtitle?a("div",{attrs:{id:"page-subtitle"},domProps:{textContent:t._s(t.subtitle)}}):t._e(),t._t("default")],2)])])},r=[],s={props:{title:String,subtitle:String,menuItem:String},data:function(){return{menuOpen:!1}},methods:{onMenuTrigger:function(){this.menuOpen=!this.menuOpen}}},i=s,o=(a("d251"),a("2877")),l=Object(o["a"])(i,n,r,!1,null,null,null);e["default"]=l.exports},"22c2":function(t,e,a){"use strict";var n=a("4344"),r=a.n(n);r.a},2311:function(t,e,a){},"2a8c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:"People",menuItem:"people"}},[a("div",{attrs:{id:"people-title"}},[t._v("People"),t.teams&&t.teams.length>1?a("select",{directives:[{name:"model",rawName:"v-model",value:t.team,expression:"team"}],attrs:{id:"people-team"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.team=e.target.multiple?a:a[0]}}},t._l(t.teams,(function(e){return a("option",{key:e.id,domProps:{value:e.id,textContent:t._s(e.name)}})})),0):t._e()]),t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("table",{attrs:{id:"people-table"}},[a("tr",[a("th",[t._v("Person")]),a("th",[t._v("Contact Info")]),a("th",[t._v("Roles")])]),t._l(t.people,(function(e){return a("tr",{key:e.id},[a("td",[a("router-link",{attrs:{to:"/people/"+e.id},domProps:{textContent:t._s(e.lastName+", "+e.firstName)}})],1),a("td",[a("div",[a("a",{attrs:{href:"mailto:"+e.email},domProps:{textContent:t._s(e.email)}})]),e.phone?a("div",[a("a",{attrs:{href:"tel:"+e.phone},domProps:{textContent:t._s(e.phone)}})]):t._e()]),a("td",[t._l(e.roles,(function(e){return a("div",{key:e.team,domProps:{textContent:t._s(e.role?e.team+": "+e.role:e.team)}})})),e.roles.length?t._e():a("div",[t._v("—")])],2)])}))],2),t.canAdd?a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{to:"/people/NEW"}},[t._v("Add Person")])],1):t._e()])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={data:function(){return{team:0,teams:null,people:null,canAdd:!1,loading:!1}},created:function(){this.load()},watch:{team:function(){this.load()}},methods:{load:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/people",{params:{team:this.team}});case 3:e=t.sent.data,this.people=e.people,this.canAdd=e.canAdd,e.viewableTeams.length>1&&(e.viewableTeams.unshift({id:0,name:"(all)"}),this.teams=e.viewableTeams),this.loading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},c=u,m=(a("f0d3"),a("2877")),d=Object(m["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},"3a11":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:t.title,subtitle:t.subtitle,menuItem:"events"}},[t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",[t._v("small")])],1):t.canEdit?a("form",{staticClass:"mt-3",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-form-group",{attrs:{label:"Event date","label-for":"event-date","label-cols-sm":"auto","label-class":"edit-label",state:!t.dateError&&null,"invalid-feedback":t.dateError}},[a("b-input",{attrs:{id:"event-date",type:"date",autofocus:"",state:!t.dateError&&null},model:{value:t.event.date,callback:function(e){t.$set(t.event,"date",e)},expression:"event.date"}})],1),a("b-form-group",{attrs:{label:"Event name","label-for":"event-name","label-cols-sm":"auto","label-class":"edit-label",state:!t.nameError&&null,"invalid-feedback":t.nameError}},[a("b-input",{attrs:{id:"event-name",state:!t.nameError&&null,trim:""},model:{value:t.event.name,callback:function(e){t.$set(t.event,"name",e)},expression:"event.name"}})],1),a("b-form-group",{attrs:{label:"Event hours","label-for":"event-hours","label-cols-sm":"auto","label-class":"edit-label",state:!t.hoursError&&null,"invalid-feedback":t.hoursError}},[a("b-input",{attrs:{id:"event-hours",type:"number",min:"0.0",max:"24.0",step:"0.5",number:"",state:!t.hoursError&&null},model:{value:t.event.hours,callback:function(e){t.$set(t.event,"hours",e)},expression:"event.hours"}})],1),a("b-form-group",{attrs:{label:"Event type:",state:!t.typeError&&null,"invalid-feedback":t.typeError}},[a("b-form-radio-group",{attrs:{stacked:"",options:t.eventTypes},model:{value:t.event.type,callback:function(e){t.$set(t.event,"type",e)},expression:"event.type"}})],1),a("b-form-group",{attrs:{label:"Event is for these teams:",state:!t.teamsError&&null,"invalid-feedback":t.teamsError}},[a("b-form-checkbox-group",{attrs:{stacked:"",options:t.teams,"text-field":"name","value-field":"id"},model:{value:t.event.teams,callback:function(e){t.$set(t.event,"teams",e)},expression:"event.teams"}})],1),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!t.valid},domProps:{textContent:t._s(t.event.id?"Save Event":"Create Event")}}),a("b-btn",{staticClass:"ml-2",on:{click:t.onCancel}},[t._v("Cancel")]),t.event.id?a("b-btn",{staticClass:"ml-5",attrs:{variant:"danger"},on:{click:t.onDelete}},[t._v("Delete Event")]):t._e()],1)],1):a("div",{staticClass:"mt-3"},[a("b-form-group",{attrs:{label:"Event date","label-for":"event-date","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-input",{attrs:{id:"event-date",type:"date",plaintext:"",value:t.event.date}})],1),a("b-form-group",{attrs:{label:"Event name","label-for":"event-name","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-input",{attrs:{id:"event-name",plaintext:"",value:t.event.name}})],1),a("b-form-group",{attrs:{label:"Event hours","label-for":"event-hours","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-input",{attrs:{id:"event-hours",type:"number",plaintext:"",value:t.event.hours}})],1),a("b-form-group",{attrs:{label:"Event type","label-for":"event-hours","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-input",{attrs:{id:"event-type",plaintext:"",value:t.eventTypes[t.event.type]}})],1),a("b-form-group",{attrs:{label:"Teams","label-for":"event-teams","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-textarea",{attrs:{id:"event-teams",plaintext:""},domProps:{textContent:t._s(t.eventTeamList)}})],1),a("div",{attrs:{id:"event-buttons"}},[a("b-btn",{on:{click:t.onCancel}},[t._v("Back")])],1)],1)])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={Train:"Training",Drill:"Drill",Civic:"Civic Event",Incid:"Incident",CE:"Continuing Ed",Meeting:"Meeting",Class:"Class"},c={data:function(){return{loading:!1,title:"Event",canEdit:!1,event:null,year:null,teams:null,eventTypes:u,submitted:!1,dateError:null,nameError:null,duplicateName:null,hoursError:null,typeError:null,teamsError:null,valid:!0}},created:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/events/".concat(this.$route.params.id));case 3:e=t.sent.data,this.canEdit=e.canEdit,this.event=e.event,this.event.id&&(this.year=this.event.date.substr(0,4)),this.title=e.event.id?"".concat(e.event.date," ").concat(e.event.name):"New Event",this.teams=e.teams,this.loading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{cancelLink:function(){return this.year?{path:"/events",params:{year:this.year}}:"/events"},eventTeamList:function(){var t=this,e=[];return this.event.teams.forEach((function(a){e.push(t.teams.find((function(t){return t.id===a})).name)})),e.join("\n")},subtitle:function(){return this.$route.params.id?"Edit Event":"Create Event"}},watch:{"event.date":"validate","event.name":"validate","event.hours":"validate","event.type":"validate","event.teams":"validate"},methods:{onCancel:function(){this.$router.go(-1)},onDelete:function(){var t=l(i.a.mark((function t(){var e,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$bvModal.msgBoxConfirm("Are you sure you want to delete this event?  All associated data, including attendance records, will be permanently lost.",{title:"Delete Event",headerBgVariant:"danger",headerTextVariant:"white",okTitle:"Delete",okVariant:"danger",cancelTitle:"Keep"}).catch((function(t){}));case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return");case 5:return a=new FormData,a.append("delete","true"),t.next=9,this.$axios.post("/api/events/".concat(this.$route.params.id),a);case 9:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=l(i.a.mark((function t(){var e,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.submitted=!0,this.validate(),this.valid){t.next=4;break}return t.abrupt("return");case 4:return e=new FormData,e.append("date",this.event.date),e.append("name",this.event.name),e.append("hours",this.event.hours),e.append("type",this.event.type),this.event.teams.forEach((function(t){e.append("team",t)})),t.next=12,this.$axios.post("/api/events/".concat(this.$route.params.id),e);case 12:a=t.sent.data,a&&a.nameError?this.duplicateName={date:this.event.date,name:this.event.name}:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),validate:function(){this.submitted&&(this.event.date?this.event.date.match(/^20\d\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/)?this.dateError=null:this.dateError="This is not a valid date.":this.dateError="The event date is required.",this.event.name?this.duplicateName&&this.duplicateName.date===this.event.date&&this.duplicateName.name===this.event.name?this.nameError="Another event on this date has this name.":this.nameError=this.duplicateName=null:this.nameError="The event name is required.",""===this.event.hours?this.hoursError="The event duration is required.":"number"!==typeof this.event.hours||this.event.hours<0||this.event.hours>24?this.hoursError="The event duration must be between 0 and 24 hours.":this.hoursError=null,u[this.event.type]?this.typeError=null:this.typeError="The event type is required.",this.event.teams.length?this.teamsError=null:this.teamsError="At least one team must be selected.",this.valid=!this.dateError&&!this.nameError&&!this.hoursError&&!this.typeError&&!this.teamsError)}}},m=c,d=(a("22c2"),a("2877")),p=Object(d["a"])(m,n,r,!1,null,null,null);e["default"]=p.exports},"3ac4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$store.state.me?a("router-view"):t.$store.state.started?a("Login"):t._e()},r=[],s={},i=s,o=a("2877"),l=Object(o["a"])(i,n,r,!1,null,"77cc7a35",null);e["default"]=l.exports},4344:function(t,e,a){},4381:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:t.title,subtitle:"Event Attendance",menuItem:"events"}},[t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("form",{staticClass:"mt-3",on:{submit:function(e){return e.preventDefault(),t.onSave(e)}}},[a("b-form-group",{attrs:{label:"This event was attended by:"}},[a("b-form-checkbox-group",{attrs:{stacked:"",options:t.people,"text-field":"name","value-field":"id"},model:{value:t.attendees,callback:function(e){t.attendees=e},expression:"attendees"}})],1),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary"}},[t._v("Save Attendance")]),a("b-btn",{staticClass:"ml-2",on:{click:t.onCancel}},[t._v("Cancel")])],1)],1)])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={data:function(){return{loading:!1,event:null,people:null,attendees:null}},computed:{title:function(){return this.loading?"Event Attendance":"".concat(this.event.date," ").concat(this.event.name)}},created:function(){var t=l(i.a.mark((function t(){var e,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/events/".concat(this.$route.params.id,"/attendance"));case 3:e=t.sent.data,this.event=e.event,a=[],e.people.forEach((function(t){t.name="".concat(t.lastName,", ").concat(t.firstName),t.attended&&a.push(t.id)})),this.people=e.people,this.attendees=a,this.loading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{onCancel:function(){this.$router.go(-1)},onSave:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new FormData,this.attendees.forEach((function(t){e.append("person",t)})),t.next=4,this.$axios.post("/api/events/".concat(this.$route.params.id,"/attendance"),e);case 4:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},c=u,m=a("2877"),d=Object(m["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},"4ab3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:"Logout",subtitle:"Logging out...",menuItem:"logout"}})},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={created:function(){var t=l(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.post("/api/logout");case 2:this.$store.commit("login",null);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},c=u,m=a("2877"),d=Object(m["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},5121:function(t,e,a){},"54a5":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("744f"),a("6c7b"),a("7514"),a("20d6"),a("1c4c"),a("6762"),a("cadf"),a("e804"),a("55dd"),a("d04f"),a("c8ce"),a("217b"),a("7f7f"),a("f400"),a("7f25"),a("536b"),a("d9ab"),a("f9ab"),a("32d7"),a("25c9"),a("9f3c"),a("042e"),a("c7c6"),a("f4ff"),a("049f"),a("7872"),a("a69f"),a("0b21"),a("6c1a"),a("c7c62"),a("84b4"),a("c5f6"),a("2e37"),a("fca0"),a("7cdf"),a("ee1d"),a("b1b1"),a("87f3"),a("9278"),a("5df2"),a("04ff"),a("f751"),a("4504"),a("fee7"),a("ffc1"),a("0d6d"),a("9986"),a("8e6e"),a("25db"),a("e4f7"),a("b9a1"),a("64d5"),a("9aea"),a("db97"),a("66c8"),a("57f0"),a("165b"),a("456d"),a("cf6a"),a("fd24"),a("8615"),a("551c"),a("097d"),a("df1b"),a("2397"),a("88ca"),a("ba16"),a("d185"),a("ebde"),a("2d34"),a("f6b3"),a("2251"),a("c698"),a("a19f"),a("9253"),a("9275"),a("3b2b"),a("3846"),a("4917"),a("a481"),a("28a5"),a("386d"),a("6b54"),a("4f7f"),a("8a81"),a("ac4d"),a("8449"),a("9c86"),a("fa83"),a("48c0"),a("a032"),a("aef6"),a("d263"),a("6c37"),a("9ec8"),a("5695"),a("2fdb"),a("d0b0"),a("5df3"),a("b54a"),a("f576"),a("ed50"),a("788d"),a("14b9"),a("f386"),a("f559"),a("1448"),a("673e"),a("242a"),a("c66f"),a("b05c"),a("34ef"),a("6aa2"),a("15ac"),a("af56"),a("b6e4"),a("9c29"),a("63d9"),a("4dda"),a("10ad"),a("c02b"),a("4795"),a("130f"),a("ac6a"),a("96cf"),a("bba4"),a("8103"),a("0cdd");var n=a("2b0e"),r=a("5f5b");a("ab8b"),a("2dd8");n["default"].use(r["a"]);var s=a("bc3a"),i=a.n(s),o={xsrfCookieName:"auth"},l=i.a.create(o);l.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),l.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=l,window.axios=l,Object.defineProperties(t.prototype,{axios:{get:function(){return l}},$axios:{get:function(){return l}}})},n["default"].use(Plugin);Plugin;var u=a("2f62");n["default"].use(u["a"]);var c=new u["a"].Store({state:{me:null,started:!1,eventsYear:null},mutations:{login:function(t,e){t.me=e,t.started=!0},eventsYear:function(t,e){t.eventsYear=e}},actions:{}}),m=a("8c4f"),d=a("fec3"),p=a("3a11"),h=a("4381"),f=a("e640"),v=a("4ab3"),b=a("2a8c"),g=a("9350"),E=a("b439"),x=a("592a"),y=a("740d"),w=a("0d89");n["default"].use(m["a"]);var _=new m["a"]({mode:"history",base:"/",routes:[{path:"/",redirect:"/events"},{path:"/events",component:f["default"]},{path:"/events/:id",component:p["default"]},{path:"/events/:id/attendance",component:h["default"]},{path:"/logout",component:v["default"]},{path:"/people",component:b["default"]},{path:"/people/:id",component:g["default"]},{path:"/reports",component:E["default"]},{path:"/reports/cert-attendance",component:d["default"],props:function(t){return t.query}},{path:"/teams",component:w["default"]},{path:"/teams/:id",component:y["default"],props:function(t){return{parent:t.query.parent}}},{path:"/teams/:tid/roles/:rid",component:x["default"]}]});n["default"].config.productionTip=!1;var k=a("1628");k.keys().forEach((function(t){var e=k(t),a=t.split("/").pop().replace(/\.vue$/,"");n["default"].component(a,e.default||e)}));var C=new n["default"]({store:c,router:_,render:function(t){return t("Main")}});C.$axios.get("/api/login").then((function(t){c.commit("login",t.data)})).catch((function(){c.commit("login",null)})),C.$mount("#app")},"592a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:t.title,subtitle:t.subtitle,menuItem:"teams"}},[t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-form-group",{attrs:{label:"Role name","label-for":"role-name","label-cols-sm":"auto","label-class":"role-label",state:!t.nameError&&null,"invalid-feedback":t.nameError}},[a("b-input",{attrs:{id:"role-name",autofocus:"",state:!t.nameError&&null,trim:""},model:{value:t.role.name,callback:function(e){t.$set(t.role,"name",e)},expression:"role.name"}})],1),a("b-form-group",{attrs:{label:"Team","label-for":"role-team","label-cols-sm":"auto","label-class":"role-label"}},[a("b-input",{attrs:{id:"role-team",plaintext:"",value:t.team.name}})],1),a("b-form-group",{attrs:{label:"This role has the following privileges on teams:"}},[a("table",{attrs:{id:"role-privs"}},[a("tr",[a("th"),a("th",[t._v("Member")]),a("th",[t._v("Access")])]),t._l(t.privs,(function(e){return a("tr",{key:e.id},[a("td",{class:"indent-"+e.indent,domProps:{textContent:t._s(e.name)}}),a("td",[a("b-checkbox",{model:{value:e.member,callback:function(a){t.$set(e,"member",a)},expression:"team.member"}})],1),a("td",[a("b-radio-group",{attrs:{options:t.accessList},model:{value:e.access,callback:function(a){t.$set(e,"access",a)},expression:"team.access"}})],1)])}))],2)]),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!!t.nameError},domProps:{textContent:t._s(t.role.id?"Save Role":"Create Role")}}),a("b-btn",{staticClass:"ml-2",on:{click:t.onCancel}},[t._v("Cancel")]),t.canDelete?a("b-btn",{staticClass:"ml-5",attrs:{variant:"danger"},on:{click:t.onDelete}},[t._v("Delete Role")]):t._e()],1)],1)])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u=[{value:"none",text:"None"},{value:"view",text:"View"},{value:"admin",text:"Admin"},{value:"manage",text:"Manage"}],c={data:function(){return{accessList:u,loading:!1,origName:null,team:null,role:null,canDelete:!1,privs:null,nameError:null,duplicateName:null,submitted:!1}},created:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/teams/".concat(this.$route.params.tid,"/roles/").concat(this.$route.params.rid));case 3:e=t.sent.data,this.team=e.team,this.role=e.role,this.origName=this.role.name,this.canDelete=e.canDelete,this.privs=e.privs,this.loading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{subtitle:function(){return"NEW"===this.$route.params.rid?"Create Role":"Edit Role"},title:function(){return"NEW"===this.$route.params.rid?"New Role":this.origName?"".concat(this.team.name,": ").concat(this.origName||"(member)"):"Edit Role"}},watch:{"role.name":"validate"},methods:{onCancel:function(){this.$router.go(-1)},onDelete:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new FormData,e.append("delete","true"),t.next=4,this.$axios.post("/api/teams/".concat(this.$route.params.tid,"/roles/").concat(this.$route.params.rid),e);case 4:this.$router.push("/teams");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=l(i.a.mark((function t(){var e,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.submitted=!0,this.validate(),!this.nameError){t.next=4;break}return t.abrupt("return");case 4:return e=new FormData,e.append("name",this.role.name),this.privs.forEach((function(t){e.append("member-".concat(t.id),t.member),e.append("access-".concat(t.id),t.access)})),t.next=9,this.$axios.post("/api/teams/".concat(this.$route.params.tid,"/roles/").concat(this.$route.params.rid),e);case 9:a=t.sent.data,a||this.$router.push("/teams"),a.duplicateName&&(this.duplicateName=this.role.name),this.validate();case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),validate:function(){this.submitted&&(this.duplicateName===this.role.name?this.nameError="A different role on this team has this name.":this.nameError=null)}}},m=c,d=(a("b17a"),a("2877")),p=Object(d["a"])(m,n,r,!1,null,null,null);e["default"]=p.exports},"740d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:t.title,subtitle:t.subtitle,menuItem:"teams"}},[t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-form-group",{attrs:{label:"Team name","label-for":"team-name","label-cols-sm":"auto","label-class":"team-label",state:!t.nameError&&null,"invalid-feedback":t.nameError}},[a("b-input",{attrs:{id:"team-name",autofocus:"",state:!t.nameError&&null,trim:""},model:{value:t.team.name,callback:function(e){t.$set(t.team,"name",e)},expression:"team.name"}})],1),a("b-form-group",{attrs:{label:"Parent team","label-for":"team-parent","label-cols-sm":"auto","label-class":"team-label"}},[a("b-input",{attrs:{id:"team-parent",plaintext:"",value:t.team.parent||"(none)"}})],1),a("b-form-group",{attrs:{label:"Team email","label-for":"team-email","label-cols-sm":"auto","label-class":"team-label",state:!t.emailError&&null,"invalid-feedback":t.emailError}},[a("b-input",{attrs:{id:"team-email",state:!t.emailError&&null,trim:""},model:{value:t.team.email,callback:function(e){t.$set(t.team,"email",e)},expression:"team.email"}})],1),a("b-form-group",{attrs:{label:"This team has the following privileges on other teams:"}},[a("table",{attrs:{id:"team-aprivs"}},[a("tr",[a("th"),a("th",[t._v("Member")]),a("th",[t._v("Access")])]),t._l(t.team.privs,(function(e){return a("tr",{key:e.id},[a("td",{class:"indent-"+e.indent,domProps:{textContent:t._s(e.id?e.name:"(new team)")}}),a("td",[a("b-checkbox",{model:{value:e.actor.member,callback:function(a){t.$set(e.actor,"member",a)},expression:"other.actor.member"}})],1),a("td",[a("b-radio-group",{attrs:{options:t.accessList},model:{value:e.actor.access,callback:function(a){t.$set(e.actor,"access",a)},expression:"other.actor.access"}})],1)])}))],2)]),a("b-form-group",{attrs:{label:"These other teams have the following privileges on this team:"}},[a("table",{attrs:{id:"team-tprivs"}},[a("tr",[a("th"),a("th",[t._v("Member")]),a("th",[t._v("Access")])]),t._l(t.team.privs,(function(e){return a("tr",{key:e.id},[e.id!==t.team.id?[a("td",{class:"indent-"+e.indent,domProps:{textContent:t._s(e.id?e.name:"(new team)")}}),a("td",[a("b-checkbox",{model:{value:e.target.member,callback:function(a){t.$set(e.target,"member",a)},expression:"other.target.member"}})],1),a("td",[a("b-radio-group",{attrs:{options:t.accessList},model:{value:e.target.access,callback:function(a){t.$set(e.target,"access",a)},expression:"other.target.access"}})],1)]:t._e()],2)}))],2)]),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!t.valid},domProps:{textContent:t._s(t.team.id?"Save Team":"Create Team")}}),a("b-btn",{staticClass:"ml-2",on:{click:t.onCancel}},[t._v("Cancel")]),t.canDelete?a("b-btn",{staticClass:"ml-5",attrs:{variant:"danger"},on:{click:t.onDelete}},[t._v("Delete Team")]):t._e()],1)],1)])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u=[{value:"none",text:"None"},{value:"view",text:"View"},{value:"admin",text:"Admin"},{value:"manage",text:"Manage"}],c={props:{parent:String},data:function(){return{accessList:u,loading:!1,origName:null,team:null,canDelete:!1,nameError:null,duplicateName:null,emailError:null,duplicateEmail:null,submitted:!1,valid:!0}},created:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/teams/".concat(this.$route.params.id,"?parent=").concat(this.parent||""));case 3:e=t.sent.data,this.team={id:e.id,name:e.name,email:e.email,parent:e.parent,privs:e.privs},this.origName=e.name,this.canDelete=e.canDelete,this.loading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{subtitle:function(){return"NEW"===this.$route.params.id?"Create Team":"Edit Team"},title:function(){return"NEW"===this.$route.params.id?"New Team":this.origName?"Team: ".concat(this.origName):"Edit Team"}},watch:{"team.name":"validate","team.email":"validate"},methods:{onCancel:function(){this.$router.go(-1)},onDelete:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new FormData,e.append("delete","true"),t.next=4,this.$axios.post("/api/teams/".concat(this.$route.params.id),e);case 4:this.$router.push("/teams");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=l(i.a.mark((function t(){var e,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.submitted=!0,this.validate(),this.valid){t.next=4;break}return t.abrupt("return");case 4:return e=new FormData,e.append("parent",this.parent),e.append("name",this.team.name),e.append("email",this.team.email),this.team.privs.forEach((function(t){e.append("a:member-".concat(t.id),t.actor.member),e.append("a:access-".concat(t.id),t.actor.access),e.append("t:member-".concat(t.id),t.target.member),e.append("t:access-".concat(t.id),t.target.access)})),t.next=11,this.$axios.post("/api/teams/".concat(this.$route.params.id),e);case 11:a=t.sent.data,a||this.$router.push("/teams"),a.duplicateName&&(this.duplicateName=this.team.name),a.duplicateEmail&&(this.duplicateEmail=this.team.email),this.validate();case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),validate:function(){this.submitted&&(this.team.name?this.duplicateName===this.team.name?this.nameError="A different team has this name.":this.nameError=null:this.nameError="The team name is required.",this.duplicateEmail&&this.duplicateEmail===this.team.email?this.emailError="A different team has this email.":this.emailError=null,this.valid=!this.nameError&&!this.emailError)}}},m=c,d=(a("e1f5"),a("2877")),p=Object(d["a"])(m,n,r,!1,null,null,null);e["default"]=p.exports},"755c":function(t,e,a){"use strict";var n=a("f0f1"),r=a.n(n);r.a},"7c64":function(t,e,a){},"81fc":function(t,e,a){"use strict";var n=a("f7bb"),r=a.n(n);r.a},9350:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:t.title,subtitle:t.subtitle,menuItem:"people"}},[t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("form",{staticClass:"mt-3",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-form-group",{attrs:{label:"First name","label-for":"person-firstName","label-cols-sm":"auto","label-class":"person-label",state:!t.firstNameError&&null,"invalid-feedback":t.firstNameError}},[a("b-input",{attrs:{id:"person-firstName",autofocus:"",plaintext:!t.canEditInfo,state:!t.firstNameError&&null,trim:""},model:{value:t.person.firstName,callback:function(e){t.$set(t.person,"firstName",e)},expression:"person.firstName"}})],1),a("b-form-group",{attrs:{label:"Last name","label-for":"person-lastName","label-cols-sm":"auto","label-class":"person-label",state:!t.lastNameError&&null,"invalid-feedback":t.lastNameError}},[a("b-input",{attrs:{id:"person-lastName",autofocus:"",plaintext:!t.canEditInfo,state:!t.lastNameError&&null,trim:""},model:{value:t.person.lastName,callback:function(e){t.$set(t.person,"lastName",e)},expression:"person.lastName"}})],1),a("b-form-group",{attrs:{label:"Email address","label-for":"person-email","label-cols-sm":"auto","label-class":"person-label",state:!t.emailError&&null,"invalid-feedback":t.emailError}},[a("b-input",{attrs:{id:"person-email",autofocus:"",plaintext:!t.canEditInfo,state:!t.emailError&&null,trim:""},model:{value:t.person.email,callback:function(e){t.$set(t.person,"email",e)},expression:"person.email"}})],1),a("b-form-group",{attrs:{label:"Phone number","label-for":"person-phone","label-cols-sm":"auto","label-class":"person-label",state:!t.phoneError&&null,"invalid-feedback":t.phoneError}},[a("b-input",{attrs:{id:"person-phone",autofocus:"",plaintext:!t.canEditInfo,state:!t.phoneError&&null,trim:""},model:{value:t.person.phone,callback:function(e){t.$set(t.person,"phone",e)},expression:"person.phone"}})],1),a("div",{staticClass:"mt-3",domProps:{textContent:t._s((t.me?"You belong":"This person belongs")+" to these teams:")}}),a("table",{attrs:{id:"person-team-table"}},t._l(t.teams,(function(e){return a("PersonTeam",{key:e.id,attrs:{manageAny:t.manageAny,team:e},on:{change:t.onChangeTeam}})})),1),t.adminAny?a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!t.valid},domProps:{textContent:t._s(t.submitLabel)}}),a("b-btn",{staticClass:"ml-2",on:{click:t.onCancel}},[t._v("Cancel")])],1):t._e()],1)])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={data:function(){return{loading:!1,person:null,teams:null,canEditInfo:!1,manageAny:!1,adminAny:!1,firstNameError:null,lastNameError:null,duplicateName:null,emailError:null,duplicateEmail:null,phoneError:null,valid:!0,submitted:!1}},computed:{me:function(){return this.$route.params.id==this.$store.state.me.id},submitLabel:function(){return this.me?"Save Changes":"NEW"===this.$route.params.id?"Create Person":"Save Person"},subtitle:function(){return this.me?"Edit Profile":"NEW"===this.$route.params.id?"New Person":"Edit Person"},title:function(){return this.person&&this.person.id?"".concat(this.person.firstName," ").concat(this.person.lastName):"NEW"===this.$route.params.id?"New Person":"Edit Person"}},created:function(){var t=l(i.a.mark((function t(){var e,a=this;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/people/".concat(this.$route.params.id));case 3:e=t.sent.data,this.canEditInfo=e.canEditInfo,this.person=e.person,this.teams=e.teams,this.teams.forEach((function(t){t.canManage&&(a.manageAny=!0),t.canAdmin&&(a.adminAny=!0)})),this.loading=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{"person.firstName":"validate","person.lastName":"validate","person.email":"validate","person.phone":"validate"},methods:{onCancel:function(){this.$router.go(-1)},onChangeTeam:function(t){var e=t.team,a=t.role;e.role=a?a.id:0},onSubmit:function(){var t=l(i.a.mark((function t(){var e,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.submitted=!0,this.validate(),this.valid){t.next=4;break}return t.abrupt("return");case 4:return e=new FormData,e.append("firstName",this.person.firstName),e.append("lastName",this.person.lastName),e.append("email",this.person.email),e.append("phone",this.person.phone),this.teams.forEach((function(t){t.role&&e.append("role",t.role)})),t.next=12,this.$axios.post("/api/people/".concat(this.$route.params.id),e);case 12:a=t.sent.data,a?(a.nameError&&(this.duplicateName={firstName:this.person.firstName,lastName:this.person.lastName}),a.emailError&&(this.duplicateEmail=this.person.email),this.validate()):this.$router.push("/people");case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),validate:function(){this.submitted&&(this.person.firstName?this.firstNameError=null:this.firstNameError="A first name is required.",this.person.lastName?this.duplicateName&&this.person.firstName==this.duplicateName.firstName&&this.person.lastName==this.duplicateName.lastName?this.lastNameError="A different person has this name.":this.lastNameError=null:this.lastNameError="A last name is required.",this.person.email?this.person.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)?this.person.email===this.duplicateEmail?this.emailError="This email address is in use by another person.":this.emailError=null:this.emailError="This is not a valid email address.":this.emailError="An email address is required.",this.person.phone&&10!==this.person.phone.replace(/[^0-9]/g,"").length?this.phoneError="A valid phone number must have 10 digits.":this.phoneError=null,this.valid=!this.firstNameError&&!this.lastNameError&&!this.emailError&&!this.phoneError)}}},c=u,m=(a("c1c8"),a("2877")),d=Object(m["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},b17a:function(t,e,a){"use strict";var n=a("54a5"),r=a.n(n);r.a},b439:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:"Reports",menuItem:"reports"}},[t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):[a("CERTAttendanceForm",t._b({},"CERTAttendanceForm",t.certAtt,!1))]],2)},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={data:function(){return{loading:!1,certAtt:null}},created:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/reports");case 3:e=t.sent.data,this.certAtt=e.certAttendance,this.loading=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},c=u,m=(a("c33c"),a("2877")),d=Object(m["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},b599:function(t,e,a){},be131:function(t,e,a){},c1c8:function(t,e,a){"use strict";var n=a("5121"),r=a.n(n);r.a},c33c:function(t,e,a){"use strict";var n=a("0fe9"),r=a.n(n);r.a},d251:function(t,e,a){"use strict";var n=a("b599"),r=a.n(n);r.a},e1af:function(t,e,a){"use strict";var n=a("0964"),r=a.n(n);r.a},e1f5:function(t,e,a){"use strict";var n=a("13d7"),r=a.n(n);r.a},e5f1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"person-team-row"},[!t.team.canAdmin&&t.team.role?a("td",{domProps:{textContent:t._s(t.team.name+": "+t.roleName(t.team.role))}}):t.team.canAdmin?a("td",[t.manageAny?a("b-checkbox",{attrs:{checked:!!t.team.role},on:{change:t.onMemberChange}},[t._v(t._s(t.team.name))]):a("span",{domProps:{textContent:t._s(t.team.name)}})],1):a("td",{domProps:{textContent:t._s(t.team.name)}}),t.team.canAdmin&&t.team.roles.length>1&&t.team.role?a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.team.role,expression:"team.role"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.team,"role",e.target.multiple?a:a[0])}}},t._l(t.team.roles,(function(e){return a("option",{key:e.id,domProps:{value:e.id,textContent:t._s(e.name||"(member)")}})})),0)]):t._e()])},r=[],s={props:{manageAny:Boolean,team:Object},methods:{onMemberChange:function(){this.team.role=this.team.role?0:this.team.roles[0].id},roleName:function(t){return this.team.roles.find((function(e){return e.id===t})).name}}},i=s,o=a("2877"),l=Object(o["a"])(i,n,r,!1,null,null,null);e["default"]=l.exports},e640:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:"Events",menuItem:"events"}},[a("div",{attrs:{id:"events-title"}},[t._v("Events"),a("select",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],attrs:{id:"events-year"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.year=e.target.multiple?a:a[0]}}},t._l(t.years,(function(e){return a("option",{key:e,domProps:{value:e,textContent:t._s(e)}})})),0)]),t.loading?a("div",{attrs:{id:"events-spinner"}},[a("b-spinner",{attrs:{small:""}})],1):a("div",{attrs:{id:"events-table"}},[a("tr",[a("th",[t._v("Date")]),a("th",[t._v("Event")]),a("th")]),t._l(t.events,(function(e){return a("tr",{key:e.id},[a("td",{domProps:{textContent:t._s(e.date)}}),a("td",[a("router-link",{attrs:{to:"/events/"+e.id},domProps:{textContent:t._s(e.name)}})],1),a("td",[e.canAttendance?a("router-link",{attrs:{to:"/events/"+e.id+"/attendance"}},[t._v("Attendance")]):t._e()],1)])}))],2),t.canAdd&&!t.loading?a("div",{attrs:{id:"events-buttons"}},[a("b-btn",{attrs:{to:"/events/NEW?year="+t.year}},[t._v("Add Event")])],1):t._e()])},r=[],s=a("a34a"),i=a.n(s),o=a("5a3a"),l=a.n(o);function u(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){u(s,n,r,i,o,"next",t)}function o(t){u(s,n,r,i,o,"throw",t)}i(void 0)}))}}var m={data:function(){return{year:null,years:l()(2019,(new Date).getFullYear()+2),events:null,canAdd:!1,loading:!0}},created:function(){this.year=this.$route.params.year||this.$store.state.eventsYear||(new Date).getFullYear()},watch:{year:function(){this.$store.commit("eventsYear",this.year),this.load()}},methods:{load:function(){var t=c(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/events?year=".concat(this.year));case 3:e=t.sent.data,this.canAdd=e.canAdd,this.events=e.events,this.loading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},d=m,p=(a("e1af"),a("2877")),h=Object(p["a"])(d,n,r,!1,null,null,null);e["default"]=h.exports},ea21:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{attrs:{id:"cert-att-form"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("div",{staticClass:"report-title"},[t._v("CERT Attendance Report")]),a("b-form-group",{attrs:{label:"Report on team","label-cols-sm":"auto","label-class":"cert-att-label"}},[a("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:t.teamList},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1),a("b-form-group",{attrs:{label:"Date range","label-cols-sm":"auto","label-class":"cert-att-label",state:!t.dateError&&null,"invalid-feedback":t.dateError}},[a("b-form-input",{attrs:{id:"cert-att-date-from",type:"date",state:!t.dateError&&null},model:{value:t.dateFromI,callback:function(e){t.dateFromI=e},expression:"dateFromI"}}),t._v("\nthrough\n"),a("b-form-input",{attrs:{id:"cert-att-date-to",type:"date",state:!t.dateError&&null},model:{value:t.dateToI,callback:function(e){t.dateToI=e},expression:"dateToI"}})],1),a("b-form-group",{attrs:{label:"Statistics by","label-cols-sm":"auto","label-class":"cert-att-label"}},[a("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:t.statsList},model:{value:t.stats,callback:function(e){t.stats=e},expression:"stats"}})],1),a("b-form-group",{attrs:{label:"Show detail","label-cols-sm":"auto","label-class":"cert-att-label"}},[a("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:t.detailList},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}})],1),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!!t.dateError}},[t._v("Generate Report")])],1)],1)},r=[],s=["Alpha","Bravo","Both"],i=[{value:"count",text:"Number of Events"},{value:"hours",text:"Cumulative Hours"}],o=[{value:"date",text:"Show by date"},{value:"month",text:"Show by month"},{value:"total",text:"Show totals only"}],l=/^20\d\d-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])$/,u={props:{dateFrom:String,dateTo:String},data:function(){return{teamList:s,statsList:i,detailList:o,team:"Both",dateFromI:null,dateToI:null,stats:"count",detail:"month",dateError:null}},created:function(){this.dateFromI=this.dateFrom,this.dateToI=this.dateTo},watch:{dateFromI:"checkDates",dateToI:"checkDates"},methods:{checkDates:function(){this.dateFromI&&this.dateToI?this.dateFromI.match(l)&&this.dateToI.match(l)?this.dateFromI>this.dateToI?this.dateError="The starting date must be before the ending date.":this.dateError=null:this.dateError="Valid dates have the form YYYY-MM-DD.":this.dateError="Starting and ending dates are required."},onSubmit:function(){this.dateError||this.$router.push("/reports/cert-attendance?team=".concat(this.team,"&dateFrom=").concat(this.dateFrom,"&dateTo=").concat(this.dateTo,"&stats=").concat(this.stats,"&detail=").concat(this.detail))}}},c=u,m=(a("755c"),a("2877")),d=Object(m["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},f0d3:function(t,e,a){"use strict";var n=a("7c64"),r=a.n(n);r.a},f0f1:function(t,e,a){},f7bb:function(t,e,a){},fec3:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Page",{attrs:{title:"CERT Attendance",subtitle:"CERT Attendance",menuItem:"reports"}},[t.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("table",{attrs:{id:"cert-att-table"}},[a("thead",t._l(t.header,(function(e,n){return a("tr",{key:n},t._l(e,(function(e,r){return a("td",{key:r,class:t.headerClass(n,r),attrs:{colspan:e.span||1},domProps:{textContent:t._s(t.wrapText(e))}})})),0)})),0),a("tbody",t._l(t.body,(function(e,n){return a("tr",{key:n},t._l(e,(function(e,n){return a("td",{key:n,class:t.spanStarts[n]?"cert-att-span":null,domProps:{textContent:t._s(e)}})})),0)})),0),a("tfoot",t._l(t.footer,(function(e,n){return a("tr",{key:n},t._l(e,(function(e,n){return a("td",{key:n,class:t.spanStarts[n]?"cert-att-span":null,domProps:{textContent:t._s(e)}})})),0)})),0)])])},r=[],s=a("a34a"),i=a.n(s);function o(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(u){return void a(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){o(s,n,r,i,l,"next",t)}function l(t){o(s,n,r,i,l,"throw",t)}i(void 0)}))}}var u={props:{team:String,dateFrom:String,dateTo:String,stats:String,detail:String},data:function(){return{loading:!1,header:null,body:null,footer:null}},computed:{spanStarts:function(){var t={},e=0;return this.header[0].forEach((function(a){a.span&&(t[e]=!0),e+=a.span||1})),t}},created:function(){var t=l(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$axios.get("/api/reports/cert-attendance",{params:{team:this.team,dateFrom:this.dateFrom,dateTo:this.dateTo,stats:this.stats,detail:this.detail,format:"JSON"}});case 3:e=t.sent.data,console.log(e),this.header=e.header,this.body=e.body,this.footer=e.footer,this.loading=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{headerClass:function(t,e){return 0===t&&0!==e||0!==t&&this.spanStarts[e]?"cert-att-span":null},wrapText:function(t){return t.span>1?t.text:t.text.replace("-","\n")}}},c=u,m=(a("0619"),a("2877")),d=Object(m["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports}});
//# sourceMappingURL=app.b5d7bad0.js.map