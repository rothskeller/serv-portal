{"version":3,"sources":["webpack:///./client/pages/Unsubscribe.vue?5b42","webpack:///client/pages/Unsubscribe.vue","webpack:///./client/pages/Unsubscribe.vue?033a","webpack:///./client/pages/Unsubscribe.vue","webpack:///./client/base/PublicPage.vue?b0b3","webpack:///client/base/PublicPage.vue","webpack:///./client/base/PublicPage.vue?bf24","webpack:///./client/base/PublicPage.vue","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./client/pages/Unsubscribe.vue?ce54"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_l","g","key","id","model","value","callback","$$v","$set","expression","_s","email","noEmail","on","onSubmit","staticRenderFns","components","data","methods","component","class","$store","state","touch","domProps","title","_t","props","String","module","exports"],"mappings":"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","file":"js/Unsubscribe.eaceac4b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('PublicPage',{attrs:{\"title\":\"Sunnyvale SERV\"}},[(_vm.loading)?_c('div',{staticClass:\"mt-3 ml-2\"},[_c('b-spinner',{attrs:{\"small\":\"\"}})],1):(_vm.submitted)?_c('div',{staticClass:\"mt-3 mx-2\"},[_c('div',{attrs:{\"id\":\"unsub-head\"}},[_vm._v(\"Unsubscribe\")]),(_vm.noEmail)?_c('div',{attrs:{\"id\":\"unsub-intro\"}},[_vm._v(\"You have been removed from all of our email lists.\")]):_c('div',{attrs:{\"id\":\"unsub-intro\"}},[_vm._v(\"You have been removed from the selected email lists.\")]),_c('div',{attrs:{\"id\":\"unsub-warn\"}},[_vm._v(\"We would appreciate it if you’d drop us a note at\\n\"),_c('a',{attrs:{\"href\":\"mailto:admin@sunnyvaleserv.org\"}},[_vm._v(\"admin@sunnyvaleserv.org\")]),_vm._v(\"\\nand let us know why you unsubscribed.\")]),_c('div',{attrs:{\"id\":\"unsub-warn\"}},[_vm._v(\"If you ever want to get back on the email lists, come back to this page\\nand let us know.\")])]):_c('div',{staticClass:\"mt-3 mx-2\"},[_c('div',{attrs:{\"id\":\"unsub-head\"}},[_vm._v(\"Unsubscribe\")]),_c('div',{attrs:{\"id\":\"unsub-intro\"}},[_vm._v(\"Which email list(s) do you want to unsubscribe from?\")]),_vm._l((_vm.groups),function(g){return _c('b-checkbox',{key:g.id,model:{value:(g.unsub),callback:function ($$v) {_vm.$set(g, \"unsub\", $$v)},expression:\"g.unsub\"}},[_vm._v(_vm._s(g.email)+\"@SunnyvaleSERV.org\")])}),_c('b-checkbox',{staticClass:\"mt-1\",model:{value:(_vm.noEmail),callback:function ($$v) {_vm.noEmail=$$v},expression:\"noEmail\"}},[_vm._v(\"All Sunnyvale SERV email lists\")]),_c('div',{attrs:{\"id\":\"unsub-warn\"}},[_vm._v(\"Please note that, if you unsubscribe from a critical mailing list for one\\nof our volunteer groups, you may no longer be able to participate in that\\ngroup.\")]),_c('div',{attrs:{\"id\":\"unsub-buttons\"}},[_c('b-btn',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"Unsubscribe\")])],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nUnsubscribe displays the Unsubscribe page.\n-->\n\n<template lang=\"pug\">\nPublicPage(title=\"Sunnyvale SERV\")\n  div.mt-3.ml-2(v-if=\"loading\")\n    b-spinner(small)\n  div.mt-3.mx-2(v-else-if=\"submitted\")\n    #unsub-head Unsubscribe\n    #unsub-intro(v-if=\"noEmail\").\n      You have been removed from all of our email lists.\n    #unsub-intro(v-else).\n      You have been removed from the selected email lists.\n    #unsub-warn.\n      We would appreciate it if you’d drop us a note at\n      <a href=\"mailto:admin@sunnyvaleserv.org\">admin@sunnyvaleserv.org</a>\n      and let us know why you unsubscribed.\n    #unsub-warn.\n      If you ever want to get back on the email lists, come back to this page\n      and let us know.\n  div.mt-3.mx-2(v-else)\n    #unsub-head Unsubscribe\n    #unsub-intro Which email list(s) do you want to unsubscribe from?\n    b-checkbox(v-for=\"g in groups\" :key=\"g.id\" v-model=\"g.unsub\") {{g.email}}@SunnyvaleSERV.org\n    b-checkbox.mt-1(v-model=\"noEmail\") All Sunnyvale SERV email lists\n    #unsub-warn.\n      Please note that, if you unsubscribe from a critical mailing list for one\n      of our volunteer groups, you may no longer be able to participate in that\n      group.\n    #unsub-buttons\n      b-btn(variant=\"primary\" @click=\"onSubmit\") Unsubscribe\n</template>\n\n<script>\nimport PublicPage from '@/base/PublicPage'\n\nexport default {\n  components: { PublicPage },\n  data: () => ({\n    loading: false,\n    noEmail: false,\n    groups: null,\n    submitted: false,\n  }),\n  async created() {\n    this.loading = true\n    const data = (await this.$axios.get(`/api/unsubscribe/${this.$route.params.token}`)).data\n    this.noEmail = data.noEmail\n    this.groups = data.groups\n    this.loading = false\n    if (this.$route.params.email) {\n      this.groups.forEach(g => {\n        if (g.email === this.$route.params.email) g.unsub = true\n      })\n    }\n  },\n  methods: {\n    async onSubmit() {\n      const body = new FormData\n      body.append('noEmail', this.noEmail)\n      this.groups.forEach(g => {\n        body.append(`unsub:${g.id}`, g.unsub)\n      })\n      await this.$axios.post(`/api/unsubscribe/${this.$route.params.token}`, body)\n      this.submitted = true\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n#unsub-head\n  font-weight bold\n  font-size 1.25rem\n#unsub-intro\n  margin 0.5rem 0\n#unsub-warn\n  margin 0.5rem 0 0.75rem\n  max-width 40rem\n  line-height 1.2\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Unsubscribe.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Unsubscribe.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Unsubscribe.vue?vue&type=template&id=678e225c&lang=pug&\"\nimport script from \"./Unsubscribe.vue?vue&type=script&lang=js&\"\nexport * from \"./Unsubscribe.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Unsubscribe.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$store.state.touch ? 'touch' : 'mouse',attrs:{\"id\":\"page-top\"}},[_c('div',{attrs:{\"id\":\"page-heading\"}},[_c('div',{attrs:{\"id\":\"page-menu-spacer\"}}),_c('div',{attrs:{\"id\":\"page-titlebox\"}},[_c('div',{attrs:{\"id\":\"page-title\"},domProps:{\"textContent\":_vm._s(_vm.title)}})]),_c('div',{attrs:{\"id\":\"page-menu-spacer\"}})]),_c('div',{staticClass:\"page-no-menu\",attrs:{\"id\":\"page-content\"}},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nPublicPage is a minimal version of the page structure in MainMenu.vue, used for\npublic (nonauthenticated) pages.\n-->\n\n<template lang=\"pug\">\n#page-top(:class=\"$store.state.touch ? 'touch' : 'mouse'\")\n  #page-heading\n    #page-menu-spacer\n    #page-titlebox\n      #page-title(v-text=\"title\")\n    #page-menu-spacer\n  #page-content.page-no-menu\n    slot\n</template>\n\n<script>\nexport default {\n  props: {\n    title: String,\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicPage.vue?vue&type=template&id=e7dc1af8&lang=pug&\"\nimport script from \"./PublicPage.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = require(\"regenerator-runtime\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Unsubscribe.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Unsubscribe.vue?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}