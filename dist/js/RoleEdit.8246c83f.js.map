{"version":3,"sources":["webpack:///./client/pages/admin/RoleEdit.vue?ae4a","webpack:///./client/base/Privileges.vue?d4fb","webpack:///client/base/Privileges.vue","webpack:///./client/base/Privileges.vue?5589","webpack:///./client/base/Privileges.vue","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./client/base/Privileges.vue?6f3e","webpack:///./client/pages/admin/RoleEdit.vue?e62f","webpack:///client/pages/admin/RoleEdit.vue","webpack:///./client/pages/admin/RoleEdit.vue?aa59","webpack:///./client/pages/admin/RoleEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","privs","member","on","toggleMember","_v","roster","toggleRoster","contact","toggleContact","admin","toggleAdmin","events","toggleEvents","texts","toggleTexts","emails","toggleEmails","bcc","toggleBCC","staticRenderFns","props","Object","model","prop","event","methods","$emit","np","component","module","exports","role","$event","preventDefault","onSubmit","nameError","value","callback","$$v","$set","expression","directives","name","rawName","modifiers","_l","g","i","domProps","_s","valid","newr","onCancel","_e","onClone","onDelete","components","onLoadRole","Function","data","computed","watch","$route","created","onChangeRoute","$router","push","validate","submitted"],"mappings":"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","file":"js/RoleEdit.8246c83f.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleEdit.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleEdit.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"privileges\"},[_c('b-btn',{staticClass:\"mr-2\",attrs:{\"variant\":_vm.privs.member ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleMember}},[_vm._v(\"M\")]),_c('b-btn-group',{attrs:{\"size\":\"sm\"}},[_c('b-btn',{attrs:{\"variant\":_vm.privs.roster ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleRoster}},[_vm._v(\"R\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.contact ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleContact}},[_vm._v(\"C\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.admin ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleAdmin}},[_vm._v(\"A\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.events ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleEvents}},[_vm._v(\"E\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.texts ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleTexts}},[_vm._v(\"T\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.emails ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleEmails}},[_vm._v(\"@\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.bcc ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleBCC}},[_vm._v(\"B\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nPrivileges displays the privilege choices for a role acting on a group.\n-->\n\n<template lang=\"pug\">\n.privileges\n  b-btn.mr-2(\n    :variant=\"privs.member ? 'primary' : 'outline-primary'\"\n    size=\"sm\"\n    @click=\"toggleMember\"\n  ) M\n  b-btn-group(size=\"sm\")\n    b-btn(\n      :variant=\"privs.roster ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleRoster\"\n    ) R\n    b-btn(\n      :variant=\"privs.contact ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleContact\"\n    ) C\n    b-btn(\n      :variant=\"privs.admin ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleAdmin\"\n    ) A\n    b-btn(\n      :variant=\"privs.events ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleEvents\"\n    ) E\n    b-btn(\n      :variant=\"privs.texts ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleTexts\"\n    ) T\n    b-btn(\n      :variant=\"privs.emails ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleEmails\"\n    ) @\n    b-btn(\n      :variant=\"privs.bcc ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleBCC\"\n    ) B\n</template>\n\n<script>\nexport default {\n  props: {\n    privs: Object,\n  },\n  model: {\n    prop: 'privs',\n    event: 'change',\n  },\n  methods: {\n    toggleMember() {\n      this.$emit('change', { ...this.privs, member: !this.privs.member })\n    },\n    toggleRoster() {\n      const np = { ...this.privs, roster: !this.privs.roster }\n      if (!np.roster)\n        np.contact = np.admin = np.events = np.texts = false\n      this.$emit('change', np)\n    },\n    toggleContact() {\n      const np = { ...this.privs, contact: !this.privs.contact }\n      if (np.contact)\n        np.roster = true\n      else\n        np.texts = false\n      this.$emit('change', np)\n    },\n    toggleAdmin() {\n      const np = { ...this.privs, admin: !this.privs.admin }\n      if (np.admin)\n        np.roster = true\n      this.$emit('change', np)\n    },\n    toggleEvents() {\n      const np = { ...this.privs, events: !this.privs.events }\n      if (np.events)\n        np.roster = true\n      this.$emit('change', np)\n    },\n    toggleTexts() {\n      const np = { ...this.privs, texts: !this.privs.texts }\n      if (np.texts)\n        np.roster = np.contact = true\n      this.$emit('change', np)\n    },\n    toggleEmails() {\n      this.$emit('change', { ...this.privs, emails: !this.privs.emails })\n    },\n    toggleBCC() {\n      this.$emit('change', { ...this.privs, bcc: !this.privs.bcc })\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n.privileges\n  margin 0.125rem 0\n  white-space nowrap\n  .btn-outline-primary:hover\n    background-color #fff\n    color #007bff\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Privileges.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Privileges.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Privileges.vue?vue&type=template&id=5cc1f866&lang=pug&\"\nimport script from \"./Privileges.vue?vue&type=script&lang=js&\"\nexport * from \"./Privileges.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Privileges.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = require(\"regenerator-runtime\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Privileges.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Privileges.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.role)?_c('div',{staticClass:\"mt-3 ml-2\"},[_c('b-spinner',{attrs:{\"small\":\"\"}})],1):_c('form',{attrs:{\"id\":\"role-edit\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('b-form-group',{attrs:{\"label\":\"Role name\",\"label-for\":\"role-name\",\"label-cols-sm\":\"auto\",\"label-class\":\"role-edit-label\",\"state\":_vm.nameError ? false : null,\"invalid-feedback\":_vm.nameError}},[_c('b-input',{attrs:{\"id\":\"role-edit-name\",\"autofocus\":\"\",\"state\":_vm.nameError ? false : null,\"trim\":\"\"},model:{value:(_vm.role.name),callback:function ($$v) {_vm.$set(_vm.role, \"name\", $$v)},expression:\"role.name\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Flags\",\"label-cols-sm\":\"auto\",\"label-class\":\"role-edit-label pt-0\"}},[_c('div',{attrs:{\"id\":\"role-edit-flags\"}},[_c('b-checkbox',{model:{value:(_vm.role.individual),callback:function ($$v) {_vm.$set(_vm.role, \"individual\", $$v)},expression:\"role.individual\"}},[_vm._v(\"Individual (one person only)\")])],1)]),_c('div',{attrs:{\"id\":\"role-edit-privs\"}},[_c('div',{staticClass:\"role-edit-group role-edit-heading\"},[_vm._v(\"Group\")]),_c('div',{staticClass:\"role-edit-privs role-edit-heading\"},[_vm._v(\"Privileges (\"),_c('b-link',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.role-edit-priv-key\",modifiers:{\"role-edit-priv-key\":true}}],attrs:{\"href\":\"#\"}},[_vm._v(\"Key\")]),_vm._v(\")\"),_c('b-modal',{attrs:{\"id\":\"role-edit-priv-key\",\"title\":\"Privileges Key\",\"ok-only\":\"\"}},[_c('div',{attrs:{\"id\":\"role-edit-priv-key-body\"}},[_c('div',{staticClass:\"mb-2\"},[_vm._v(\"M = Role conveys membership in group\")]),_c('div',[_vm._v(\"R = Role allows viewing group roster\")]),_c('div',[_vm._v(\"C = Role allows viewing contact info of group members\")]),_c('div',[_vm._v(\"A = Role allows administration of group (adding/removing members)\")]),_c('div',[_vm._v(\"E = Role allows management of events for group\")]),_c('div',[_vm._v(\"T = Role allows sending text messages to group\")]),_c('div',[_vm._v(\"@ = Role allows sending email messages to group\")]),_c('div',[_vm._v(\"B = Role gets bcc'd on email messages to group\")])])])],1),_vm._l((_vm.privs),function(g,i){return [_c('div',{staticClass:\"role-edit-group\",domProps:{\"textContent\":_vm._s(g.name)}}),_c('Privileges',{staticClass:\"role-edit-privs\",model:{value:(_vm.privs[i]),callback:function ($$v) {_vm.$set(_vm.privs, i, $$v)},expression:\"privs[i]\"}})]})],2),_c('div',{staticClass:\"mt-3\"},[_c('b-btn',{attrs:{\"type\":\"submit\",\"variant\":\"primary\",\"disabled\":!_vm.valid},domProps:{\"textContent\":_vm._s(_vm.newr ? 'Create Role' : 'Save Role')}}),_c('b-btn',{staticClass:\"ml-2\",on:{\"click\":_vm.onCancel}},[_vm._v(\"Cancel\")]),(!_vm.newr)?_c('b-btn',{staticClass:\"ml-5\",on:{\"click\":_vm.onClone}},[_vm._v(\"Clone Role\")]):_vm._e(),(_vm.canDelete)?_c('b-btn',{staticClass:\"ml-2\",attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.onDelete}},[_vm._v(\"Delete Role\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nRoleEdit displays the role viewing/editing page.\n-->\n\n<template lang=\"pug\">\ndiv.mt-3.ml-2(v-if=\"!role\")\n  b-spinner(small)\nform#role-edit(v-else @submit.prevent=\"onSubmit\")\n  b-form-group(label=\"Role name\" label-for=\"role-name\" label-cols-sm=\"auto\" label-class=\"role-edit-label\" :state=\"nameError ? false : null\" :invalid-feedback=\"nameError\")\n    b-input#role-edit-name(autofocus :state=\"nameError ? false : null\" trim v-model=\"role.name\")\n  b-form-group(label=\"Flags\" label-cols-sm=\"auto\" label-class=\"role-edit-label pt-0\")\n    #role-edit-flags\n      b-checkbox(v-model=\"role.individual\") Individual (one person only)\n  #role-edit-privs\n    .role-edit-group.role-edit-heading Group\n    .role-edit-privs.role-edit-heading\n      | Privileges (\n      b-link(href=\"#\" v-b-modal.role-edit-priv-key) Key\n      | )\n      b-modal#role-edit-priv-key(title=\"Privileges Key\" ok-only)\n        #role-edit-priv-key-body\n          div.mb-2 M = Role conveys membership in group\n          div R = Role allows viewing group roster\n          div C = Role allows viewing contact info of group members\n          div A = Role allows administration of group (adding/removing members)\n          div E = Role allows management of events for group\n          div T = Role allows sending text messages to group\n          div @ = Role allows sending email messages to group\n          div B = Role gets bcc'd on email messages to group\n    template(v-for=\"(g, i) in privs\")\n      .role-edit-group(v-text=\"g.name\")\n      Privileges.role-edit-privs(v-model=\"privs[i]\")\n  div.mt-3\n    b-btn(type=\"submit\" variant=\"primary\" :disabled=\"!valid\" v-text=\"newr ? 'Create Role' : 'Save Role'\")\n    b-btn.ml-2(@click=\"onCancel\") Cancel\n    b-btn.ml-5(v-if=\"!newr\" @click=\"onClone\") Clone Role\n    b-btn.ml-2(v-if=\"canDelete\" variant=\"danger\" @click=\"onDelete\") Delete Role\n</template>\n\n<script>\nimport Privileges from '@/base/Privileges'\n\nexport default {\n  components: { Privileges },\n  props: {\n    onLoadRole: Function,\n  },\n  data: () => ({\n    role: null,\n    privs: null,\n    canDelete: false,\n    submitted: false,\n    nameError: null,\n    duplicateName: null,\n  }),\n  computed: {\n    newr() { return this.$route.params.rid === 'NEW' },\n    valid() { return !this.nameError },\n  },\n  watch: {\n    $route: 'onChangeRoute',\n    'role.name': 'validate',\n  },\n  created() {\n    this.onChangeRoute()\n  },\n  methods: {\n    onCancel() { this.$router.go(-1) },\n    async onChangeRoute() {\n      const rid = this.$route.params.clone || this.$route.params.rid\n      const data = (await this.$axios.get(`/api/roles/${rid}`)).data\n      this.role = data.role\n      this.privs = data.privs\n      this.canDelete = data.canDelete && this.$route.params.rid !== 'NEW'\n      this.onLoadRole(this.role)\n    },\n    onClone() {\n      this.$router.push({ name: 'roles-rid', params: { rid: 'NEW', clone: this.$route.params.rid } })\n    },\n    async onDelete() {\n      const resp = await this.$bvModal.msgBoxConfirm(\n        'Are you sure you want to delete this role?  All associated data, including privileges and memberships, will be permanently lost.', {\n        title: 'Delete Role', headerBgVariant: 'danger', headerTextVariant: 'white',\n        okTitle: 'Delete', okVariant: 'danger', cancelTitle: 'Keep',\n      }).catch(err => { })\n      if (!resp) return\n      const body = new FormData\n      body.append('delete', 'true')\n      await this.$axios.post(`/api/roles/${this.$route.params.rid}`, body)\n      this.$router.push('/admin/roles')\n    },\n    async onSubmit() {\n      this.submitted = true\n      this.validate()\n      if (!this.valid) return\n      const body = new FormData\n      body.append('name', this.role.name)\n      body.append('individual', this.role.individual)\n      this.privs.forEach(g => {\n        if (g.member) body.append(`member:${g.id}`, true)\n        if (g.roster) body.append(`roster:${g.id}`, true)\n        if (g.contact) body.append(`contact:${g.id}`, true)\n        if (g.admin) body.append(`admin:${g.id}`, true)\n        if (g.events) body.append(`events:${g.id}`, true)\n        if (g.texts) body.append(`texts:${g.id}`, true)\n        if (g.emails) body.append(`emails:${g.id}`, true)\n        if (g.bcc) body.append(`bcc:${g.id}`, true)\n      })\n      const resp = (await this.$axios.post(`/api/roles/${this.$route.params.rid}`, body)).data\n      if (resp && resp.duplicateName)\n        this.duplicateName = this.role.name\n      else\n        this.$router.push('/admin/roles')\n    },\n    validate() {\n      if (!this.submitted) return\n      if (!this.role.name)\n        this.nameError = 'The role name is required.'\n      else if (this.duplicateName && this.duplicateName === this.role.name)\n        this.nameError = 'Another role has this name.'\n      else\n        this.nameError = null\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n#role-edit\n  padding 1.5rem 0.75rem\n.role-edit-label\n  width 7rem\n#role-edit-name, #role-edit-flags\n  min-width 14rem\n  max-width 20rem\n#role-edit-privs\n  display grid\n  grid auto / 1fr\n  @media (min-width: 450px)\n    justify-content start\n    grid auto / auto min-content\n.role-edit-heading\n  display none\n  @media (min-width: 450px)\n    display block\n    font-weight bold\n.role-edit-group\n  overflow hidden\n  margin-top 0.75rem\n  min-width 0\n  text-overflow ellipsis\n  white-space nowrap\n  @media (min-width: 450px)\n    align-self center\n    margin-top 0\n    margin-right 0.75rem\n#role-edit-priv-key-body\n  line-height 1.2\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleEdit.vue?vue&type=template&id=513a2d6c&lang=pug&\"\nimport script from \"./RoleEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoleEdit.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}