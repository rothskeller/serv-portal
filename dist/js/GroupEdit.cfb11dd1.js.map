{"version":3,"sources":["webpack:///./client/base/Privileges.vue?8849","webpack:///client/base/Privileges.vue","webpack:///./client/base/Privileges.vue?5589","webpack:///./client/base/Privileges.vue","webpack:///./client/pages/groups/GroupEdit.vue?6096","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./client/base/Privileges.vue?6f3e","webpack:///./client/pages/groups/GroupEdit.vue?ee12","webpack:///client/pages/groups/GroupEdit.vue","webpack:///./client/pages/groups/GroupEdit.vue?4ed3","webpack:///./client/pages/groups/GroupEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","privs","member","on","toggleMember","_v","roster","toggleRoster","contact","toggleContact","admin","toggleAdmin","events","toggleEvents","texts","toggleTexts","staticRenderFns","props","Object","model","prop","event","methods","$emit","np","component","module","exports","group","$event","preventDefault","onSubmit","nameError","value","callback","$$v","$set","expression","emailError","directives","name","rawName","modifiers","_l","r","i","domProps","_s","valid","newg","onCancel","onDelete","_e","components","onLoadGroup","Function","data","computed","watch","validate","submitted","email"],"mappings":"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","file":"js/GroupEdit.cfb11dd1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"privileges\"},[_c('b-btn',{staticClass:\"mr-2\",attrs:{\"variant\":_vm.privs.member ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleMember}},[_vm._v(\"M\")]),_c('b-btn-group',{attrs:{\"size\":\"sm\"}},[_c('b-btn',{attrs:{\"variant\":_vm.privs.roster ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleRoster}},[_vm._v(\"R\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.contact ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleContact}},[_vm._v(\"C\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.admin ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleAdmin}},[_vm._v(\"A\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.events ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleEvents}},[_vm._v(\"E\")]),_c('b-btn',{attrs:{\"variant\":_vm.privs.texts ? 'primary' : 'outline-primary',\"size\":\"sm\"},on:{\"click\":_vm.toggleTexts}},[_vm._v(\"T\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nPrivileges displays the privilege choices for a role acting on a group.\n-->\n\n<template lang=\"pug\">\n.privileges\n  b-btn.mr-2(\n    :variant=\"privs.member ? 'primary' : 'outline-primary'\"\n    size=\"sm\"\n    @click=\"toggleMember\"\n  ) M\n  b-btn-group(size=\"sm\")\n    b-btn(\n      :variant=\"privs.roster ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleRoster\"\n    ) R\n    b-btn(\n      :variant=\"privs.contact ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleContact\"\n    ) C\n    b-btn(\n      :variant=\"privs.admin ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleAdmin\"\n    ) A\n    b-btn(\n      :variant=\"privs.events ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleEvents\"\n    ) E\n    b-btn(\n      :variant=\"privs.texts ? 'primary' : 'outline-primary'\"\n      size=\"sm\"\n      @click=\"toggleTexts\"\n    ) T\n</template>\n\n<script>\nexport default {\n  props: {\n    privs: Object,\n  },\n  model: {\n    prop: 'privs',\n    event: 'change',\n  },\n  methods: {\n    toggleMember() {\n      this.$emit('change', { ...this.privs, member: !this.privs.member })\n    },\n    toggleRoster() {\n      const np = { ...this.privs, roster: !this.privs.roster }\n      if (!np.roster)\n        np.contact = np.admin = np.events = np.texts = false\n      this.$emit('change', np)\n    },\n    toggleContact() {\n      const np = { ...this.privs, contact: !this.privs.contact }\n      if (np.contact)\n        np.roster = true\n      else\n        np.texts = false\n      this.$emit('change', np)\n    },\n    toggleAdmin() {\n      const np = { ...this.privs, admin: !this.privs.admin }\n      if (np.admin)\n        np.roster = true\n      this.$emit('change', np)\n    },\n    toggleEvents() {\n      const np = { ...this.privs, events: !this.privs.events }\n      if (np.events)\n        np.roster = true\n      this.$emit('change', np)\n    },\n    toggleTexts() {\n      const np = { ...this.privs, texts: !this.privs.texts }\n      if (np.texts)\n        np.roster = np.contact = true\n      this.$emit('change', np)\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n.privileges\n  margin 0.125rem 0\n  white-space nowrap\n  .btn-outline-primary:hover\n    background-color #fff\n    color #007bff\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Privileges.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Privileges.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Privileges.vue?vue&type=template&id=d52ade4a&lang=pug&\"\nimport script from \"./Privileges.vue?vue&type=script&lang=js&\"\nexport * from \"./Privileges.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Privileges.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupEdit.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupEdit.vue?vue&type=style&index=0&lang=stylus&\"","module.exports = require(\"regenerator-runtime\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Privileges.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Privileges.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.group)?_c('div',{staticClass:\"mt-3 ml-2\"},[_c('b-spinner',{attrs:{\"small\":\"\"}})],1):_c('form',{attrs:{\"id\":\"group-edit\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('b-form-group',{attrs:{\"label\":\"Group name\",\"label-for\":\"group-name\",\"label-cols-sm\":\"auto\",\"label-class\":\"group-edit-label\",\"state\":_vm.nameError ? false : null,\"invalid-feedback\":_vm.nameError}},[_c('b-input',{attrs:{\"id\":\"group-edit-name\",\"autofocus\":\"\",\"state\":_vm.nameError ? false : null,\"trim\":\"\"},model:{value:(_vm.group.name),callback:function ($$v) {_vm.$set(_vm.group, \"name\", $$v)},expression:\"group.name\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Group email\",\"label-for\":\"group-email\",\"label-cols-sm\":\"auto\",\"label-class\":\"group-edit-label\",\"state\":_vm.emailError ? false : null,\"invalid-feedback\":_vm.emailError}},[_c('b-input',{attrs:{\"id\":\"group-edit-email\",\"state\":_vm.emailError ? false : null,\"trim\":\"\"},model:{value:(_vm.group.email),callback:function ($$v) {_vm.$set(_vm.group, \"email\", $$v)},expression:\"group.email\"}}),_c('b-form-text',[_vm._v(\"@sunnyvaleserv.org\")])],1),_c('b-form-group',{attrs:{\"label\":\"Flags\",\"label-cols-sm\":\"auto\",\"label-class\":\"group-edit-label pt-0\"}},[_c('div',{attrs:{\"id\":\"group-edit-flags\"}},[_c('b-checkbox',{model:{value:(_vm.group.allowTextMessages),callback:function ($$v) {_vm.$set(_vm.group, \"allowTextMessages\", $$v)},expression:\"group.allowTextMessages\"}},[_vm._v(\"Can send text messages to group\")])],1)]),_c('div',{attrs:{\"id\":\"group-edit-privs\"}},[_c('div',{staticClass:\"group-edit-role group-edit-heading\"},[_vm._v(\"Role\")]),_c('div',{staticClass:\"group-edit-privs group-edit-heading\"},[_vm._v(\"Privileges (\"),_c('b-link',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.group-edit-priv-key\",modifiers:{\"group-edit-priv-key\":true}}],attrs:{\"href\":\"#\"}},[_vm._v(\"Key\")]),_vm._v(\")\"),_c('b-modal',{attrs:{\"id\":\"group-edit-priv-key\",\"title\":\"Privileges Key\",\"ok-only\":\"\"}},[_c('div',{attrs:{\"id\":\"group-edit-priv-key-body\"}},[_c('div',{staticClass:\"mb-2\"},[_vm._v(\"M = Role conveys membership in group\")]),_c('div',[_vm._v(\"R = Role allows viewing group roster\")]),_c('div',[_vm._v(\"C = Role allows viewing contact info of group members\")]),_c('div',[_vm._v(\"A = Role allows administration of group (adding/removing members)\")]),_c('div',[_vm._v(\"E = Role allows management of events for group\")]),_c('div',[_vm._v(\"T = Role allows sending text messages to group\")])])])],1),_vm._l((_vm.privs),function(r,i){return [_c('div',{staticClass:\"group-edit-role\",domProps:{\"textContent\":_vm._s(r.name)}}),_c('Privileges',{staticClass:\"group-edit-privs\",model:{value:(_vm.privs[i]),callback:function ($$v) {_vm.$set(_vm.privs, i, $$v)},expression:\"privs[i]\"}})]})],2),_c('div',{staticClass:\"mt-3\"},[_c('b-btn',{attrs:{\"type\":\"submit\",\"variant\":\"primary\",\"disabled\":!_vm.valid},domProps:{\"textContent\":_vm._s(_vm.newg ? 'Create Group' : 'Save Group')}}),_c('b-btn',{staticClass:\"ml-2\",on:{\"click\":_vm.onCancel}},[_vm._v(\"Cancel\")]),(_vm.canDelete)?_c('b-btn',{staticClass:\"ml-5\",attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.onDelete}},[_vm._v(\"Delete Group\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nGroupEdit displays the group viewing/editing page.\n-->\n\n<template lang=\"pug\">\ndiv.mt-3.ml-2(v-if=\"!group\")\n  b-spinner(small)\nform#group-edit(v-else @submit.prevent=\"onSubmit\")\n  b-form-group(label=\"Group name\" label-for=\"group-name\" label-cols-sm=\"auto\" label-class=\"group-edit-label\" :state=\"nameError ? false : null\" :invalid-feedback=\"nameError\")\n    b-input#group-edit-name(autofocus :state=\"nameError ? false : null\" trim v-model=\"group.name\")\n  b-form-group(label=\"Group email\" label-for=\"group-email\" label-cols-sm=\"auto\" label-class=\"group-edit-label\" :state=\"emailError ? false : null\" :invalid-feedback=\"emailError\")\n    b-input#group-edit-email(:state=\"emailError ? false : null\" trim v-model=\"group.email\")\n    b-form-text @sunnyvaleserv.org\n  b-form-group(label=\"Flags\" label-cols-sm=\"auto\" label-class=\"group-edit-label pt-0\")\n    #group-edit-flags\n      b-checkbox(v-model=\"group.allowTextMessages\") Can send text messages to group\n  #group-edit-privs\n    .group-edit-role.group-edit-heading Role\n    .group-edit-privs.group-edit-heading\n      | Privileges (\n      b-link(href=\"#\" v-b-modal.group-edit-priv-key) Key\n      | )\n      b-modal#group-edit-priv-key(title=\"Privileges Key\" ok-only)\n        #group-edit-priv-key-body\n          div.mb-2 M = Role conveys membership in group\n          div R = Role allows viewing group roster\n          div C = Role allows viewing contact info of group members\n          div A = Role allows administration of group (adding/removing members)\n          div E = Role allows management of events for group\n          div T = Role allows sending text messages to group\n    template(v-for=\"(r, i) in privs\")\n      .group-edit-role(v-text=\"r.name\")\n      Privileges.group-edit-privs(v-model=\"privs[i]\")\n  div.mt-3\n    b-btn(type=\"submit\" variant=\"primary\" :disabled=\"!valid\" v-text=\"newg ? 'Create Group' : 'Save Group'\")\n    b-btn.ml-2(@click=\"onCancel\") Cancel\n    b-btn.ml-5(v-if=\"canDelete\" variant=\"danger\" @click=\"onDelete\") Delete Group\n</template>\n\n<script>\nimport Privileges from '@/base/Privileges'\n\nexport default {\n  components: { Privileges },\n  props: {\n    onLoadGroup: Function,\n  },\n  data: () => ({\n    group: null,\n    privs: null,\n    canDelete: false,\n    submitted: false,\n    nameError: null,\n    duplicateName: null,\n    emailError: null,\n    duplicateEmail: null,\n  }),\n  computed: {\n    newg() { return this.$route.params.id === 'NEW' },\n    valid() { return !this.nameError },\n  },\n  watch: {\n    'group.name': 'validate',\n    'group.email': 'validate',\n  },\n  async created() {\n    const data = (await this.$axios.get(`/api/groups/${this.$route.params.id}`)).data\n    this.group = data.group\n    this.privs = data.privs\n    this.canDelete = data.canDelete\n    this.onLoadGroup(this.group)\n  },\n  methods: {\n    onCancel() { this.$router.go(-1) },\n    async onDelete() {\n      const resp = await this.$bvModal.msgBoxConfirm(\n        'Are you sure you want to delete this group?  All associated data, including privileges and memberships, will be permanently lost.', {\n        title: 'Delete Group', headerBgVariant: 'danger', headerTextVariant: 'white',\n        okTitle: 'Delete', okVariant: 'danger', cancelTitle: 'Keep',\n      }).catch(err => { })\n      if (!resp) return\n      const body = new FormData\n      body.append('delete', 'true')\n      await this.$axios.post(`/api/groups/${this.$route.params.id}`, body)\n      this.$router.push('/groups')\n    },\n    async onSubmit() {\n      this.submitted = true\n      this.validate()\n      if (!this.valid) return\n      const body = new FormData\n      body.append('name', this.group.name)\n      body.append('email', this.group.email)\n      body.append('allowTextMessages', this.group.allowTextMessages)\n      this.privs.forEach(r => {\n        if (r.member) body.append(`member:${r.id}`, true)\n        if (r.roster) body.append(`roster:${r.id}`, true)\n        if (r.contact) body.append(`contact:${r.id}`, true)\n        if (r.admin) body.append(`admin:${r.id}`, true)\n        if (r.events) body.append(`events:${r.id}`, true)\n        if (r.texts) body.append(`texts:${r.id}`, true)\n      })\n      const resp = (await this.$axios.post(`/api/groups/${this.$route.params.id}`, body)).data\n      if (resp) {\n        if (resp.duplicateName) this.duplicateName = this.group.name\n        if (resp.duplicateEmail) this.duplicateEmail = this.group.email\n      } else {\n        this.$router.push('/groups')\n      }\n    },\n    validate() {\n      if (!this.submitted) return\n      if (!this.group.name)\n        this.nameError = 'The group name is required.'\n      else if (this.duplicateName && this.duplicateName === this.group.name)\n        this.nameError = 'Another group has this name.'\n      else\n        this.nameError = null\n      if (!this.group.email)\n        this.emailError = null\n      else if (!this.group.email.match(/^[a-zA-Z][-a-zA-Z0-9]*$/))\n        this.emailError = 'This is not a valid email list name.  Letters, digits, and hyphens only.'\n      else if (this.duplicateEmail && this.duplicateEmail === this.group.email)\n        this.emailError = 'Another group has this email list name.'\n      else\n        this.emailError = null\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n#group-edit\n  padding 1.5rem 0.75rem\n.group-edit-label\n  width 7rem\n#group-edit-name, #group-edit-email, #group-edit-flags\n  min-width 14rem\n  max-width 20rem\n#group-edit-privs\n  display grid\n  grid auto / 1fr\n  @media (min-width: 450px)\n    justify-content start\n    grid auto / auto min-content\n.group-edit-heading\n  display none\n  @media (min-width: 450px)\n    display block\n    font-weight bold\n.group-edit-group\n  overflow hidden\n  margin-top 0.75rem\n  min-width 0\n  text-overflow ellipsis\n  white-space nowrap\n  @media (min-width: 450px)\n    align-self center\n    margin-top 0\n    margin-right 0.75rem\n#group-edit-priv-key-body\n  line-height 1.2\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GroupEdit.vue?vue&type=template&id=3a1641c5&lang=pug&\"\nimport script from \"./GroupEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./GroupEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GroupEdit.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}