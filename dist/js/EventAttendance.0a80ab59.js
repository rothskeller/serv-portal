(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["EventAttendance"],{"0bbf":function(t,e,n){"use strict";var s=n("8eaa"),a=n.n(s);a.a},"3fef":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.event?n("form",{attrs:{id:"event-attendance"},on:{submit:function(e){return e.preventDefault(),t.onSave(e)}}},[n("b-form",{attrs:{id:"event-attend-settings",inline:""}},[n("label",{staticClass:"mr-2",attrs:{for:"event-attend-type"}},[t._v("Set attendance for:")]),n("b-form-select",{staticClass:"mr-4",attrs:{id:"event-attend-type"},model:{value:t.setType,callback:function(e){t.setType=e},expression:"setType"}},[n("option",{attrs:{value:"Volunteer"}},[t._v("Volunteer")]),n("option",{attrs:{value:"Student"}},[t._v("Student")]),n("option",{attrs:{value:"Audit"}},[t._v("Auditor")])]),n("label",{staticClass:"mr-2",attrs:{for:"event-attend-hours"}},[t._v("Hours:")]),n("b-form-input",{attrs:{id:"event-attend-hours",type:"number",min:"0",max:"24",step:"0.5"},model:{value:t.setHours,callback:function(e){t.setHours=e},expression:"setHours"}})],1),n("div",{attrs:{id:"event-attend-group"}},t._l(t.people,(function(e){return n("EventAttendancePerson",{key:e.id,attrs:{person:e},on:{toggle:t.onTogglePerson}})})),1),n("div",{attrs:{id:"event-attend-submit"}},[n("b-btn",{attrs:{type:"submit",variant:"primary"}},[t._v("Save Attendance")]),n("b-btn",{staticClass:"ml-2",on:{click:t.onCancel}},[t._v("Cancel")])],1)],1):n("div",{staticClass:"mt-3 ml-2"},[n("b-spinner",{attrs:{small:""}})],1)},a=[],r=n("a34a"),o=n.n(r),i=n("b231"),u=n.n(i),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"event-attend-person",on:{click:function(e){return t.$emit("toggle",t.person)}}},[n("span",{class:t.classes,domProps:{textContent:t._s(t.label)}}),n("span",{domProps:{textContent:t._s(t.person.sortName)}})])},p=[],d={props:{person:Object},computed:{classes:function(){return this.person.attended?"event-attend-person-"+this.person.attended.type.toLowerCase():"event-attend-person-absent"},label:function(){if(!this.person.attended)return"";if(!this.person.attended.minutes)return this.person.attended.type.substr(0,1);var t=Math.floor(this.person.attended.minutes/60);return this.person.attended.minutes%60!==0&&(t+="Â½"),t}}},l=d,v=(n("0bbf"),n("2877")),f=Object(v["a"])(l,c,p,!1,null,null,null),h=f.exports;function m(t,e,n,s,a,r,o){try{var i=t[r](o),u=i.value}catch(c){return void n(c)}i.done?e(u):Promise.resolve(u).then(s,a)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(s,a){var r=t.apply(e,n);function o(t){m(r,s,a,o,i,"next",t)}function i(t){m(r,s,a,o,i,"throw",t)}o(void 0)}))}}var y={components:{EventAttendancePerson:h},props:{onLoadEvent:Function},data:function(){return{event:null,people:null,setType:"Volunteer",setHours:1}},created:function(){var t=b(o.a.mark((function t(){var e;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/events/".concat(this.$route.params.id,"?attendance=1"));case 2:e=t.sent.data,this.event=e.event,this.people=e.people,this.setHours=u()(this.event.end,"HH:mm").diff(u()(this.event.start,"HH:mm"),"hours",!0),this.onLoadEvent(this.event);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{onCancel:function(){this.$router.go(-1)},onSave:function(){var t=b(o.a.mark((function t(){var e;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new FormData,this.people.forEach((function(t){t.attended&&(e.append("person",t.id),e.append("type",t.attended.type),e.append("minutes",t.attended.minutes))})),t.next=4,this.$axios.post("/api/events/".concat(this.$route.params.id,"/attendance"),e);case 4:this.$router.push("/events/".concat(this.$route.params.id));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onTogglePerson:function(t){t.attended&&t.attended.type===this.setType?t.attended=!1:t.attended={type:this.setType,minutes:60*this.setHours}}}},w=y,x=(n("55ad"),Object(v["a"])(w,s,a,!1,null,null,null));e["default"]=x.exports},"55ad":function(t,e,n){"use strict";var s=n("939a"),a=n.n(s);a.a},"8eaa":function(t,e,n){},"939a":function(t,e,n){}}]);
//# sourceMappingURL=EventAttendance.0a80ab59.js.map