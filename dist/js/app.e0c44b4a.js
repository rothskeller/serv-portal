(function(e){function t(t){for(var a,r,i=t[0],l=t[1],d=t[2],u=0,c=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&c.push(s[r][0]),s[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);p&&p(t);while(c.length)c.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==s[i]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={app:0},s={app:0},o=[];function i(e){return l.p+"js/"+({maps:"maps",zxcvbn:"zxcvbn"}[e]||e)+"."+{maps:"9c5e350a",zxcvbn:"c92ae1ab"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={maps:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({maps:"maps",zxcvbn:"zxcvbn"}[e]||e)+"."+{maps:"78c6a56d",zxcvbn:"31d6cfe0"}[e]+".css",s=l.p+a,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var d=o[i],u=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===a||u===s))return t()}var c=document.getElementsByTagName("style");for(i=0;i<c.length;i++){d=c[i],u=d.getAttribute("data-href");if(u===a||u===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],p.parentNode.removeChild(p),n(o)},p.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){r[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=o);var d,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=i(e);var c=new Error;d=function(t){u.onerror=u.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",c.name="ChunkLoadError",c.type=a,c.request=r,n[1](c)}s[e]=void 0}};var p=setTimeout((function(){d({type:"timeout",target:u})}),12e4);u.onerror=u.onload=d,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=t,d=d.slice();for(var c=0;c<d.length;c++)t(d[c]);var p=u;o.push(["2034","chunk-vendors"]),n()})({"0221":function(e,t,n){"use strict";var a=n("0ab5"),r=n.n(a);r.a},"047c":function(e,t,n){"use strict";var a=n("5997"),r=n.n(a);r.a},"051f":function(e,t,n){},"09a2":function(e,t,n){},"0ab5":function(e,t,n){},"0bbf":function(e,t,n){"use strict";var a=n("8eaa"),r=n.n(a);r.a},"0e8e":function(e,t,n){"use strict";var a=n("dd82"),r=n.n(a);r.a},1708:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"Reports",menuItem:"reports"}},[e.loading?n("div",{staticClass:"mt-3"},[n("b-spinner",{attrs:{small:""}})],1):[n("CERTAttendanceForm",e._b({},"CERTAttendanceForm",e.certAtt,!1))]],2)},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={data:function(){return{loading:!1,certAtt:null}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/reports");case 3:t=e.sent.data,this.certAtt=t.certAttendance,this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},u=d,c=(n("1ab2"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},1838:function(e,t,n){},"1ab2":function(e,t,n){"use strict";var a=n("1ab9"),r=n.n(a);r.a},"1ab9":function(e,t,n){},"1d33":function(e,t,n){},2034:function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf"),n("bba4"),n("8103"),n("0cdd");var a=n("2b0e"),r=n("755e"),s=(n("ab8b"),n("2dd8"),n("1947")),o=n("205f"),i=n("c3e6"),l=n("11de"),d=n("8226"),u=n("4797"),c=n("2924"),p=n("8361"),h=n("ea4c"),v=n("950f"),m=n("aa59"),f=n("59fb"),b=n("4711"),w=n("49f5"),g=n("cf07"),E=n("01e3"),y=n("6190"),x=n("f902");a["a"].component("b-btn",s["a"]),a["a"].component("b-button",s["a"]),a["a"].component("b-card",o["a"]),a["a"].component("b-checkbox",i["a"]),a["a"].component("b-form",l["a"]),a["a"].component("b-form-checkbox",i["a"]),a["a"].component("b-form-group",d["a"]),a["a"].component("b-form-input",u["a"]),a["a"].component("b-form-radio-group",c["a"]),a["a"].component("b-form-select",p["a"]),a["a"].component("b-form-select-option",h["a"]),a["a"].component("b-form-text",v["a"]),a["a"].component("b-input",u["a"]),a["a"].component("b-link",m["a"]),a["a"].component("b-nav",f["a"]),a["a"].component("b-nav-item",b["a"]),a["a"].component("b-progress",w["a"]),a["a"].component("b-progress-bar",g["a"]),a["a"].component("b-select-option",h["a"]),a["a"].component("b-select",p["a"]),a["a"].component("b-spinner",E["a"]),a["a"].component("b-tab",y["a"]),a["a"].component("b-tabs",x["a"]);var _=n("bc3a"),k=n.n(_),P=n("8c4f"),C=n("2f62");a["a"].use(C["a"]);var A=new C["a"].Store({state:{me:null,started:!1,eventsYear:null,touch:!1},mutations:{login:function(e,t){e.me=t,e.started=!0},eventsYear:function(e,t){e.eventsYear=t},setTouch:function(e,t){e.touch=t}},actions:{}});try{var $=window.matchMedia("(pointer:coarse),(hover:none),(-moz-touch-enabled:1)");A.commit("setTouch",$.matches),$.addListener((function(e){A.commit("setTouch",e.matches)}))}catch(q){console.error("Touch detection:",q)}var S=A,N=n("5424"),T=n("acb6"),R=n("658a"),D=n("a7fb"),H=n("5720"),L=n("a42c"),O=n("66e0"),M=n("5422"),j=n("7171"),B=n("1708"),F=n("69a2"),I=n("2673");a["a"].use(P["a"]);var Y=new P["a"]({mode:"history",base:"/",routes:[{path:"/",redirect:"/events"},{path:"/events",component:R["default"]},{path:"/events/:id",component:T["default"]},{path:"/login",component:D["default"],meta:{publicAccess:!0,allow401:!0}},{path:"/logout",component:H["default"]},{path:"/password-reset",component:M["default"],meta:{publicAccess:!0}},{path:"/password-reset/:token",component:j["default"],meta:{publicAccess:!0}},{path:"/people",component:L["default"]},{path:"/people/:id",component:O["default"]},{path:"/reports",component:B["default"]},{path:"/reports/cert-attendance",component:N["default"],props:function(e){return e.query}},{path:"/roles",component:I["default"]},{path:"/roles/:id",component:F["default"]}]});Y.beforeEach((function(e,t,n){S.state.me||e.matched.some((function(e){return e.meta.publicAccess}))?n():n({path:"/login",query:{redirect:e.fullPath}})}));var U=Y,z={xsrfCookieName:"auth"},V=k.a.create(z);V.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401===e.response.status&&U&&U.currentRoute&&!U.currentRoute.matched.some((function(e){return e.meta.allow401}))&&S.state.started&&(S.commit("login",null),console.log(e.response&&e.response.status,U&&U.currentRoute,e.request),U.replace({path:"/login",query:{redirect:U.currentRoute.fullPath}})),Promise.reject(e)})),Plugin.install=function(e,t){e.axios=V,window.axios=V,Object.defineProperties(e.prototype,{axios:{get:function(){return V}},$axios:{get:function(){return V}}})},a["a"].use(Plugin);Plugin;a["a"].config.productionTip=!1,a["a"].use(r,{load:{key:"AIzaSyDYiDjdYhCKZnM4qbK68KZRjKZqJiQ1dZw"}});var W=n("479c");W.keys().forEach((function(e){var t=W(e),n=e.split("/").pop().replace(/\.vue$/,"");a["a"].component(n,t.default||t)})),a["a"].axios.get("/api/login").then((function(e){S.commit("login",e.data)})).catch((function(){S.commit("login",null)})).finally((function(){new a["a"]({store:S,router:U,render:function(e){return e("Main")}}).$mount("#app")}))},"22c3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"event-view"}},[n("div",{attrs:{id:"event-view-name"},domProps:{textContent:e._s(e.event.name)}}),e.types?n("div",{attrs:{id:"event-view-types"},domProps:{textContent:e._s(e.types)}}):e._e(),n("div",{attrs:{id:"event-view-date-time"},domProps:{textContent:e._s(e.dateTimeFmt)}}),n("div",{attrs:{id:"event-view-venue"}},[n("div",{attrs:{id:"event-view-venue-name"},domProps:{textContent:e._s(e.event.venue?e.event.venue.name:"Location TBD")}}),e.event.venue?n("div",{attrs:{id:"event-view-venue-address"}},[n("span",{domProps:{textContent:e._s(e.event.venue.address)}}),e.event.venue.city?n("span",{domProps:{textContent:e._s(", "+e.event.venue.city)}}):e._e(),e.event.venue.url?n("span",{attrs:{id:"event-view-venue-map"}},[e._v(" ("),n("a",{attrs:{target:"_blank",href:e.event.venue.url}},[e._v("map")]),e._v(")")]):e._e()]):e._e()]),e.event.details?n("div",{attrs:{id:"event-view-details"},domProps:{innerHTML:e._s(e.event.details)}}):e._e()])},r=[],s=n("b231"),o=n.n(s),i={props:{event:Object},computed:{dateTimeFmt:function(){var e=o()(this.event.date,"YYYY-MM-DD"),t=o()(this.event.start,"HH:mm"),n=o()(this.event.end,"HH:mm");return t.format("a")!==n.format("a")?"".concat(e.format("dddd, MMMM D, YYYY"),"\n").concat(t.format("h:mma")," to ").concat(n.format("h:mma")):"".concat(e.format("dddd, MMMM D, YYYY"),"\n").concat(t.format("h:mm")," to ").concat(n.format("h:mma"))},types:function(){return this.event.types.length?this.event.types.join(", "):null}}},l=i,d=(n("047c"),n("2877")),u=Object(d["a"])(l,a,r,!1,null,null,null);t["default"]=u.exports},2581:function(e,t,n){"use strict";var a=n("b1da"),r=n.n(a);r.a},2673:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"Roles",subtitle:"Roles",menuItem:"roles"}},[e.loading?n("div",{staticClass:"mt-3"},[n("b-spinner",{attrs:{small:""}})],1):n("table",{attrs:{id:"roles-table"}},[n("tr",[n("th",[e._v("Role")])]),e._l(e.roles,(function(t){return n("tr",{key:t.id},[n("td",[n("b-link",{attrs:{to:"/roles/"+t.id},domProps:{textContent:e._s(t.name)}})],1)])}))],2),n("div",{staticClass:"mt-3"},[n("b-btn",{attrs:{to:"/roles/NEW"}},[e._v("Add Role")])],1)])},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={data:function(){return{loading:!1,roles:null}},created:function(){var e=l(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/roles");case 3:this.roles=e.sent.data,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},u=d,c=(n("2833"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},2833:function(e,t,n){"use strict";var a=n("6cec"),r=n.n(a);r.a},"2ea7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"people-list"}},[n("div",{attrs:{id:"people-title"}},[e._v("People"),e.groups&&e.groups.length>1?n("select",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"group"}],attrs:{id:"people-group"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.group=t.target.multiple?n:n[0]}}},e._l(e.groups,(function(t){return n("option",{key:t.id,domProps:{value:t.id,textContent:e._s(t.name)}})})),0):e._e()]),e.loading?n("div",{staticClass:"mt-3"},[n("b-spinner",{attrs:{small:""}})],1):n("div",{attrs:{id:"people-table"}},[n("div",{staticClass:"people-person people-heading"},[e._v("Person")]),n("div",{staticClass:"people-contact people-heading"},[e._v("Contact Info")]),n("div",{staticClass:"people-roles people-heading"},[e._v("Roles")]),e._l(e.people,(function(t){return[n("div",{staticClass:"people-person"},[n("td",[n("router-link",{attrs:{to:"/people/"+t.id},domProps:{textContent:e._s(t.callSign?t.sortName+" ("+t.callSign+")":t.sortName)}})],1)]),n("div",{staticClass:"people-contact"},[e._l(t.emails,(function(t){return n("div",[n("a",{class:t.bad?".people-bad-email":null,attrs:{href:"mailto:"+t.email},domProps:{textContent:e._s(t.email)}}),t.label?n("span",{domProps:{textContent:e._s(" ("+t.label+")")}}):e._e()])})),t.cellPhone?n("div",{staticClass:"people-phone"},[n("a",{attrs:{href:"tel:"+t.cellPhone},domProps:{textContent:e._s(t.cellPhone)}}),e._v("\n(Cell)")]):e._e(),t.homePhone?n("div",{staticClass:"people-phone"},[n("a",{attrs:{href:"tel:"+t.homePhone},domProps:{textContent:e._s(t.homePhone)}}),e._v("\n(Home)")]):e._e(),t.workPhone?n("div",{staticClass:"people-phone"},[n("a",{attrs:{href:"tel:"+t.workPhone},domProps:{textContent:e._s(t.workPhone)}}),e._v("\n(Work)")]):e._e()],2),n("div",{staticClass:"people-roles"},[e._l(t.roles,(function(t,a){return n("div",{key:a,domProps:{textContent:e._s(t)}})})),t.roles.length?e._e():n("div",[e._v("â€”")])],2)]}))],2)])},r=[],s=n("a34a"),o=n.n(s),i=n("a78e"),l=n.n(i);function d(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){d(s,a,r,o,i,"next",e)}function i(e){d(s,a,r,o,i,"throw",e)}o(void 0)}))}}var c={data:function(){return{group:0,groups:null,people:null,canAdd:!1,loading:!1}},created:function(){this.group=l.a.get("serv-people-group")||0,this.load()},watch:{group:function(){l.a.set("serv-people-group",this.group,{expires:3650}),this.load()}},methods:{load:function(){var e=u(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/people",{params:{group:this.group}});case 3:t=e.sent.data,this.people=t.people,this.canAdd=t.canAdd,t.viewableGroups.length>1&&(t.viewableGroups.unshift({id:0,name:"(all)"}),this.groups=t.viewableGroups),this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},p=c,h=(n("df6d"),n("2877")),v=Object(h["a"])(p,a,r,!1,null,null,null);t["default"]=v.exports},"2f0d":function(e,t,n){var a={"./locale":"c020","./locale.js":"c020"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id="2f0d"},"316f":function(e,t,n){},"31d9":function(e,t,n){},"33df":function(e,t,n){},"35be":function(e,t,n){},"35fa":function(e,t,n){},3700:function(e,t,n){"use strict";var a=n("ba12"),r=n.n(a);r.a},"3fef":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{id:"event-attendance"},on:{submit:function(t){return t.preventDefault(),e.onSave(t)}}},[n("b-form",{attrs:{id:"event-attend-settings",inline:""}},[n("label",{staticClass:"mr-2",attrs:{for:"event-attend-type"}},[e._v("Set attendance for:")]),n("b-form-select",{staticClass:"mr-4",attrs:{id:"event-attend-type"},model:{value:e.setType,callback:function(t){e.setType=t},expression:"setType"}},[n("option",{attrs:{value:"Volunteer"}},[e._v("Volunteer")]),n("option",{attrs:{value:"Student"}},[e._v("Student")]),n("option",{attrs:{value:"Audit"}},[e._v("Auditor")])]),n("label",{staticClass:"mr-2",attrs:{for:"event-attend-hours"}},[e._v("Hours:")]),n("b-form-input",{attrs:{id:"event-attend-hours",type:"number",min:"0",max:"24",step:"0.5"},model:{value:e.setHours,callback:function(t){e.setHours=t},expression:"setHours"}})],1),n("div",{attrs:{id:"event-attend-group"}},e._l(e.people,(function(t){return n("EventAttendancePerson",{key:t.id,attrs:{person:t},on:{toggle:e.onTogglePerson}})})),1),n("div",{staticClass:"mt-3"},[n("b-btn",{attrs:{type:"submit",variant:"primary"}},[e._v("Save Attendance")]),n("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")])],1)],1)},r=[],s=n("a34a"),o=n.n(s),i=n("b231"),l=n.n(i);function d(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){d(s,a,r,o,i,"next",e)}function i(e){d(s,a,r,o,i,"throw",e)}o(void 0)}))}}var c={props:{event:null,people:null},data:function(){return{setType:"Volunteer",setHours:1}},mounted:function(){this.setHours=l()(this.event.end,"HH:mm").diff(l()(this.event.start,"HH:mm"),"hours",!0)},methods:{onCancel:function(){this.$router.go(-1)},onSave:function(){var e=u(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,this.people.forEach((function(e){e.attended&&(t.append("person",e.id),t.append("type",e.attended.type),t.append("minutes",e.attended.minutes))})),e.next=4,this.$axios.post("/api/events/".concat(this.$route.params.id,"/attendance"),t);case 4:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onTogglePerson:function(e){e.attended&&e.attended.type===this.setType?e.attended=!1:e.attended={type:this.setType,minutes:60*this.setHours}}}},p=c,h=(n("55ad"),n("2877")),v=Object(h["a"])(p,a,r,!1,null,null,null);t["default"]=v.exports},"40e4":function(e,t,n){"use strict";var a=n("1838"),r=n.n(a);r.a},"457e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},r=[],s=n("2877"),o={},i=Object(s["a"])(o,a,r,!1,null,null,null);t["default"]=i.exports},"45fe":function(e,t,n){},"479c":function(e,t,n){var a={"./Main.vue":"457e","./base/EventTypeDots.vue":"555e","./base/Page.vue":"e2c9","./base/PasswordEntry.vue":"a5a6","./pages/Event.vue":"acb6","./pages/Events.vue":"658a","./pages/Login.vue":"a7fb","./pages/Logout.vue":"5720","./pages/PWReset.vue":"5422","./pages/PWResetToken.vue":"7171","./pages/People.vue":"a42c","./pages/Person.vue":"66e0","./pages/Reports.vue":"1708","./pages/Role.vue":"69a2","./pages/Roles.vue":"2673","./pages/event/EventAttendance.vue":"3fef","./pages/event/EventAttendancePerson.vue":"d390","./pages/event/EventEdit.vue":"e461","./pages/event/EventView.vue":"22c3","./pages/events/EventsCalendar.vue":"aa46","./pages/events/EventsList.vue":"8256","./pages/people/PeopleList.vue":"2ea7","./pages/person/PersonEdit.vue":"f863","./pages/person/PersonEditAddress.vue":"d29c","./pages/person/PersonView.vue":"ce93","./pages/reports/CERTAttendance.vue":"5424","./pages/reports/CERTAttendanceForm.vue":"68b1"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id="479c"},5422:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"SERV Portal"}},[n("div",{attrs:{id:"pwreset-top"}},[n("div",{attrs:{id:"pwreset-banner"}},[e._v("Password Reset")]),e.finished?n("div",{attrs:{id:"pwreset-intro"}},[e._v("We have sent a password reset link to the email address you provided.\nIt is valid for one hour.  Please check you email and follow the link we\nsent to reset your password.")]):[n("div",{attrs:{id:"pwreset-intro"}},[e._v("To reset your password, please enter your email address.  If it's one we\nhave on file, we'll send a password reset link to it.")]),n("form",{attrs:{id:"pwreset-form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-group",{attrs:{label:"Email address","label-for":"pwreset-username","label-cols-sm":"4"}},[n("b-input",{attrs:{id:"pwreset-username",autocorrect:"off",autocapitalize:"none",autofocus:"",required:"",trim:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("div",{attrs:{id:"pwreset-submit-row"}},[n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Reset Password")])],1)],1)]],2)])},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={data:function(){return{username:"",finished:!1}},watch:{email:"validate"},methods:{onSubmit:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.username){e.next=2;break}return e.abrupt("return");case 2:return t=new FormData,t.append("username",this.username),e.next=6,this.$axios.post("/api/password-reset",t);case 6:e.sent.data,this.finished=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},u=d,c=(n("bca1"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,"63c8fbd3",null);t["default"]=p.exports},5424:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"CERT Attendance",subtitle:"CERT Attendance",menuItem:"reports"}},[e.loading?n("div",{staticClass:"mt-3"},[n("b-spinner",{attrs:{small:""}})],1):n("table",{attrs:{id:"cert-att-table"}},[n("thead",e._l(e.header,(function(t,a){return n("tr",{key:a},e._l(t,(function(t,r){return n("td",{key:r,class:e.headerClass(a,r),attrs:{colspan:t.span||1},domProps:{textContent:e._s(e.wrapText(t))}})})),0)})),0),n("tbody",e._l(e.body,(function(t,a){return n("tr",{key:a},e._l(t,(function(t,a){return n("td",{key:a,class:e.spanStarts[a]?"cert-att-span":null,domProps:{textContent:e._s(t)}})})),0)})),0),n("tfoot",e._l(e.footer,(function(t,a){return n("tr",{key:a},e._l(t,(function(t,a){return n("td",{key:a,class:e.spanStarts[a]?"cert-att-span":null,domProps:{textContent:e._s(t)}})})),0)})),0)])])},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={props:{team:String,dateFrom:String,dateTo:String,stats:String,detail:String},data:function(){return{loading:!1,header:null,body:null,footer:null}},computed:{spanStarts:function(){var e={},t=0;return this.header[0].forEach((function(n){n.span&&(e[t]=!0),t+=n.span||1})),e}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/reports/cert-attendance",{params:{team:this.team,dateFrom:this.dateFrom,dateTo:this.dateTo,stats:this.stats,detail:this.detail,format:"JSON"}});case 3:t=e.sent.data,this.header=t.header,this.body=t.body,this.footer=t.footer,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{headerClass:function(e,t){return 0===e&&0!==t||0!==e&&this.spanStarts[t]?"cert-att-span":null},wrapText:function(e){return e.span>1?e.text:e.text.replace("-","\n")}}},u=d,c=(n("e63c"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},5439:function(e,t,n){},"555e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",e._l(e.types,(function(t){return n("span",{staticClass:"dot",class:"dot-"+e.typeToClass(t),attrs:{title:t}})})),0)},r=[],s={props:{types:Array},methods:{typeToClass:function(e){return e.toLowerCase().replace(/ /g,"-")}}},o=s,i=(n("c028"),n("2877")),l=Object(i["a"])(o,a,r,!1,null,null,null);t["default"]=l.exports},"55ad":function(e,t,n){"use strict";var a=n("939a"),r=n.n(a);r.a},5720:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"Logout",subtitle:"Logging out...",menuItem:"logout"}})},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={created:function(){var e=l(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.post("/api/logout");case 2:this.$store.commit("login",null),this.$router.replace("/login");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},u=d,c=n("2877"),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},5997:function(e,t,n){},"5b73":function(e,t,n){"use strict";var a=n("bd43"),r=n.n(a);r.a},"658a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"Events",menuItem:"events",noPadding:""}},[n("b-card",{attrs:{id:"events-card","no-body":""}},[n("b-tabs",{attrs:{card:""},scopedSlots:e._u([e.canAdd?{key:"tabs-end",fn:function(){return[n("b-nav-item",{attrs:{to:"/events/NEW"}},[e._v("Add Event")])]},proxy:!0}:null],null,!0),model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("b-tab",{staticClass:"events-tab-pane",attrs:{title:"Calendar","no-body":""}},[n("EventsCalendar",{on:{canAdd:function(t){e.canAdd=!0}}})],1),n("b-tab",{staticClass:"events-tab-pane",attrs:{title:"List","no-body":""}},[n("EventsList",{on:{canAdd:function(t){e.canAdd=!0}}})],1)],1)],1)],1)},r=[],s=n("a78e"),o=n.n(s),i={data:function(){return{tab:0,canAdd:!1}},mounted:function(){this.tab="1"===o.a.get("serv-events-list")?1:0},watch:{tab:function(){o.a.set("serv-events-list",this.tab,{expires:3650})}}},l=i,d=(n("98b5"),n("2877")),u=Object(d["a"])(l,a,r,!1,null,null,null);t["default"]=u.exports},"66e0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:e.title,menuItem:"people",noPadding:""}},[e.loading?n("div",{staticClass:"mt-3"},[n("b-spinner",{attrs:{small:""}})],1):e.tabs?n("b-card",{attrs:{id:"person-card","no-body":""}},[n("b-tabs",{attrs:{card:""}},[e.newp?e._e():n("b-tab",{staticClass:"person-tab-pane",attrs:{title:"Details","no-body":""}},[n("PersonView",{attrs:{person:e.person}})],1),e.canEdit?n("b-tab",{staticClass:"person-tab-pane",attrs:{title:"Edit","no-body":""}},[n("PersonEdit",{attrs:{person:e.person,allowBadPassword:e.allowBadPassword,canEditDetails:e.canEditDetails,canEditRoles:e.canEditRoles,canEditUsername:e.canEditUsername,passwordHints:e.passwordHints}})],1):e._e()],1)],1):e.canEdit?n("PersonEdit",{attrs:{person:e.person,allowBadPassword:e.allowBadPassword,canEditDetails:e.canEditDetails,canEditRoles:e.canEditRoles,canEditUsername:e.canEditUsername,passwordHints:e.passwordHints}}):n("PersonView",{attrs:{person:e.person}})],1)},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={data:function(){return{loading:!1,title:"Person",canEditDetails:!1,canEditRoles:!1,canEditUsername:!1,allowBadPassword:!1,passwordHints:null,person:null}},computed:{canEdit:function(){return this.canEditDetails||this.canEditRoles},newp:function(){return"NEW"===this.$route.params.id},tabs:function(){return(this.newp?0:1)+(this.canEdit?1:0)>1}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/people/".concat(this.$route.params.id));case 3:t=e.sent.data,this.allowBadPassword=t.allowBadPassword,this.canEditDetails=t.canEditDetails,this.canEditRoles=t.canEditRoles,this.canEditUsername=t.canEditUsername,this.passwordHints=t.passwordHints,this.person=t.person,this.title=t.person.id?t.person.informalName:"New Person",this.loading=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},u=d,c=(n("ac95"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},"68b1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{id:"cert-att-form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("div",{staticClass:"report-title"},[e._v("CERT Attendance Report")]),n("b-form-group",{attrs:{label:"Report on team","label-cols-sm":"auto","label-class":"cert-att-label"}},[n("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:e.teamList},model:{value:e.team,callback:function(t){e.team=t},expression:"team"}})],1),n("b-form-group",{attrs:{label:"Date range","label-cols-sm":"auto","label-class":"cert-att-label",state:!e.dateError&&null,"invalid-feedback":e.dateError}},[n("b-form-input",{attrs:{id:"cert-att-date-from",type:"date",state:!e.dateError&&null},model:{value:e.dateFromI,callback:function(t){e.dateFromI=t},expression:"dateFromI"}}),e._v("\nthrough\n"),n("b-form-input",{attrs:{id:"cert-att-date-to",type:"date",state:!e.dateError&&null},model:{value:e.dateToI,callback:function(t){e.dateToI=t},expression:"dateToI"}})],1),n("b-form-group",{attrs:{label:"Statistics by","label-cols-sm":"auto","label-class":"cert-att-label"}},[n("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:e.statsList},model:{value:e.stats,callback:function(t){e.stats=t},expression:"stats"}})],1),n("b-form-group",{attrs:{label:"Show detail","label-cols-sm":"auto","label-class":"cert-att-label"}},[n("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:e.detailList},model:{value:e.detail,callback:function(t){e.detail=t},expression:"detail"}})],1),n("div",{staticClass:"mt-3"},[n("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!!e.dateError}},[e._v("Generate Report")])],1)],1)},r=[],s=["Alpha","Bravo","Both"],o=[{value:"count",text:"Number of Events"},{value:"hours",text:"Cumulative Hours"}],i=[{value:"date",text:"Show by date"},{value:"month",text:"Show by month"},{value:"total",text:"Show totals only"}],l=/^20\d\d-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])$/,d={props:{dateFrom:String,dateTo:String},data:function(){return{teamList:s,statsList:o,detailList:i,team:"Both",dateFromI:null,dateToI:null,stats:"count",detail:"month",dateError:null}},created:function(){this.dateFromI=this.dateFrom,this.dateToI=this.dateTo},watch:{dateFromI:"checkDates",dateToI:"checkDates"},methods:{checkDates:function(){this.dateFromI&&this.dateToI?this.dateFromI.match(l)&&this.dateToI.match(l)?this.dateFromI>this.dateToI?this.dateError="The starting date must be before the ending date.":this.dateError=null:this.dateError="Valid dates have the form YYYY-MM-DD.":this.dateError="Starting and ending dates are required."},onSubmit:function(){this.dateError||this.$router.push({path:"/reports/cert-attendance",query:{team:this.team,dateFrom:this.dateFromI,dateTo:this.dateToI,stats:this.stats,detail:this.detail}})}}},u=d,c=(n("95cc"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},"699d":function(e,t,n){},"69a2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:e.title,subtitle:e.subtitle,menuItem:"roles"}},[e.loading?n("div",{staticClass:"mt-3"},[n("b-spinner",{attrs:{small:""}})],1):n("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-group",{attrs:{label:"Role name","label-for":"role-name","label-cols-sm":"auto","label-class":"role-label",state:!e.nameError&&null,"invalid-feedback":e.nameError}},[n("b-input",{attrs:{id:"role-name",autofocus:"",state:!e.nameError&&null,trim:""},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),n("b-form-group",{attrs:{label:"Holder label","label-for":"role-holder-label","label-cols-sm":"auto","label-class":"role-label"}},[n("b-input",{attrs:{id:"role-holder-label",trim:""},model:{value:e.role.memberLabel,callback:function(t){e.$set(e.role,"memberLabel",t)},expression:"role.memberLabel"}})],1),n("b-form-group",{attrs:{label:"Attributes","label-cols-sm":"auto","label-class":"role-label pt-0"}},[n("div",[n("b-checkbox",{model:{value:e.role.implyOnly,callback:function(t){e.$set(e.role,"implyOnly",t)},expression:"role.implyOnly"}},[e._v("Role can only be implied, not assigned")]),n("b-checkbox",{model:{value:e.role.individual,callback:function(t){e.$set(e.role,"individual",t)},expression:"role.individual"}},[e._v("Role can only be held by one person")])],1)]),n("b-form-group",{attrs:{label:"This role has the following privileges on other roles:"}},[n("table",{attrs:{id:"role-aprivs"}},[n("tr",[n("th"),n("th",[e._v("Holds")]),n("th",[e._v("View")]),n("th",[e._v("Assign")]),n("th",[e._v("Events")])]),e._l(e.privs,(function(t){return n("tr",{key:t.id},[n("td",{domProps:{textContent:e._s(t.id===e.role.id&&e.newr?"(new role)":t.name)}}),n("td",[n("b-checkbox",{attrs:{checked:t.actor.holdsRole,disabled:!t.actor.holdsRoleEnabled},on:{change:function(n){return e.onChangePriv(t,"actor","holdsRole")}}})],1),n("td",[n("b-checkbox",{attrs:{checked:t.actor.viewHolders,disabled:!t.actor.viewHoldersEnabled},on:{change:function(n){return e.onChangePriv(t,"actor","viewHolders")}}})],1),n("td",[n("b-checkbox",{attrs:{checked:t.actor.assignRole,disabled:!t.actor.assignRoleEnabled},on:{change:function(n){return e.onChangePriv(t,"actor","assignRole")}}})],1),n("td",[n("b-checkbox",{attrs:{checked:t.actor.manageEvents,disabled:!t.actor.manageEventsEnabled},on:{change:function(n){return e.onChangePriv(t,"actor","manageEvents")}}})],1)])}))],2)]),n("b-form-group",{attrs:{label:"These other roles have the following privileges on this role:"}},[n("table",{attrs:{id:"role-tprivs"}},[n("tr",[n("th"),n("th",[e._v("Holds")]),n("th",[e._v("View")]),n("th",[e._v("Assign")]),n("th",[e._v("Events")])]),e._l(e.privs,(function(t){return[t.id!==e.role.id?n("tr",{key:t.id},[n("td",{domProps:{textContent:e._s(t.name)}}),n("td",[n("b-checkbox",{attrs:{checked:t.target.holdsRole,disabled:!t.target.holdsRoleEnabled},on:{change:function(n){return e.onChangePriv(t,"target","holdsRole")}}})],1),n("td",[n("b-checkbox",{attrs:{checked:t.target.viewHolders,disabled:!t.target.viewHoldersEnabled},on:{change:function(n){return e.onChangePriv(t,"target","viewHolders")}}})],1),n("td",[n("b-checkbox",{attrs:{checked:t.target.assignRole,disabled:!t.target.assignRoleEnabled},on:{change:function(n){return e.onChangePriv(t,"target","assignRole")}}})],1),n("td",[n("b-checkbox",{attrs:{checked:t.target.manageEvents,disabled:!t.target.manageEventsEnabled},on:{change:function(n){return e.onChangePriv(t,"target","manageEvents")}}})],1)]):e._e()]}))],2)]),n("div",{staticClass:"mt-3"},[n("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!e.valid},domProps:{textContent:e._s(e.newr?"Create Role":"Save Role")}}),n("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")]),e.role.id?n("b-btn",{staticClass:"ml-5",attrs:{variant:"danger"},on:{click:e.onDelete}},[e._v("Delete Role")]):e._e()],1)],1)])},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={data:function(){return{loading:!1,origName:null,role:null,privs:null,nameError:null,duplicateName:null,submitted:!1,valid:!0}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/roles/".concat(this.$route.params.id));case 3:t=e.sent.data,this.role=t.role,this.privs=t.privs,this.origName=this.role.name,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{newr:function(){return"NEW"===this.$route.params.id},subtitle:function(){return this.newr?"Create Role":"Edit Role"},title:function(){return this.newr?"New Role":this.origName?"Role: ".concat(this.origName):"Edit Role"}},watch:{"role.name":function(e,t){this.role.memberLabel===t&&(this.role.memberLabel=e),this.validate()},"role.servGroup":"validate"},methods:{onCancel:function(){this.$router.go(-1)},onChangePriv:function(){var e=l(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t[n][a]=!t[n][a],r=new FormData,this.privs.forEach((function(e){r.append("a:holdsRole-".concat(e.id),e.actor.holdsRole),r.append("a:viewHolders-".concat(e.id),e.actor.viewHolders),r.append("a:assignRole-".concat(e.id),e.actor.assignRole),r.append("a:manageEvents-".concat(e.id),e.actor.manageEvents),r.append("t:holdsRole-".concat(e.id),e.target.holdsRole),r.append("t:viewHolders-".concat(e.id),e.target.viewHolders),r.append("t:assignRole-".concat(e.id),e.target.assignRole),r.append("t:manageEvents-".concat(e.id),e.target.manageEvents)})),e.next=5,this.$axios.post("/api/roles/".concat(this.$route.params.id,"/reloadPrivs"),r);case 5:this.privs=e.sent.data;case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}(),onDelete:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,t.append("delete","true"),e.next=4,this.$axios.post("/api/roles/".concat(this.$route.params.id),t);case 4:this.$router.push("/roles");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=l(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.validate(),this.valid){e.next=4;break}return e.abrupt("return");case 4:return t=new FormData,t.append("name",this.role.name),t.append("memberLabel",this.role.memberLabel),t.append("implyOnly",this.role.implyOnly),t.append("individual",this.role.individual),this.privs.forEach((function(e){t.append("a:holdsRole-".concat(e.id),e.actor.holdsRole),t.append("a:viewHolders-".concat(e.id),e.actor.viewHolders),t.append("a:assignRole-".concat(e.id),e.actor.assignRole),t.append("a:manageEvents-".concat(e.id),e.actor.manageEvents),t.append("t:holdsRole-".concat(e.id),e.target.holdsRole),t.append("t:viewHolders-".concat(e.id),e.target.viewHolders),t.append("t:assignRole-".concat(e.id),e.target.assignRole),t.append("t:manageEvents-".concat(e.id),e.target.manageEvents)})),e.next=12,this.$axios.post("/api/roles/".concat(this.$route.params.id),t);case 12:n=e.sent.data,n||this.$router.push("/roles"),n.duplicateName&&(this.duplicateName=this.role.name),this.validate();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){this.submitted&&(this.role.name?this.duplicateName===this.role.name?this.nameError="A different team has this name.":this.nameError=null:this.nameError="The role name is required.",this.valid=!this.nameError)}}},u=d,c=(n("cdf6"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},"6cec":function(e,t,n){},"6e07":function(e,t,n){},7089:function(e,t,n){},7171:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"SERV Portal"}},[n("div",{attrs:{id:"pwreset-token-top"}},[n("div",{attrs:{id:"pwreset-token-banner"}},[e._v("Password Reset")]),e.invalid?[n("div",{attrs:{id:"pwreset-token-intro"}},[e._v("This password reset link is invalid or has expired.")]),n("div",{attrs:{id:"pwreset-token-reset"}},[n("a",{staticClass:"btn btn-secondary",attrs:{href:"/login/start-reset"}},[e._v("Try Again")])])]:e.hints?[n("div",{attrs:{id:"pwreset-token-intro"}},[e._v("Please provide a new password.")]),n("form",{attrs:{id:"pwreset-token-form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("PasswordEntry",{attrs:{label:"Password","label-class":"pwreset-token-label",deferValidation:!e.submitted,allowBadPassword:!1,passwordHints:e.hints},on:{change:e.onPasswordChange}}),n("div",{attrs:{id:"pwreset-token-submit-row"}},[n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Reset Password")])],1)],1)]:n("div",{staticClass:"mt-3 text-center"},[n("b-spinner",{attrs:{small:""}})],1)],2)])},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={data:function(){return{hints:null,invalid:!1,password:"",submitted:!1}},created:function(){var e=l(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get("/api/password-reset/".concat(this.$route.params.token));case 3:this.hints=e.sent.data,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.invalid=!0;case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{onPasswordChange:function(e){this.password=e},onSubmit:function(){var e=l(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.password){e.next=3;break}return e.abrupt("return");case 3:return t=new FormData,t.append("password",this.password),e.next=7,this.$axios.post("/api/password-reset/".concat(this.$route.params.token),t);case 7:n=e.sent.data,this.$store.commit("login",n),this.$router.replace("/events");case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},u=d,c=(n("9428"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,"f29c6146",null);t["default"]=p.exports},8256:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"events-list"}},[n("div",{attrs:{id:"events-list-title"}},[e._v("Events in\n"),n("select",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],attrs:{id:"events-list-year"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.year=t.target.multiple?n:n[0]}}},e._l(e.years,(function(t){return n("option",{key:t,domProps:{value:t,textContent:e._s(t)}})})),0)]),e.loading?n("div",{attrs:{id:"events-list-spinner"}},[n("b-spinner",{attrs:{small:""}})],1):n("div",{attrs:{id:"events-list-table"}},[n("div",{staticClass:"events-list-date events-list-heading"},[e._v("Date")]),n("div",{staticClass:"events-list-event events-list-heading"},[e._v("Event")]),n("div",{staticClass:"events-list-location events-list-heading"},[e._v("Location")]),e._l(e.events,(function(t){return[n("div",{staticClass:"events-list-date"},[n("span",{staticClass:"events-list-year",domProps:{textContent:e._s(t.date.substr(0,5))}}),n("span",{domProps:{textContent:e._s(t.date.substr(5))}}),n("span",{staticClass:"events-list-start",domProps:{textContent:e._s(t.start)}})]),n("div",{staticClass:"events-list-event"},[n("EventTypeDots",{staticClass:"mr-1",attrs:{types:t.types}}),n("router-link",{attrs:{to:"/events/"+t.id},domProps:{textContent:e._s(t.name)}})],1),n("div",{staticClass:"events-list-location"},[t.venue&&t.venue.url?n("a",{attrs:{target:"_blank",href:t.venue.url},domProps:{textContent:e._s(t.venue.name)}}):t.venue?n("span",{domProps:{textContent:e._s(t.venue.name)}}):n("span",[e._v("TBD")])])]}))],2)])},r=[],s=n("a34a"),o=n.n(s),i=n("5a3a"),l=n.n(i);function d(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){d(s,a,r,o,i,"next",e)}function i(e){d(s,a,r,o,i,"throw",e)}o(void 0)}))}}var c={data:function(){return{year:null,years:l()(2013,(new Date).getFullYear()+2),events:null,loading:!0}},created:function(){this.year=this.$route.params.year||this.$store.state.eventsYear||(new Date).getFullYear()},watch:{year:function(){this.$store.commit("eventsYear",this.year),this.load()}},methods:{load:function(){var e=u(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/events?year=".concat(this.year));case 3:t=e.sent.data,t.canAdd&&this.$emit("canAdd"),this.events=t.events,this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},p=c,h=(n("5b73"),n("2877")),v=Object(h["a"])(p,a,r,!1,null,null,null);t["default"]=v.exports},"8eaa":function(e,t,n){},"939a":function(e,t,n){},9428:function(e,t,n){"use strict";var a=n("5439"),r=n.n(a);r.a},"95cc":function(e,t,n){"use strict";var a=n("33df"),r=n.n(a);r.a},"98b5":function(e,t,n){"use strict";var a=n("c710"),r=n.n(a);r.a},a42c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"People",menuItem:"people",noPadding:""}},[n("b-card",{attrs:{id:"people-card","no-body":""}},[n("b-tabs",{attrs:{card:""}},[n("b-tab",{staticClass:"people-tab-pane",attrs:{title:"List","no-body":""}},[n("PeopleList")],1),n("b-tab",{staticClass:"person-tab-pane",attrs:{title:"Map","no-body":"",lazy:""}},[n("PeopleMap")],1)],1)],1)],1)},r=[],s=function(){return n.e("maps").then(n.bind(null,"0c87"))},o={components:{PeopleMap:s}},i=o,l=(n("0221"),n("2877")),d=Object(l["a"])(i,a,r,!1,null,null,null);t["default"]=d.exports},a5a6:function(e,t,n){"use strict";n.r(t);var a,r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-group",{attrs:{id:"pwentry-password",label:e.label,"label-cols-sm":"auto","label-class":e.labelClass,state:!e.passwordError&&(!!e.passwordSuccess||null),"invalid-feedback":e.passwordError,"valid-feedback":e.passwordSuccess}},[n("div",[n("b-input",{attrs:{id:"pwentry-password1",type:"password",state:e.passwordState},model:{value:e.password1,callback:function(t){e.password1=t},expression:"password1"}}),n("b-input",{staticClass:"mt-2",attrs:{id:"pwentry-password2",type:"password",state:e.passwordState},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),e.passwordScore>=0?n("b-progress",{attrs:{id:"pwentry-password-score",height:"0.5rem"}},[n("b-progress-bar",{attrs:{value:100,variant:e.passwordVariant}}),n("b-progress-bar",{attrs:{value:e.passwordScore>0?100:0,variant:e.passwordVariant}}),n("b-progress-bar",{attrs:{value:e.passwordScore>1?100:0,variant:e.passwordVariant}}),n("b-progress-bar",{attrs:{value:e.passwordScore>2?100:0,variant:e.passwordVariant}}),n("b-progress-bar",{attrs:{value:e.passwordScore>3?100:0,variant:e.passwordVariant}})],1):e._e()],1)])},s=[],o=n("a34a"),i=n.n(o);function l(e){return c(e)||u(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function p(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){p(s,a,r,o,i,"next",e)}function i(e){p(s,a,r,o,i,"throw",e)}o(void 0)}))}}var v={props:{label:String,labelClass:String,deferValidation:Boolean,allowBadPassword:Boolean,passwordHints:Array},data:function(){return{password1:null,password2:null,passwordError:null,passwordSuccess:null,passwordScore:-1}},created:function(){a=n.e("zxcvbn").then(n.t.bind(null,"580e",7))},computed:{passwordState:function(){return!(this.password1&&this.passwordScore<3&&!this.allowBadPassword)&&null},passwordVariant:function(){return this.passwordScore>=3?"success":2===this.passwordScore?"warning":"danger"}},watch:{password1:"validate",password2:"validate"},methods:{validate:function(){var e=h(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.deferValidation&&!this.password2||this.password1===this.password2){e.next=6;break}this.passwordScore=-1,this.passwordError="These two password entries do not match.",this.passwordSuccess=null,e.next=18;break;case 6:if(!this.password1){e.next=16;break}return e.next=9,a;case 9:e.t0=this.password1,e.t1=this.passwordHints,t=e.sent.default(e.t0,e.t1),this.passwordScore=t.score,t.feedback?(this.passwordError=[t.feedback.warning].concat(l(t.feedback.suggestions),[this.passwordScore<3?"This password would take ".concat(t.crack_times_display.offline_slow_hashing_1e4_per_second," to crack."):null]).filter((function(e){return!!e})).join("\n"),this.passwordSuccess=this.passwordScore>2?"This password would take ".concat(t.crack_times_display.offline_slow_hashing_1e4_per_second," to crack."):null):this.passwordError=this.passwordSuccess=null,e.next=18;break;case 16:this.passwordScore=-1,this.passwordError=this.passwordSuccess=null;case 18:this.password1||this.password2?this.password1!==this.password2?this.$emit("change",null):this.allowBadPassword||this.passwordScore>=3?this.$emit("change",this.password1):this.$emit("change",null):this.$emit("change","");case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},m=v,f=(n("3700"),n("2877")),b=Object(f["a"])(m,r,s,!1,null,null,null);t["default"]=b.exports},a7fb:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:"SERV Portal"}},[n("div",{attrs:{id:"login-top"}},[n("div",{attrs:{id:"login-banner"}},[e._v("Please log in.")]),n("div",{attrs:{id:"login-forserv"}},[e._v("This web site is for SERV volunteers only.\nIf you are interested in joining one of the SERV volunteer organizations,\nplease visit Sunnyvaleâ€™s "),n("a",{attrs:{href:"https://sunnyvale.ca.gov/government/safety/emergency.htm"}},[e._v("emergency responseÂ page")]),e._v(".")]),n("form",{attrs:{id:"login-form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-group",{attrs:{label:"Email address","label-for":"login-email","label-cols-sm":"4"}},[n("b-input",{attrs:{id:"login-email",autocorrect:"off",autocapitalize:"none",autofocus:"",required:"",trim:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("b-form-group",{attrs:{label:"Password","label-for":"login-password","label-cols-sm":"4"}},[n("b-input",{ref:"password",attrs:{id:"login-password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("div",{attrs:{id:"login-submit-row"}},[n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Log in")])],1),e.failed?n("div",{attrs:{id:"login-failed"}},[e._v("Login incorrect. Please try again.")]):e._e()],1),n("div",{attrs:{id:"login-reset"}},[n("b-btn",{attrs:{to:"/password-reset"}},[e._v("Reset my password")])],1)])])},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={data:function(){return{email:"",password:"",failed:!1}},methods:{onSubmit:function(){var e=l(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.email&&this.password){e.next=2;break}return e.abrupt("return");case 2:return t=new FormData,t.append("username",this.email),t.append("password",this.password),e.prev=5,e.next=8,this.$axios.post("/api/login",t);case 8:n=e.sent.data,this.$store.commit("login",n),this.$router.replace(this.$route.query.redirect||"/events"),e.next=19;break;case 13:e.prev=13,e.t0=e["catch"](5),console.error(e.t0),this.failed=!0,this.password="",this.$refs.password.focus();case 19:case"end":return e.stop()}}),e,this,[[5,13]])})));function t(){return e.apply(this,arguments)}return t}()}},u=d,c=(n("c2c2"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,"21afeded",null);t["default"]=p.exports},aa46:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"events-calendar"}},[n("div",{attrs:{id:"events-calendar-grid"}},[n("div",{staticClass:"events-calendar-arrow",on:{click:e.onYearBackward}},[n("svg",{staticClass:"events-calendar-year-arrow",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M34.5 239L228.9 44.7c9.4-9.4 24.6-9.4 33.9 0l22.7 22.7c9.4 9.4 9.4 24.5 0 33.9L131.5 256l154 154.7c9.3 9.4 9.3 24.5 0 33.9l-22.7 22.7c-9.4 9.4-24.6 9.4-33.9 0L34.5 273c-9.3-9.4-9.3-24.6 0-34zm192 34l194.3 194.3c9.4 9.4 24.6 9.4 33.9 0l22.7-22.7c9.4-9.4 9.4-24.5 0-33.9L323.5 256l154-154.7c9.3-9.4 9.3-24.5 0-33.9l-22.7-22.7c-9.4-9.4-24.6-9.4-33.9 0L226.5 239c-9.3 9.4-9.3 24.6 0 34z"}})])]),n("div",{staticClass:"events-calendar-arrow",on:{click:e.onMonthBackward}},[n("svg",{staticClass:"events-calendar-month-arrow",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"}},[n("path",{attrs:{fill:"currentColor",d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}})])]),n("div",{attrs:{id:"events-calendar-month"},domProps:{textContent:e._s(e.month.format("MMMM YYYY"))}}),n("div",{staticClass:"events-calendar-arrow",on:{click:e.onMonthForward}},[n("svg",{staticClass:"events-calendar-month-arrow",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"}},[n("path",{attrs:{fill:"currentColor",d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}})])]),n("div",{staticClass:"events-calendar-arrow",attrs:{id:"events-calendar-arrow-last"},on:{click:e.onYearForward}},[n("svg",{staticClass:"events-calendar-year-arrow",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M477.5 273L283.1 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.7-22.7c-9.4-9.4-9.4-24.5 0-33.9l154-154.7-154-154.7c-9.3-9.4-9.3-24.5 0-33.9l22.7-22.7c9.4-9.4 24.6-9.4 33.9 0L477.5 239c9.3 9.4 9.3 24.6 0 34zm-192-34L91.1 44.7c-9.4-9.4-24.6-9.4-33.9 0L34.5 67.4c-9.4 9.4-9.4 24.5 0 33.9l154 154.7-154 154.7c-9.3 9.4-9.3 24.5 0 33.9l22.7 22.7c9.4 9.4 24.6 9.4 33.9 0L285.5 273c9.3-9.4 9.3-24.6 0-34z"}})])]),e._l(["S","M","T","W","T","F","S"],(function(t){return n("div",{staticClass:"events-calendar-weekday",domProps:{textContent:e._s(t)}})})),e._l(e.dates,(function(t){return n("div",{staticClass:"events-calendar-day",class:t?null:"empty",on:{mouseover:function(n){return e.onHoverDate(t)},mouseout:e.onNoHoverDate,click:function(n){return e.onClickDate(t)}}},[n("div",{domProps:{textContent:e._s(t?t.date():null)}}),n("div",{staticClass:"events-calendar-day-dots"},[n("EventTypeDots",{attrs:{types:e.typesOn(t)}})],1),e._l(e.eventsOn(t),(function(t){return n("div",{key:t.id,staticClass:"events-calendar-day-event"},[n("EventTypeDots",{staticClass:"mr-1",attrs:{types:t.types}}),e.$store.state.touch?n("span",{domProps:{textContent:e._s(t.name)}}):n("b-link",{attrs:{to:"/events/"+t.id,title:t.name},domProps:{textContent:e._s(t.name)}})],1)}))],2)}))],2),e.date?n("div",{attrs:{id:"events-calendar-footer"}},[n("div",{attrs:{id:"events-calendar-date"},domProps:{textContent:e._s(e.date.format("dddd, MMMM D, YYYY"))}}),e._l(e.eventsOn(e.date),(function(t){return n("div",{key:t.id,staticClass:"events-calendar-event"},[n("EventTypeDots",{staticClass:"mr-1",attrs:{types:t.types}}),n("b-link",{attrs:{to:"/events/"+t.id},domProps:{textContent:e._s(t.name)}})],1)})),e.eventsOn(e.date).length?e._e():n("div",{staticClass:"events-calendar-event"},[e._v("No events scheduled.")])],2):e._e()])},r=[],s=n("a34a"),o=n.n(s),i=n("b231"),l=n.n(i);function d(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){d(s,a,r,o,i,"next",e)}function i(e){d(s,a,r,o,i,"throw",e)}o(void 0)}))}}var c={data:function(){return{month:l()(),dates:[],year:null,events:null,date:null,clicked:!1}},mounted:function(){this.newMonth()},methods:{eventsOn:function(e){return e&&this.events[e.format("YYYY-MM-DD")]||[]},typesOn:function(e){var t={};return this.eventsOn(e).forEach((function(e){e.types.forEach((function(e){t[e]=!0}))})),Object.keys(t)},newMonth:function(){var e=u(o.a.mark((function e(){var t,n,a,r,s,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.year&&this.year==this.month.year()){e.next=8;break}return e.next=3,this.$axios.get("/api/events?year=".concat(this.month.year()));case 3:t=e.sent.data,t.canAdd&&this.$emit("canAdd"),n={},t.events.forEach((function(e){n[e.date]||(n[e.date]=[]),n[e.date].push(e)})),this.events=n;case 8:for(a=[],r=this.month.clone().startOf("month"),r.subtract(r.day(),"days"),s=this.month.clone().endOf("month"),s.add(6-s.day(),"days"),i=r;!i.isAfter(s,"day");i=i.clone().add(1,"day"))a.push(i.isSame(this.month,"month")?i:null);this.dates=a,this.date=null,this.clicked=!1;case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),groupToClass:function(e){return e.toLowerCase().replace(" ","-")},onClickDate:function(e){this.clicked=!0,this.date=e},onHoverDate:function(e){this.clicked||(this.date=e)},onMonthBackward:function(){this.month.subtract(1,"month"),this.newMonth()},onMonthForward:function(){this.month.add(1,"month"),this.newMonth()},onNoHoverDate:function(){this.clicked||(this.date=null)},onYearBackward:function(){this.month.subtract(1,"year"),this.newMonth()},onYearForward:function(){this.month.add(1,"year"),this.newMonth()}}},p=c,h=(n("be5c"),n("2877")),v=Object(h["a"])(p,a,r,!1,null,null,null);t["default"]=v.exports},ac95:function(e,t,n){"use strict";var a=n("316f"),r=n.n(a);r.a},acb6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:e.title,menuItem:"events",noPadding:""}},[e.loading?n("div",{staticClass:"mt-3"},[n("b-spinner",{attrs:{small:""}})],1):e.tabs?n("b-card",{attrs:{id:"event-card","no-body":""}},[n("b-tabs",{attrs:{card:""}},[e.newe?e._e():n("b-tab",{staticClass:"event-tab-pane",attrs:{title:"Details","no-body":""}},[n("EventView",{attrs:{event:e.event}})],1),e.canEdit?n("b-tab",{staticClass:"event-tab-pane",attrs:{title:"Edit","no-body":""}},[n("EventEdit",{attrs:{event:e.event,groups:e.groups,venues:e.venues,types:e.types}})],1):e._e(),e.canAttendance?n("b-tab",{staticClass:"event-tab-pane",attrs:{title:"Attendance","no-body":""}},[n("EventAttendance",{attrs:{event:e.event,people:e.people}})],1):e._e()],1)],1):e.canEdit?n("EventEdit",{attrs:{event:e.event,groups:e.groups,venues:e.venues,types:e.types}}):n("EventView",{attrs:{event:e.event}})],1)},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={data:function(){return{loading:!1,title:"Event",canEdit:!1,canAttendance:!1,event:null,groups:null,types:null,venues:null,people:null}},computed:{newe:function(){return"NEW"===this.$route.params.id},tabs:function(){return(this.newe?0:1)+(this.canEdit?1:0)+(this.canAttendance?1:0)>1}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/events/".concat(this.$route.params.id));case 3:t=e.sent.data,this.canEdit=t.canEdit,this.canAttendance=t.canAttendance,this.event=t.event,this.title=t.event.id?"".concat(t.event.date," ").concat(t.event.name):"New Event",this.groups=t.groups,this.venues=t.venues,this.types=t.types,this.people=t.people,this.loading=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},u=d,c=(n("0e8e"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},b1da:function(e,t,n){},ba12:function(e,t,n){},bc36:function(e,t,n){"use strict";var a=n("7089"),r=n.n(a);r.a},bca1:function(e,t,n){"use strict";var a=n("1d33"),r=n.n(a);r.a},bd43:function(e,t,n){},be5c:function(e,t,n){"use strict";var a=n("699d"),r=n.n(a);r.a},c028:function(e,t,n){"use strict";var a=n("31d9"),r=n.n(a);r.a},c2c2:function(e,t,n){"use strict";var a=n("35fa"),r=n.n(a);r.a},c710:function(e,t,n){},cdf6:function(e,t,n){"use strict";var a=n("051f"),r=n.n(a);r.a},ce93:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"person-view"}},[n("div",{attrs:{id:"person-view-name"}},[n("div",{attrs:{id:"person-view-informalName"}},[n("span",{domProps:{textContent:e._s(e.person.informalName)}}),e.person.callSign?n("span",{attrs:{id:"person-view-callSign"},domProps:{textContent:e._s(e.person.callSign)}}):e._e()]),e.person.formalName!==e.person.informalName?n("div",{attrs:{id:"person-view-formalName"},domProps:{textContent:e._s("(formally "+e.person.formalName+")")}}):e._e()]),n("div",{attrs:{id:"person-view-roles"}},[e._l(e.person.roles,(function(t){return[t.held?n("div",{domProps:{textContent:e._s(t.name)}}):e._e()]}))],2),e.person.emails?n("div",{attrs:{id:"person-view-emails"}},e._l(e.person.emails,(function(t){return n("div",[n("a",{attrs:{href:"mailto:"+t.email},domProps:{textContent:e._s(t.email)}}),t.label?n("span",{staticClass:"person-view-email-label",domProps:{textContent:e._s(" ("+t.label+")")}}):e._e()])})),0):e._e(),e.person.cellPhone?n("div",{staticClass:"person-view-phone"},[n("a",{attrs:{href:"tel:"+e.person.cellPhone},domProps:{textContent:e._s(e.person.cellPhone)}}),n("span",{staticClass:"person-view-phone-label"},[e._v("(Cell)")])]):e._e(),e.person.homePhone?n("div",{staticClass:"person-view-phone"},[n("a",{attrs:{href:"tel:"+e.person.homePhone},domProps:{textContent:e._s(e.person.homePhone)}}),n("span",{staticClass:"person-view-phone-label"},[e._v("(Home)")])]):e._e(),e.person.workPhone?n("div",{staticClass:"person-view-phone"},[n("a",{attrs:{href:"tel:"+e.person.workPhone},domProps:{textContent:e._s(e.person.workPhone)}}),n("span",{staticClass:"person-view-phone-label"},[e._v("(Work)")])]):e._e(),e.person.homeAddress.address?n("div",{staticClass:"person-view-address"},[n("div",[e.person.workAddress.sameAsHome?n("span",[e._v("Home Address (all day):")]):n("span",[e._v("Home Address:")]),n("a",{staticClass:"person-view-map",attrs:{target:"_blank",href:"https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(e.person.homeAddress.address)}},[e._v("Map")])]),n("div",{domProps:{textContent:e._s(e.person.homeAddress.address.split(",")[0])}}),n("div",{domProps:{textContent:e._s(e.person.homeAddress.address.replace(/^[^,]*, */,""))}}),e.person.homeAddress.fireDistrict?n("div",{domProps:{textContent:e._s("Sunnyvale Fire District "+e.person.homeAddress.fireDistrict)}}):e._e()]):e._e(),e.person.workAddress.address?n("div",{staticClass:"person-view-address"},[n("div",[n("span",[e._v("Work Address:")]),n("a",{staticClass:"person-view-map",attrs:{target:"_blank",href:"https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(e.person.workAddress.address)}},[e._v("Map")])]),n("div",{domProps:{textContent:e._s(e.person.workAddress.address.split(",")[0])}}),n("div",{domProps:{textContent:e._s(e.person.workAddress.address.replace(/^[^,]*, */,""))}}),e.person.workAddress.fireDistrict?n("div",{domProps:{textContent:e._s("Sunnyvale Fire District "+e.person.workAddress.fireDistrict)}}):e._e()]):e._e(),e.person.mailAddress.address?n("div",{staticClass:"person-view-address"},[n("div",[e._v("Mailing Address:")]),n("div",{domProps:{textContent:e._s(e.person.mailAddress.address.split(",")[0])}}),n("div",{domProps:{textContent:e._s(e.person.mailAddress.address.replace(/^[^,]*, */,""))}})]):e._e(),e.person.attended?n("div",{attrs:{id:"person-view-attended"}},[n("div",[e._v("Events attended:")]),e._l(e.person.attended,(function(t){return n("div",[n("span",{staticClass:"person-view-attended-date",domProps:{textContent:e._s(t.date)}}),n("span",{domProps:{textContent:e._s(t.name)}})])}))],2):e._e()])},r=[],s={props:{person:null},computed:{},methods:{}},o=s,i=(n("bc36"),n("2877")),l=Object(i["a"])(o,a,r,!1,null,null,null);t["default"]=l.exports},d29c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-group",{attrs:{label:e.typeFmt+" Address","label-for":"person-address-"+e.type,"label-cols-sm":"auto","label-class":{"person-edit-label":!0,"person-edit-sameaddr-label":"Home"!==e.type},state:!e.error&&null,"invalid-feedback":e.error}},["Home"!==e.type?n("b-checkbox",{staticClass:"person-edit-sameaddr",attrs:{disabled:!e.hasHome},model:{value:e.sameAsHome,callback:function(t){e.sameAsHome=t},expression:"sameAsHome"}},[e._v("Same as home address")]):e._e(),e.sameAsHome?e._e():n("b-input",{ref:"line1",staticClass:"person-edit-input",class:{"mt-1":"Home"!==e.type},attrs:{id:"person-address-"+e.type,state:!e.error&&null,trim:""},on:{blur:e.onBlur},model:{value:e.line1,callback:function(t){e.line1=t},expression:"line1"}}),e.sameAsHome?e._e():n("b-input",{ref:"line2",staticClass:"person-edit-input mt-1",attrs:{state:!e.error&&null,trim:""},on:{focus:e.onFocusLine2,blur:e.onBlur},model:{value:e.line2,callback:function(t){e.line2=t},expression:"line2"}})],1)},r=[],s=n("a34a"),o=n.n(s),i=n("a572"),l=n.n(i);function d(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){d(s,a,r,o,i,"next",e)}function i(e){d(s,a,r,o,i,"throw",e)}o(void 0)}))}}var c=l.a.core,p=l.a.usStreet.Lookup,h=new c.SharedCredentials("1674975535561744"),v=c.buildClient.usStreet(h),m={model:{prop:"address",event:"change"},props:{type:String,address:Object,hasHome:Boolean},data:function(){return{sameAsHome:!1,line1:"",line2:"",latitude:0,longitude:0,error:null,lastChecked:""}},computed:{typeFmt:function(){return"Work"===this.type?"Business Hours":"Mail"===this.type?"Mailing":this.type}},mounted:function(){this.address&&this.address.address&&(this.lastChecked=this.address.address,this.line1=this.address.address.split(",")[0],this.line2=this.address.address.replace(/^[^,]*, */,""),this.latitude=this.address.latitude,this.longitude=this.address.longitude),this.address?this.sameAsHome=this.address.sameAsHome||!1:this.sameAsHome="Mail"===this.type},watch:{line1:function(){""===this.line1?this.line2="":""===this.line2&&(this.line2="Sunnyvale, CA")},sameAsHome:function(){var e=this;this.$emit("change",{address:"",latitude:0,longitude:0,sameAsHome:this.sameAsHome}),this.sameAsHome||this.$nextTick((function(){e.$refs.line1.focus()}))}},methods:{onBlur:function(){var e=u(o.a.mark((function e(t){var n,a,r,s;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.relatedTarget!==this.$refs.line1.$el&&t.relatedTarget!==this.$refs.line2.$el){e.next=2;break}return e.abrupt("return");case 2:if(this.line1||this.line2){e.next=5;break}return this.$emit("change",{address:"",latitude:0,longitude:0}),e.abrupt("return");case 5:if(n="".concat(this.line1,", ").concat(this.line2),n.match(/\W[A-Za-z][A-Za-z]\W/)||(n+=", CA"),n!==this.lastChecked){e.next=9;break}return e.abrupt("return");case 9:return a=new p,a.street=n,this.$emit("change",null),e.next=14,v.send(a).catch(console.error);case 14:r=e.sent,r.lookups[0].result.length?(s=r.lookups[0].result[0],this.line1=s.deliveryLine1,s.deliveryLine2&&(this.line1+=", "+s.deliveryLine2),this.line2=s.lastLine.replace(/-[0-9]{4}/,""),this.lastChecked=this.line1+", "+this.line2,this.latitude=s.metadata.latitude,this.longitude=s.metadata.longitude,this.error=null,this.$emit("change",{address:this.lastChecked,latitude:this.latitude,longitude:this.longitude})):(this.lastChecked=n,this.error="We couldn't locate this address.",this.$emit("change",null));case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onFocusLine2:function(){this.$refs.line2.select()}}},f=m,b=(n("f452"),n("2877")),w=Object(b["a"])(f,a,r,!1,null,null,null);t["default"]=w.exports},d390:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event-attend-person",on:{click:function(t){return e.$emit("toggle",e.person)}}},[n("span",{class:e.classes,domProps:{textContent:e._s(e.label)}}),n("span",{domProps:{textContent:e._s(e.person.sortName)}})])},r=[],s={props:{person:Object},computed:{classes:function(){return this.person.attended?"event-attend-person-"+this.person.attended.type.toLowerCase():"event-attend-person-absent"},label:function(){if(!this.person.attended)return"";if(!this.person.attended.minutes)return this.person.attended.type.substr(0,1);var e=Math.floor(this.person.attended.minutes/60);return this.person.attended.minutes%60!==0&&(e+="Â½"),e}}},o=s,i=(n("0bbf"),n("2877")),l=Object(i["a"])(o,a,r,!1,null,null,null);t["default"]=l.exports},dd82:function(e,t,n){},df6d:function(e,t,n){"use strict";var a=n("45fe"),r=n.n(a);r.a},e2c9:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$store.state.touch?"touch":"mouse",attrs:{id:"page-top"}},[n("div",{attrs:{id:"page-heading"}},[n("div",{attrs:{id:"page-menu-trigger-box"},on:{click:e.onMenuTrigger}},[e.$store.state.me?n("svg",{staticClass:"bi bi-list",attrs:{id:"page-menu-trigger",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M4.5 13.5A.5.5 0 015 13h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5zm0-4A.5.5 0 015 9h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5zm0-4A.5.5 0 015 5h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5z","clip-rule":"evenodd"}})]):e._e()]),n("div",{attrs:{id:"page-titlebox"}},[n("div",{attrs:{id:"page-title"},domProps:{textContent:e._s(e.title)}})]),n("div",{attrs:{id:"page-menu-spacer"}})]),n("div",{class:e.menuOpen?"page-menu-open":null,attrs:{id:"page-main"}},[e.$store.state.me?n("div",{attrs:{id:"page-menu"}},[n("div",{attrs:{id:"page-menu-welcome"}},[e._v("Welcome"),n("br"),n("b",{domProps:{textContent:e._s(e.$store.state.me.informalName)}})]),n("b-nav",{attrs:{id:"page-nav",pills:"",vertical:""}},[n("b-nav-item",{attrs:{to:"/events",active:"events"===e.menuItem}},[e._v("Events")]),n("b-nav-item",{attrs:{to:"/people",active:"people"===e.menuItem}},[e._v("People")]),e.$store.state.me.webmaster?n("b-nav-item",{attrs:{to:"/roles",active:"roles"===e.menuItem}},[e._v("Roles")]):e._e(),n("b-nav-item",{attrs:{to:"/reports",active:"reports"===e.menuItem}},[e._v("Reports")]),n("b-nav-item",{attrs:{to:"/logout"}},[e._v("Logout")])],1)],1):e._e(),n("div",{class:e.noPadding?"page-no-padding":null,attrs:{id:"page-content"}},[e.subtitle?n("div",{attrs:{id:"page-subtitle"},domProps:{textContent:e._s(e.subtitle)}}):e._e(),e._t("default")],2)])])},r=[],s={props:{title:String,subtitle:String,menuItem:String,noPadding:Boolean},data:function(){return{menuOpen:!1}},methods:{onMenuTrigger:function(){this.menuOpen=!this.menuOpen}}},o=s,i=(n("ee04"),n("2877")),l=Object(i["a"])(o,a,r,!1,null,null,null);t["default"]=l.exports},e461:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{id:"event-edit"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-group",{attrs:{label:"Event name","label-for":"event-name","label-cols-sm":"auto","label-class":"event-edit-label",state:!e.nameError&&null,"invalid-feedback":e.nameError}},[n("b-input",{attrs:{id:"event-name",autofocus:"",state:!e.nameError&&null,trim:""},model:{value:e.event.name,callback:function(t){e.$set(e.event,"name",t)},expression:"event.name"}})],1),n("b-form-group",{attrs:{label:"Event date","label-for":"event-date","label-cols-sm":"auto","label-class":"event-edit-label",state:!e.dateError&&null,"invalid-feedback":e.dateError}},[n("b-input",{attrs:{id:"event-date",type:"date",state:!e.dateError&&null},model:{value:e.event.date,callback:function(t){e.$set(e.event,"date",t)},expression:"event.date"}})],1),n("b-form-group",{attrs:{label:"Event time","label-cols-sm":"auto","label-class":"event-edit-label",state:!e.timeError&&null,"invalid-feedback":e.timeError}},[n("div",{attrs:{id:"event-time"}},[n("b-input",{attrs:{id:"event-start",type:"time",state:!e.timeError&&null},model:{value:e.event.start,callback:function(t){e.$set(e.event,"start",t)},expression:"event.start"}}),n("span",[e._v("to")]),n("b-input",{attrs:{id:"event-end",type:"time",state:!e.timeError&&null},model:{value:e.event.end,callback:function(t){e.$set(e.event,"end",t)},expression:"event.end"}})],1)]),n("b-form-group",{attrs:{label:"Location","label-for":"event-venue","label-cols-sm":"auto","label-class":"event-edit-label"}},[n("b-select",{attrs:{id:"event-venue",options:e.venues,"text-field":"name","value-field":"id"},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-select-option",{attrs:{value:"0"}},[e._v("TBD")])]},proxy:!0}]),model:{value:e.event.venue.id,callback:function(t){e.$set(e.event.venue,"id",t)},expression:"event.venue.id"}},[n("b-select-option",{attrs:{value:"NEW"}},[e._v("(create a new venue)")])],1)],1),"NEW"===e.event.venue.id?[n("b-form-group",{attrs:{label:"Venue name","label-for":"venue-name","label-cols-sm":"auto","label-class":"event-edit-label",state:!e.venueNameError&&null,"invalid-feedback":e.venueNameError}},[n("b-input",{ref:"venueName",attrs:{id:"venue-name",state:!e.venueNameError&&null,trim:""},model:{value:e.event.venue.name,callback:function(t){e.$set(e.event.venue,"name",t)},expression:"event.venue.name"}})],1),n("b-form-group",{attrs:{label:"Address","label-for":"venue-address","label-cols-sm":"auto","label-class":"event-edit-label",state:!e.venueAddressError&&null,"invalid-feedback":e.venueAddressError}},[n("b-input",{attrs:{id:"venue-address",state:!e.venueAddressError&&null,trim:""},model:{value:e.event.venue.address,callback:function(t){e.$set(e.event.venue,"address",t)},expression:"event.venue.address"}})],1),n("b-form-group",{attrs:{label:"City","label-for":"venue-city","label-cols-sm":"auto","label-class":"event-edit-label",state:!e.venueCityError&&null,"invalid-feedback":e.venueCityError}},[n("b-input",{attrs:{id:"venue-city",state:!e.venueCityError&&null,trim:""},model:{value:e.event.venue.city,callback:function(t){e.$set(e.event.venue,"city",t)},expression:"event.venue.city"}})],1),n("b-form-group",{attrs:{label:"Map URL","label-for":"venue-url","label-cols-sm":"auto","label-class":"event-edit-label",state:!e.venueURLError&&null,"invalid-feedback":e.venueURLError}},[n("b-input",{attrs:{id:"venue-url",state:!e.venueURLError&&null,trim:""},model:{value:e.event.venue.url,callback:function(t){e.$set(e.event.venue,"url",t)},expression:"event.venue.url"}}),n("b-form-text",[e._v("Generate this by opening Google Maps and searching for the venue.\n(Search by the venueâ€™s name rather than its address, if it has a\nname, so that Googleâ€™s sidebar of information about the venue\nappears.)  Once the venue is found, zoom out a few steps until the\nnearest freeways are shown â€” enough to give the viewer an idea of\nwhere in the Bay Area the venue is.  Copy the URL from the browser\naddress bar and paste it here.")])],1)]:e._e(),n("b-form-group",{attrs:{label:"Details","label-for":"event-details","label-cols-sm":"auto","label-class":"event-edit-label"}},[n("b-textarea",{attrs:{id:"event-details",rows:"3"},model:{value:e.event.details,callback:function(t){e.$set(e.event,"details",t)},expression:"event.details"}}),n("b-form-text",[e._v("This may contain HTML <a> tags for links, but no other tags.")])],1),n("b-form-group",{attrs:{label:"Event has these types:",state:!e.typeError&&null,"invalid-feedback":e.typeError}},[n("b-form-checkbox-group",{attrs:{stacked:"",options:e.types},model:{value:e.event.types,callback:function(t){e.$set(e.event,"types",t)},expression:"event.types"}})],1),n("b-form-group",{attrs:{label:"Event is for these groups:",state:!e.groupsError&&null,"invalid-feedback":e.groupsError}},[n("b-form-checkbox-group",{attrs:{stacked:"",options:e.groups,"text-field":"name","value-field":"id"},model:{value:e.event.groups,callback:function(t){e.$set(e.event,"groups",t)},expression:"event.groups"}})],1),n("div",{staticClass:"mt-3"},[n("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!e.valid},domProps:{textContent:e._s(e.event.id?"Save Event":"Create Event")}}),n("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")]),e.event.id?n("b-btn",{staticClass:"ml-5",attrs:{variant:"danger"},on:{click:e.onDelete}},[e._v("Delete Event")]):e._e()],1)],2)},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}var d={props:{event:null,groups:null,venues:null,types:null},data:function(){return{submitted:!1,dateError:null,timeError:null,nameError:null,duplicateName:null,venueNameError:null,venueAddressError:null,venueCityError:null,venueURLError:null,typeError:null,groupsError:null,valid:!0}},watch:{"event.name":"validate","event.date":"validate","event.start":"validate","event.end":"validate","event.venue.name":"validate","event.venue.address":"validate","event.venue.city":"validate","event.venue.url":"validate","event.types":"validate","event.groups":"validate","event.venue.id":function(){var e=this;"NEW"===this.event.venue.id&&(this.event.venue.name=this.event.venue.address=this.event.venue.city=this.event.venue.url="",this.validate(),this.$nextTick((function(){e.$refs.venueName.focus()})))}},methods:{onCancel:function(){this.$router.go(-1)},onDelete:function(){var e=l(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$bvModal.msgBoxConfirm("Are you sure you want to delete this event?  All associated data, including attendance records, will be permanently lost.",{title:"Delete Event",headerBgVariant:"danger",headerTextVariant:"white",okTitle:"Delete",okVariant:"danger",cancelTitle:"Keep"}).catch((function(e){}));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n=new FormData,n.append("delete","true"),e.next=9,this.$axios.post("/api/events/".concat(this.$route.params.id),n);case 9:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=l(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.validate(),this.valid){e.next=4;break}return e.abrupt("return");case 4:return t=new FormData,t.append("name",this.event.name),t.append("date",this.event.date),t.append("start",this.event.start),t.append("end",this.event.end),t.append("venue",this.event.venue.id),"NEW"===this.event.venue.id&&(t.append("venueName",this.event.venue.name),t.append("venueAddress",this.event.venue.address),t.append("venueCity",this.event.venue.city),t.append("venueURL",this.event.venue.url)),t.append("details",this.event.details),this.event.types.forEach((function(e){t.append("type",e)})),this.event.groups.forEach((function(e){t.append("group",e)})),e.next=16,this.$axios.post("/api/events/".concat(this.$route.params.id),t);case 16:n=e.sent.data,n&&n.nameError?this.duplicateName={date:this.event.date,name:this.event.name}:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){this.submitted&&(this.event.name?this.duplicateName&&this.duplicateName.date===this.event.date&&this.duplicateName.name===this.event.name?this.nameError="Another event on this date has this name.":this.nameError=this.duplicateName=null:this.nameError="The event name is required.",this.event.date?this.event.date.match(/^20\d\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/)?this.dateError=null:this.dateError="This is not a valid date.":this.dateError="The event date is required.",this.event.start&&this.event.end?this.event.start.match(/^(?:[01][0-9]|2[0-3]):[0-5][0-9]$/)?this.event.end.match(/^(?:[01][0-9]|2[0-3]):[0-5][0-9]$/)?this.event.end<this.event.start?this.timeError="The end time must come after the start time.":this.timeError=null:this.timeError="The end time is not valid.":this.timeError="The start time is not valid.":this.timeError="The event times are required.","NEW"===this.event.venue.id?(this.event.venue.name?this.venueNameError=null:this.venueNameError="The venue name is required.",this.event.venue.address?this.venueAddressError=null:this.venueAddressError="The venue address is required.",this.event.venue.city?this.venueCityError=null:this.venueCityError="The venue city is required.",this.event.venue.url&&!this.event.venue.url.startsWith("https://www.google.com/maps/")?this.venueURLError="The venue map URL must start with https://www.google.com/maps/.":this.venueURLError=null):this.venueNameError=this.venueAddressError=this.venueCityError=this.venueURLError=null,this.event.types.length?this.typeError=null:this.typeError="At least one event type is required.",this.event.groups.length?this.groupsError=null:this.groupsError="At least one group must be selected.",this.valid=!this.nameError&&!this.dateError&&!this.timeError&&!this.venueNameError&&!this.venueAddressError&&!this.venueCityError&&!this.venueURLError&&!this.typeError&&!this.groupsError)}}},u=d,c=(n("2581"),n("2877")),p=Object(c["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},e63c:function(e,t,n){"use strict";var a=n("35be"),r=n.n(a);r.a},ee04:function(e,t,n){"use strict";var a=n("09a2"),r=n.n(a);r.a},f452:function(e,t,n){"use strict";var a=n("6e07"),r=n.n(a);r.a},f863:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{id:"person-edit"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-group",{attrs:{label:"Name","label-for":"person-informalName","label-cols-sm":"auto","label-class":"person-edit-label",state:!e.informalNameError&&null,"invalid-feedback":e.informalNameError}},[n("b-input",{staticClass:"person-edit-input",attrs:{id:"person-informalName",autofocus:"",plaintext:!e.canEditDetails,state:!e.informalNameError&&null,trim:""},model:{value:e.person.informalName,callback:function(t){e.$set(e.person,"informalName",t)},expression:"person.informalName"}}),e.canEditDetails?n("b-form-text",[e._v("What you like to be called, e.g. â€œJoe Banksâ€")]):e._e()],1),n("b-form-group",{attrs:{label:"Formal name","label-for":"person-formalName","label-cols-sm":"auto","label-class":"person-edit-label",state:!e.formalNameError&&null,"invalid-feedback":e.formalNameError}},[n("b-input",{staticClass:"person-edit-input",attrs:{id:"person-formalName",plaintext:!e.canEditDetails,state:!e.formalNameError&&null},model:{value:e.person.formalName,callback:function(t){e.$set(e.person,"formalName",t)},expression:"person.formalName"}}),e.canEditDetails?n("b-form-text",[e._v("For formal documents, e.g. â€œJoseph A. Banks, Jr.â€")]):e._e()],1),n("b-form-group",{attrs:{label:"Sort name","label-for":"person-sortName","label-cols-sm":"auto","label-class":"person-edit-label",state:!e.sortNameError&&null,"invalid-feedback":e.sortNameError}},[n("b-input",{staticClass:"person-edit-input",attrs:{id:"person-sortName",plaintext:!e.canEditDetails,state:!e.sortNameError&&null},model:{value:e.person.sortName,callback:function(t){e.$set(e.person,"sortName",t)},expression:"person.sortName"}}),e.canEditDetails?n("b-form-text",[e._v("For appearance in sorted lists, e.g. â€œBanks, Joeâ€")]):e._e()],1),e.canEditUsername?n("b-form-group",{attrs:{label:"Username","label-for":"person-username","label-cols-sm":"auto","label-class":"person-edit-label",state:!e.usernameError&&null,"invalid-feedback":e.usernameError}},[n("b-input",{staticClass:"person-edit-input",attrs:{id:"person-username",state:!e.usernameError&&null},model:{value:e.person.username,callback:function(t){e.$set(e.person,"username",t)},expression:"person.username"}})],1):e._e(),n("b-form-group",{attrs:{label:"Call sign","label-for":"person-callSign","label-cols-sm":"auto","label-class":"person-edit-label",state:!e.callSignError&&null,"invalid-feedback":e.callSignError}},[n("b-input",{staticClass:"person-edit-input",attrs:{id:"person-callSign",plaintext:!e.canEditDetails,state:!e.callSignError&&null},model:{value:e.person.callSign,callback:function(t){e.$set(e.person,"callSign",t)},expression:"person.callSign"}})],1),e.canEditDetails?n("PasswordEntry",{attrs:{label:"Password",labelClass:"person-edit-label",deferValidation:!e.submitted,allowBadPassword:e.allowBadPassword,passwordHints:e.myPasswordHints},on:{change:e.onPasswordChange}}):e._e(),e._l(e.person.emails,(function(t,a){return n("b-form-group",{key:"e"+a,attrs:{label:1===e.person.emails.length?"Email":"Email #"+(a+1),"label-for":"person-email"+a,"label-cols-sm":"auto","label-class":"person-edit-label",state:!e.emailErrors[a]&&null,"invalid-feedback":e.emailErrors[a]}},[n("b-input",{staticClass:"person-edit-input d-inline",attrs:{id:"person-email"+a,plaintext:!e.canEditDetails,state:!e.emailErrors[a]&&null,trim:""},model:{value:t.email,callback:function(n){e.$set(t,"email",n)},expression:"e.email"}}),e.person.emails.length>1?n("b-input",{staticClass:"person-edit-label-input",attrs:{id:"person-email"+a+"-label",placeholder:"Label",plaintext:!e.canEditDetails,trim:""},model:{value:t.label,callback:function(n){e.$set(t,"label",n)},expression:"e.label"}}):e._e(),a===e.person.emails.length-1?n("b-button",{staticClass:"mt-3 d-block",attrs:{size:"sm"},on:{click:e.addEmail}},[e._v("Add another email")]):e._e()],1)})),n("b-form-group",{attrs:{label:"Cell Phone","label-for":"person-cellPhone","label-cols-sm":"auto","label-class":"person-edit-label",state:!e.cellPhoneError&&null,"invalid-feedback":e.cellPhoneError}},[n("b-input",{staticClass:"person-edit-input",attrs:{id:"person-cellPhone",plaintext:!e.canEditDetails,state:!e.cellPhoneError&&null,trim:""},model:{value:e.person.cellPhone,callback:function(t){e.$set(e.person,"cellPhone",t)},expression:"person.cellPhone"}})],1),n("b-form-group",{attrs:{label:"Home Phone","label-for":"person-homePhone","label-cols-sm":"auto","label-class":"person-edit-label",state:!e.homePhoneError&&null,"invalid-feedback":e.homePhoneError}},[n("b-input",{staticClass:"person-edit-input",attrs:{id:"person-homePhone",plaintext:!e.canEditDetails,state:!e.homePhoneError&&null,trim:""},model:{value:e.person.homePhone,callback:function(t){e.$set(e.person,"homePhone",t)},expression:"person.homePhone"}})],1),n("b-form-group",{attrs:{label:"Work Phone","label-for":"person-workPhone","label-cols-sm":"auto","label-class":"person-edit-label",state:!e.workPhoneError&&null,"invalid-feedback":e.workPhoneError}},[n("b-input",{staticClass:"person-edit-input",attrs:{id:"person-workPhone",plaintext:!e.canEditDetails,state:!e.workPhoneError&&null,trim:""},model:{value:e.person.workPhone,callback:function(t){e.$set(e.person,"workPhone",t)},expression:"person.workPhone"}})],1),n("PersonEditAddress",{attrs:{type:"Home"},model:{value:e.person.homeAddress,callback:function(t){e.$set(e.person,"homeAddress",t)},expression:"person.homeAddress"}}),n("PersonEditAddress",{attrs:{type:"Work",hasHome:!!e.person.homeAddress.address},model:{value:e.person.workAddress,callback:function(t){e.$set(e.person,"workAddress",t)},expression:"person.workAddress"}}),n("PersonEditAddress",{attrs:{type:"Mail",hasHome:!!e.person.homeAddress.address},model:{value:e.person.mailAddress,callback:function(t){e.$set(e.person,"mailAddress",t)},expression:"person.mailAddress"}}),n("b-form-group",{staticClass:"mt-3",attrs:{label:e.rolesLabel,state:!e.rolesError&&null,"invalid-feedback":e.rolesError}},e._l(e.person.roles,(function(t){return e.canEditRoles?n("b-checkbox",{key:t.id,attrs:{disabled:!t.canAssign},model:{value:t.held,callback:function(n){e.$set(t,"held",n)},expression:"role.held"}},[e._v(e._s(t.name))]):e._l(e.person.roles,(function(t){return[t.held?n("div",{domProps:{textContent:e._s(t.name)}}):e._e()]}))})),1),n("div",{staticClass:"mt-3"},[n("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!e.valid},domProps:{textContent:e._s(e.submitLabel)}}),n("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")])],1)],2)},r=[],s=n("a34a"),o=n.n(s);function i(e,t,n,a,r,s,o){try{var i=e[s](o),l=i.value}catch(d){return void n(d)}i.done?t(l):Promise.resolve(l).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){i(s,a,r,o,l,"next",e)}function l(e){i(s,a,r,o,l,"throw",e)}o(void 0)}))}}function d(e){return p(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function p(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var h={props:{person:Object,allowBadPassword:Boolean,canEditDetails:Boolean,canEditRoles:Boolean,canEditUsername:Boolean,passwordHints:Array},data:function(){return{informalNameError:null,formalNameError:null,sortNameError:null,duplicateSortName:null,usernameError:null,duplicateUsername:null,callSignError:null,duplicateCallSign:null,cellPhoneError:null,homePhoneError:null,workPhoneError:null,password:"",emailErrors:[],rolesError:null,submitted:!1,suggestions:null}},computed:{me:function(){return this.$route.params.id==this.$store.state.me.id},newp:function(){return"NEW"===this.$route.params.id},rolesLabel:function(){return this.me?"You hold these roles:":this.newp?"This person will hold these roles:":"This person holds these roles:"},myPasswordHints:function(){var e=d(this.passwordHints);return this.person.informalName&&e.push(this.person.informalName),this.person.formalName&&e.push(this.person.formalName),this.person.callSign&&e.push(this.person.callSign),this.person.username&&e.push(this.person.username),this.person.homeAddress&&this.person.homeAddress.address&&e.push(this.person.homeAddress.address),this.person.mailAddress&&this.person.mailAddress.address&&e.push(this.person.mailAddress.address),this.person.workAddress&&this.person.workAddress.address&&e.push(this.person.workAddress.address),this.person.emails.forEach((function(t){e.push(t.email)})),this.person.cellPhone&&e.push(this.person.cellPhone),this.person.homePhone&&e.push(this.person.homePhone),this.person.workPhone&&e.push(this.person.workPhone),e},submitLabel:function(){return this.me?"Save Changes":this.newp?"Create Person":"Save Person"},valid:function(){return!this.informalNameError&&!this.formalNameError&&!this.sortNameError&&!this.usernameError&&!this.callSignError&&!this.cellPhoneError&&!this.homePhoneError&&!this.workPhoneError&&!this.rolesError&&null!==this.password&&this.person.homeAddress&&this.person.mailAddress&&this.person.workAddress&&!this.emailErrors.some((function(e){return e}))}},mounted:function(){var e=this;this.person.emails.forEach((function(t){e.$watch((function(){return t.email}),e.validate),e.emailErrors.push(null)})),this.person.emails.length||this.addEmails(),this.canEditRoles&&this.newp&&this.person.roles.forEach((function(t){t.canAssign&&e.$watch((function(){return t.held}),e.validate)}))},watch:{"person.informalName":function(e,t){this.person.formalName===t&&(this.person.formalName=e),this.person.sortName===this.informalToSort(t)&&(this.person.sortName=this.informalToSort(e)),this.validate()},"person.formalName":"validate","person.sortName":"validate","person.username":"validate","person.callSign":"validate","person.cellPhone":"validate","person.homePhone":"validate","person.workPhone":"validate"},methods:{addEmail:function(){var e={email:"",label:""};this.person.emails.push(e),this.emailErrors.push(null),this.$watch((function(){return e.email}),this.validate)},onCancel:function(){this.$router.go(-1)},onPasswordChange:function(e){this.password=e},onSubmit:function(){var e=l(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.validate(),this.valid){e.next=4;break}return e.abrupt("return");case 4:return t=new FormData,t.append("informalName",this.person.informalName),t.append("formalName",this.person.formalName),t.append("sortName",this.person.sortName),t.append("username",this.person.username),t.append("callSign",this.person.callSign),t.append("cellPhone",this.person.cellPhone),t.append("homePhone",this.person.homePhone),t.append("workPhone",this.person.workPhone),this.password&&t.append("password",this.password),this.person.emails.forEach((function(e){e.email&&(t.append("email",e.email),t.append("emailLabel",e.label||""))})),this.person.homeAddress.address&&(t.append("homeAddress",this.person.homeAddress.address),t.append("homeAddressLatitude",this.person.homeAddress.latitude),t.append("homeAddressLongitude",this.person.homeAddress.longitude)),this.person.workAddress.address?(t.append("workAddress",this.person.workAddress.address),t.append("workAddressLatitude",this.person.workAddress.latitude),t.append("workAddressLongitude",this.person.workAddress.longitude)):t.append("workAddressSameAsHome",this.person.workAddress.sameAsHome),this.person.mailAddress.address?t.append("mailAddress",this.person.mailAddress.address):t.append("mailAddressSameAsHome",this.person.mailAddress.sameAsHome),this.person.roles.filter((function(e){return e.held&&e.canAssign})).forEach((function(e){t.append("role",e.id)})),e.next=21,this.$axios.post("/api/people/".concat(this.$route.params.id),t);case 21:n=e.sent.data,n?(n.duplicateSortName&&(this.duplicateSortName=this.person.sortName),n.duplicateUsername&&(this.duplicateUsername=this.person.username),n.duplicateCallSign&&(this.duplicateCallSign=this.person.callSign),this.validate()):this.$router.push("/people");case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){var e=this;this.submitted&&(this.person.informalName?this.informalNameError=null:this.informalNameError="A name is required.",this.person.formalName?this.formalNameError=null:this.formalNameError="A name is required.",this.person.sortName?this.duplicateSortName===this.person.sortName?this.sortNameError="A different person has this name.":this.sortNameError=null:this.sortNameError="A name is required.",this.duplicateUsername&&this.person.username===this.duplicateUsername?this.usernameError="A different person has this username.":this.usernameError=null,this.person.callSign&&!this.person.callSign.match(/^[AKNW][A-Z]?[0-9][A-Z]{1,3}$/)?this.callSignError="This is not a valid call sign.":this.duplicateCallSign===this.person.callSign?this.callSignError="A different person has this call sign.":this.callSignError=null,this.person.emails.forEach((function(t,n){t.email?t.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)?e.emailErrors[n]=null:e.emailErrors[n]="This is not a valid email address.":e.emailErrors[n]=null})),this.person.cellPhone&&10!==this.person.cellPhone.replace(/[^0-9]/g,"").length?this.cellPhoneError="A valid phone number must have 10 digits.":this.cellPhoneError=null,this.person.homePhone&&10!==this.person.homePhone.replace(/[^0-9]/g,"").length?this.homePhoneError="A valid phone number must have 10 digits.":this.homePhoneError=null,this.person.workPhone&&10!==this.person.workPhone.replace(/[^0-9]/g,"").length?this.workPhoneError="A valid phone number must have 10 digits.":this.workPhoneError=null,this.newp&&!this.person.roles.some((function(e){return e.held}))?this.rolesError="At least one role must be selected.":this.rolesError=null)}}},v=h,m=(n("40e4"),n("2877")),f=Object(m["a"])(v,a,r,!1,null,null,null);t["default"]=f.exports}});
//# sourceMappingURL=app.e0c44b4a.js.map