(function(e){function t(t){for(var r,o,i=t[0],l=t[1],u=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"013f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:"SERV Portal"}},[a("div",{attrs:{id:"login-top"}},[a("div",{attrs:{id:"login-banner"}},[e._v("Please log in.")]),a("div",{attrs:{id:"login-forserv"}},[e._v("This web site is for SERV volunteers only.\nIf you are interested in joining one of the SERV volunteer organizations,\nplease visit Sunnyvale’s "),a("a",{attrs:{href:"https://sunnyvale.ca.gov/government/safety/emergency.htm"}},[e._v("emergency response page")]),e._v(".")]),a("form",{attrs:{id:"login-form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-group",{attrs:{label:"Email address","label-for":"login-email","label-cols-sm":"4"}},[a("b-input",{attrs:{id:"login-email",autocorrect:"off",autocapitalize:"none",autofocus:"",required:"",trim:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("b-form-group",{attrs:{label:"Password","label-for":"login-password","label-cols-sm":"4"}},[a("b-input",{ref:"password",attrs:{id:"login-password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("div",{attrs:{id:"login-submit-row"}},[a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Log in")])],1),e.failed?a("div",{attrs:{id:"login-failed"}},[e._v("Login incorrect. Please try again.")]):e._e()],1)])])},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={data:function(){return{email:"",password:"",failed:!1}},methods:{onSubmit:function(){var e=l(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.email&&this.password){e.next=2;break}return e.abrupt("return");case 2:return t=new FormData,t.append("email",this.email),t.append("password",this.password),e.prev=5,e.next=8,this.$axios.post("/api/login",t);case 8:a=e.sent.data,this.$store.commit("login",a),e.next=18;break;case 12:e.prev=12,e.t0=e["catch"](5),console.error(e.t0),this.failed=!0,this.password="",this.$refs.password.focus();case 18:case"end":return e.stop()}}),e,this,[[5,12]])})));function t(){return e.apply(this,arguments)}return t}()}},c=u,d=(a("ddf8"),a("2877")),p=Object(d["a"])(c,r,n,!1,null,"1448f007",null);t["default"]=p.exports},"0619":function(e,t,a){"use strict";var r=a("be131"),n=a.n(r);n.a},"0964":function(e,t,a){},"0fe9":function(e,t,a){},1628:function(e,t,a){var r={"./Main.vue":"3ac4","./base/Page.vue":"2213","./pages/Event.vue":"3a11","./pages/EventAttendance.vue":"4381","./pages/Events.vue":"e640","./pages/Login.vue":"013f","./pages/Logout.vue":"4ab3","./pages/ORole.vue":"56af","./pages/People.vue":"2a8c","./pages/Person.vue":"9350","./pages/PersonTeam.vue":"e5f1","./pages/Reports.vue":"b439","./pages/Role.vue":"592a","./pages/Roles.vue":"548a","./pages/reports/CERTAttendance.vue":"fec3","./pages/reports/CERTAttendanceForm.vue":"ea21"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id="1628"},2213:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"page-top"}},[a("div",{attrs:{id:"page-heading"}},[a("div",{attrs:{id:"page-menu-trigger-box"},on:{click:e.onMenuTrigger}},[a("svg",{staticClass:"bi bi-list",attrs:{id:"page-menu-trigger",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M4.5 13.5A.5.5 0 015 13h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5zm0-4A.5.5 0 015 9h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5zm0-4A.5.5 0 015 5h10a.5.5 0 010 1H5a.5.5 0 01-.5-.5z","clip-rule":"evenodd"}})])]),a("div",{attrs:{id:"page-titlebox"}},[a("div",{attrs:{id:"page-title"},domProps:{textContent:e._s(e.title)}})]),a("div",{attrs:{id:"page-menu-spacer"}})]),a("div",{class:{"page-has-menu":!!e.$store.state.me,"page-menu-open":e.menuOpen},attrs:{id:"page-main"}},[e.$store.state.me?a("div",{attrs:{id:"page-menu"}},[a("div",{attrs:{id:"page-menu-welcome"}},[e._v("Welcome"),a("br"),a("b",{domProps:{textContent:e._s(e.$store.state.me.firstName+" "+e.$store.state.me.lastName)}})]),a("router-link",{staticClass:"page-menu-item",class:{"page-menu-item-active":"events"===e.menuItem},attrs:{to:"/events"}},[e._v("Events")]),a("router-link",{staticClass:"page-menu-item",class:{"page-menu-item-active":"people"===e.menuItem},attrs:{to:"/people"}},[e._v("People")]),e.$store.state.me.webmaster?a("router-link",{staticClass:"page-menu-item",class:{"page-menu-item-active":"roles"===e.menuItem},attrs:{to:"/roles"}},[e._v("Roles")]):e._e(),a("router-link",{staticClass:"page-menu-item",class:{"page-menu-item-active":"reports"===e.menuItem},attrs:{to:"/reports"}},[e._v("Reports")]),a("router-link",{staticClass:"page-menu-item",attrs:{to:"/people/"+e.$store.state.me.id}},[e._v("Profile")]),a("router-link",{staticClass:"page-menu-item",attrs:{to:"/logout"}},[e._v("Logout")])],1):e._e(),a("div",{attrs:{id:"page-content"}},[e.subtitle?a("div",{attrs:{id:"page-subtitle"},domProps:{textContent:e._s(e.subtitle)}}):e._e(),e._t("default")],2)])])},n=[],s={props:{title:String,subtitle:String,menuItem:String},data:function(){return{menuOpen:!1}},methods:{onMenuTrigger:function(){this.menuOpen=!this.menuOpen}}},o=s,i=(a("d251"),a("2877")),l=Object(i["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},"22c2":function(e,t,a){"use strict";var r=a("4344"),n=a.n(r);n.a},"2a8c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:"People",menuItem:"people"}},[a("div",{attrs:{id:"people-title"}},[e._v("People"),e.roles&&e.roles.length>1?a("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{id:"people-role"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.role=t.target.multiple?a:a[0]}}},e._l(e.roles,(function(t){return a("option",{key:t.id,domProps:{value:t.id,textContent:e._s(t.name)}})})),0):e._e()]),e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("table",{attrs:{id:"people-table"}},[a("tr",[a("th",[e._v("Person")]),a("th",[e._v("Contact Info")]),a("th",[e._v("Roles")])]),e._l(e.people,(function(t){return a("tr",{key:t.id},[a("td",[a("router-link",{attrs:{to:"/people/"+t.id},domProps:{textContent:e._s(t.lastName+", "+t.firstName)}})],1),a("td",[a("div",[a("a",{attrs:{href:"mailto:"+t.email},domProps:{textContent:e._s(t.email)}})]),t.phone?a("div",[a("a",{attrs:{href:"tel:"+t.phone},domProps:{textContent:e._s(t.phone)}})]):e._e()]),a("td",[e._l(t.roles,(function(t,r){return a("div",{key:r,domProps:{textContent:e._s(t)}})})),t.roles.length?e._e():a("div",[e._v("—")])],2)])}))],2),e.canAdd?a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{to:"/people/NEW"}},[e._v("Add Person")])],1):e._e()])},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={data:function(){return{role:0,roles:null,people:null,canAdd:!1,loading:!1}},created:function(){this.load()},watch:{role:function(){this.load()}},methods:{load:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/people",{params:{role:this.role}});case 3:t=e.sent.data,this.people=t.people,this.canAdd=t.canAdd,t.viewableRoles.length>1&&(t.viewableRoles.unshift({id:0,name:"(all)"}),this.roles=t.viewableRoles),this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},c=u,d=(a("f0d3"),a("2877")),p=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=p.exports},"2fbe":function(e,t,a){},"37cf":function(e,t,a){"use strict";var r=a("2fbe"),n=a.n(r);n.a},"3a11":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:e.title,subtitle:e.subtitle,menuItem:"events"}},[e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",[e._v("small")])],1):e.canEdit?a("form",{staticClass:"mt-3",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-group",{attrs:{label:"Event date","label-for":"event-date","label-cols-sm":"auto","label-class":"edit-label",state:!e.dateError&&null,"invalid-feedback":e.dateError}},[a("b-input",{attrs:{id:"event-date",type:"date",autofocus:"",state:!e.dateError&&null},model:{value:e.event.date,callback:function(t){e.$set(e.event,"date",t)},expression:"event.date"}})],1),a("b-form-group",{attrs:{label:"Event name","label-for":"event-name","label-cols-sm":"auto","label-class":"edit-label",state:!e.nameError&&null,"invalid-feedback":e.nameError}},[a("b-input",{attrs:{id:"event-name",state:!e.nameError&&null,trim:""},model:{value:e.event.name,callback:function(t){e.$set(e.event,"name",t)},expression:"event.name"}})],1),a("b-form-group",{attrs:{label:"Event hours","label-for":"event-hours","label-cols-sm":"auto","label-class":"edit-label",state:!e.hoursError&&null,"invalid-feedback":e.hoursError}},[a("b-input",{attrs:{id:"event-hours",type:"number",min:"0.0",max:"24.0",step:"0.5",number:"",state:!e.hoursError&&null},model:{value:e.event.hours,callback:function(t){e.$set(e.event,"hours",t)},expression:"event.hours"}})],1),a("b-form-group",{attrs:{label:"Event type:",state:!e.typeError&&null,"invalid-feedback":e.typeError}},[a("b-form-radio-group",{attrs:{stacked:"",options:e.eventTypes},model:{value:e.event.type,callback:function(t){e.$set(e.event,"type",t)},expression:"event.type"}})],1),a("b-form-group",{attrs:{label:"Event is for these roles:",state:!e.rolesError&&null,"invalid-feedback":e.rolesError}},[a("b-form-checkbox-group",{attrs:{stacked:"",options:e.roles,"text-field":"name","value-field":"id"},model:{value:e.event.roles,callback:function(t){e.$set(e.event,"roles",t)},expression:"event.roles"}})],1),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!e.valid},domProps:{textContent:e._s(e.event.id?"Save Event":"Create Event")}}),a("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")]),e.event.id?a("b-btn",{staticClass:"ml-5",attrs:{variant:"danger"},on:{click:e.onDelete}},[e._v("Delete Event")]):e._e()],1)],1):a("div",{staticClass:"mt-3"},[a("b-form-group",{attrs:{label:"Event date","label-for":"event-date","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-input",{attrs:{id:"event-date",type:"date",plaintext:"",value:e.event.date}})],1),a("b-form-group",{attrs:{label:"Event name","label-for":"event-name","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-input",{attrs:{id:"event-name",plaintext:"",value:e.event.name}})],1),a("b-form-group",{attrs:{label:"Event hours","label-for":"event-hours","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-input",{attrs:{id:"event-hours",type:"number",plaintext:"",value:e.event.hours}})],1),a("b-form-group",{attrs:{label:"Event type","label-for":"event-hours","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-input",{attrs:{id:"event-type",plaintext:"",value:e.eventTypes[e.event.type]}})],1),a("b-form-group",{attrs:{label:"Roles","label-for":"event-roles","label-cols-sm":"auto","label-class":"edit-label"}},[a("b-textarea",{attrs:{id:"event-roles",plaintext:""},domProps:{textContent:e._s(e.eventRoleList)}})],1),a("div",{attrs:{id:"event-buttons"}},[a("b-btn",{on:{click:e.onCancel}},[e._v("Back")])],1)],1)])},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={Train:"Training",Drill:"Drill",Civic:"Civic Event",Incid:"Incident",CE:"Continuing Ed",Meeting:"Meeting",Class:"Class"},c={data:function(){return{loading:!1,title:"Event",canEdit:!1,event:null,year:null,roles:null,eventTypes:u,submitted:!1,dateError:null,nameError:null,duplicateName:null,hoursError:null,typeError:null,rolesError:null,valid:!0}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/events/".concat(this.$route.params.id));case 3:t=e.sent.data,this.canEdit=t.canEdit,this.event=t.event,this.event.id&&(this.year=this.event.date.substr(0,4)),this.title=t.event.id?"".concat(t.event.date," ").concat(t.event.name):"New Event",this.roles=t.roles,this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{cancelLink:function(){return this.year?{path:"/events",params:{year:this.year}}:"/events"},eventRoleList:function(){var e=this,t=[];return this.event.roles.forEach((function(a){t.push(e.roles.find((function(e){return e.id===a})).name)})),t.join("\n")},subtitle:function(){return this.$route.params.id?"Edit Event":"Create Event"}},watch:{"event.date":"validate","event.name":"validate","event.hours":"validate","event.type":"validate","event.roles":"validate"},methods:{onCancel:function(){this.$router.go(-1)},onDelete:function(){var e=l(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$bvModal.msgBoxConfirm("Are you sure you want to delete this event?  All associated data, including attendance records, will be permanently lost.",{title:"Delete Event",headerBgVariant:"danger",headerTextVariant:"white",okTitle:"Delete",okVariant:"danger",cancelTitle:"Keep"}).catch((function(e){}));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return a=new FormData,a.append("delete","true"),e.next=9,this.$axios.post("/api/events/".concat(this.$route.params.id),a);case 9:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=l(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.validate(),this.valid){e.next=4;break}return e.abrupt("return");case 4:return t=new FormData,t.append("date",this.event.date),t.append("name",this.event.name),t.append("hours",this.event.hours),t.append("type",this.event.type),this.event.roles.forEach((function(e){t.append("role",e)})),e.next=12,this.$axios.post("/api/events/".concat(this.$route.params.id),t);case 12:a=e.sent.data,a&&a.nameError?this.duplicateName={date:this.event.date,name:this.event.name}:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){this.submitted&&(this.event.date?this.event.date.match(/^20\d\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/)?this.dateError=null:this.dateError="This is not a valid date.":this.dateError="The event date is required.",this.event.name?this.duplicateName&&this.duplicateName.date===this.event.date&&this.duplicateName.name===this.event.name?this.nameError="Another event on this date has this name.":this.nameError=this.duplicateName=null:this.nameError="The event name is required.",""===this.event.hours?this.hoursError="The event duration is required.":"number"!==typeof this.event.hours||this.event.hours<0||this.event.hours>24?this.hoursError="The event duration must be between 0 and 24 hours.":this.hoursError=null,u[this.event.type]?this.typeError=null:this.typeError="The event type is required.",this.event.roles.length?this.rolesError=null:this.rolesError="At least one role must be selected.",this.valid=!this.dateError&&!this.nameError&&!this.hoursError&&!this.typeError&&!this.rolesError)}}},d=c,p=(a("22c2"),a("2877")),m=Object(p["a"])(d,r,n,!1,null,null,null);t["default"]=m.exports},"3ac4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$store.state.me?a("router-view"):e.$store.state.started?a("Login"):e._e()},n=[],s={},o=s,i=a("2877"),l=Object(i["a"])(o,r,n,!1,null,"77cc7a35",null);t["default"]=l.exports},"3c94":function(e,t,a){"use strict";var r=a("40d4"),n=a.n(r);n.a},"40d4":function(e,t,a){},4344:function(e,t,a){},4381:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:e.title,subtitle:"Event Attendance",menuItem:"events"}},[e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("form",{staticClass:"mt-3",on:{submit:function(t){return t.preventDefault(),e.onSave(t)}}},[a("b-form-group",{attrs:{label:"This event was attended by:"}},[a("b-form-checkbox-group",{attrs:{stacked:"",options:e.people,"text-field":"name","value-field":"id"},model:{value:e.attendees,callback:function(t){e.attendees=t},expression:"attendees"}})],1),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary"}},[e._v("Save Attendance")]),a("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")])],1)],1)])},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={data:function(){return{loading:!1,event:null,people:null,attendees:null}},computed:{title:function(){return this.loading?"Event Attendance":"".concat(this.event.date," ").concat(this.event.name)}},created:function(){var e=l(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/events/".concat(this.$route.params.id,"/attendance"));case 3:t=e.sent.data,this.event=t.event,a=[],t.people.forEach((function(e){e.name="".concat(e.lastName,", ").concat(e.firstName),e.attended&&a.push(e.id)})),this.people=t.people,this.attendees=a,this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{onCancel:function(){this.$router.go(-1)},onSave:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,this.attendees.forEach((function(e){t.append("person",e)})),e.next=4,this.$axios.post("/api/events/".concat(this.$route.params.id,"/attendance"),t);case 4:this.$router.push({path:"/events",params:{year:this.event.date.substr(0,4)}});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},c=u,d=a("2877"),p=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=p.exports},"4ab3":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:"Logout",subtitle:"Logging out...",menuItem:"logout"}})},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={created:function(){var e=l(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.post("/api/logout");case 2:this.$router.replace("/"),this.$store.commit("login",null);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},c=u,d=a("2877"),p=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=p.exports},5121:function(e,t,a){},"548a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:"Roles",subtitle:"Roles",menuItem:"roles"}},[e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("table",{attrs:{id:"roles-table"}},e._l(e.roles,(function(t){return a("tr",{key:t.id},[a("td",[a("b-link",{attrs:{to:"/roles/"+t.id},domProps:{textContent:e._s(t.name)}})],1)])})),0),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{to:"/roles/NEW"}},[e._v("Add Role")])],1)])},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={data:function(){return{loading:!1,roles:null}},created:function(){var e=l(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/roles");case 3:this.roles=e.sent.data,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},c=u,d=(a("37cf"),a("2877")),p=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=p.exports},"54a5":function(e,t,a){},"56af":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:e.title,subtitle:e.subtitle,menuItem:"teams"}},[e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-group",{attrs:{label:"Role name","label-for":"role-name","label-cols-sm":"auto","label-class":"role-label",state:!e.nameError&&null,"invalid-feedback":e.nameError}},[a("b-input",{attrs:{id:"role-name",autofocus:"",state:!e.nameError&&null,trim:""},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),a("b-form-group",{attrs:{label:"Team","label-for":"role-team","label-cols-sm":"auto","label-class":"role-label"}},[a("b-input",{attrs:{id:"role-team",plaintext:"",value:e.team.name}})],1),a("b-form-group",{attrs:{label:"This role has the following privileges on teams:"}},[a("table",{attrs:{id:"role-privs"}},[a("tr",[a("th"),a("th",[e._v("Member")]),a("th",[e._v("Access")])]),e._l(e.privs,(function(t){return a("tr",{key:t.id},[a("td",{class:"indent-"+t.indent,domProps:{textContent:e._s(t.name)}}),a("td",[a("b-checkbox",{model:{value:t.member,callback:function(a){e.$set(t,"member",a)},expression:"team.member"}})],1),a("td",[a("b-radio-group",{attrs:{options:e.accessList},model:{value:t.access,callback:function(a){e.$set(t,"access",a)},expression:"team.access"}})],1)])}))],2)]),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!!e.nameError},domProps:{textContent:e._s(e.role.id?"Save Role":"Create Role")}}),a("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")]),e.canDelete?a("b-btn",{staticClass:"ml-5",attrs:{variant:"danger"},on:{click:e.onDelete}},[e._v("Delete Role")]):e._e()],1)],1)])},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u=[{value:"none",text:"None"},{value:"view",text:"View"},{value:"admin",text:"Admin"},{value:"manage",text:"Manage"}],c={data:function(){return{accessList:u,loading:!1,origName:null,team:null,role:null,canDelete:!1,privs:null,nameError:null,duplicateName:null,submitted:!1}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/teams/".concat(this.$route.params.tid,"/roles/").concat(this.$route.params.rid));case 3:t=e.sent.data,this.team=t.team,this.role=t.role,this.origName=this.role.name,this.canDelete=t.canDelete,this.privs=t.privs,this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{subtitle:function(){return"NEW"===this.$route.params.rid?"Create Role":"Edit Role"},title:function(){return"NEW"===this.$route.params.rid?"New Role":this.origName?"".concat(this.team.name,": ").concat(this.origName||"(member)"):"Edit Role"}},watch:{"role.name":"validate"},methods:{onCancel:function(){this.$router.go(-1)},onDelete:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,t.append("delete","true"),e.next=4,this.$axios.post("/api/teams/".concat(this.$route.params.tid,"/roles/").concat(this.$route.params.rid),t);case 4:this.$router.push("/teams");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=l(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.validate(),!this.nameError){e.next=4;break}return e.abrupt("return");case 4:return t=new FormData,t.append("name",this.role.name),this.privs.forEach((function(e){t.append("member-".concat(e.id),e.member),t.append("access-".concat(e.id),e.access)})),e.next=9,this.$axios.post("/api/teams/".concat(this.$route.params.tid,"/roles/").concat(this.$route.params.rid),t);case 9:a=e.sent.data,a||this.$router.push("/teams"),a.duplicateName&&(this.duplicateName=this.role.name),this.validate();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){this.submitted&&(this.duplicateName===this.role.name?this.nameError="A different role on this team has this name.":this.nameError=null)}}},d=c,p=(a("3c94"),a("2877")),m=Object(p["a"])(d,r,n,!1,null,null,null);t["default"]=m.exports},"56d7":function(e,t,a){"use strict";a.r(t);a("744f"),a("6c7b"),a("7514"),a("20d6"),a("1c4c"),a("6762"),a("cadf"),a("e804"),a("55dd"),a("d04f"),a("c8ce"),a("217b"),a("7f7f"),a("f400"),a("7f25"),a("536b"),a("d9ab"),a("f9ab"),a("32d7"),a("25c9"),a("9f3c"),a("042e"),a("c7c6"),a("f4ff"),a("049f"),a("7872"),a("a69f"),a("0b21"),a("6c1a"),a("c7c62"),a("84b4"),a("c5f6"),a("2e37"),a("fca0"),a("7cdf"),a("ee1d"),a("b1b1"),a("87f3"),a("9278"),a("5df2"),a("04ff"),a("f751"),a("4504"),a("fee7"),a("ffc1"),a("0d6d"),a("9986"),a("8e6e"),a("25db"),a("e4f7"),a("b9a1"),a("64d5"),a("9aea"),a("db97"),a("66c8"),a("57f0"),a("165b"),a("456d"),a("cf6a"),a("fd24"),a("8615"),a("551c"),a("097d"),a("df1b"),a("2397"),a("88ca"),a("ba16"),a("d185"),a("ebde"),a("2d34"),a("f6b3"),a("2251"),a("c698"),a("a19f"),a("9253"),a("9275"),a("3b2b"),a("3846"),a("4917"),a("a481"),a("28a5"),a("386d"),a("6b54"),a("4f7f"),a("8a81"),a("ac4d"),a("8449"),a("9c86"),a("fa83"),a("48c0"),a("a032"),a("aef6"),a("d263"),a("6c37"),a("9ec8"),a("5695"),a("2fdb"),a("d0b0"),a("5df3"),a("b54a"),a("f576"),a("ed50"),a("788d"),a("14b9"),a("f386"),a("f559"),a("1448"),a("673e"),a("242a"),a("c66f"),a("b05c"),a("34ef"),a("6aa2"),a("15ac"),a("af56"),a("b6e4"),a("9c29"),a("63d9"),a("4dda"),a("10ad"),a("c02b"),a("4795"),a("130f"),a("ac6a"),a("96cf"),a("bba4"),a("8103"),a("0cdd");var r=a("2b0e"),n=a("5f5b");a("ab8b"),a("2dd8");r["default"].use(n["a"]);var s=a("bc3a"),o=a.n(s),i={xsrfCookieName:"auth"},l=o.a.create(i);l.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=l,window.axios=l,Object.defineProperties(e.prototype,{axios:{get:function(){return l}},$axios:{get:function(){return l}}})},r["default"].use(Plugin);Plugin;var u=a("2f62");r["default"].use(u["a"]);var c=new u["a"].Store({state:{me:null,started:!1,eventsYear:null},mutations:{login:function(e,t){e.me=t,e.started=!0},eventsYear:function(e,t){e.eventsYear=t}},actions:{}}),d=a("8c4f"),p=a("fec3"),m=a("3a11"),h=a("4381"),v=a("e640"),f=a("4ab3"),b=a("2a8c"),g=a("9350"),w=a("b439"),E=a("592a"),x=a("548a");r["default"].use(d["a"]);var y=new d["a"]({mode:"history",base:"/",routes:[{path:"/",redirect:"/events"},{path:"/events",component:v["default"]},{path:"/events/:id",component:m["default"]},{path:"/events/:id/attendance",component:h["default"]},{path:"/logout",component:f["default"]},{path:"/people",component:b["default"]},{path:"/people/:id",component:g["default"]},{path:"/reports",component:w["default"]},{path:"/reports/cert-attendance",component:p["default"],props:function(e){return e.query}},{path:"/roles",component:x["default"]},{path:"/roles/:id",component:E["default"]}]});r["default"].config.productionTip=!1;var _=a("1628");_.keys().forEach((function(e){var t=_(e),a=e.split("/").pop().replace(/\.vue$/,"");r["default"].component(a,t.default||t)}));var k=new r["default"]({store:c,router:y,render:function(e){return e("Main")}});k.$axios.get("/api/login").then((function(e){c.commit("login",e.data)})).catch((function(){c.commit("login",null)})),k.$mount("#app")},"592a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:e.title,subtitle:e.subtitle,menuItem:"roles"}},[e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-group",{attrs:{label:"Role name","label-for":"role-name","label-cols-sm":"auto","label-class":"role-label",state:!e.nameError&&null,"invalid-feedback":e.nameError}},[a("b-input",{attrs:{id:"role-name",autofocus:"",state:!e.nameError&&null,trim:""},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),a("b-form-group",{attrs:{label:"Holder label","label-for":"role-holder-label","label-cols-sm":"auto","label-class":"role-label"}},[a("b-input",{attrs:{id:"role-holder-label",trim:""},model:{value:e.role.memberLabel,callback:function(t){e.$set(e.role,"memberLabel",t)},expression:"role.memberLabel"}})],1),a("b-form-group",{attrs:{label:"Attributes","label-cols-sm":"auto","label-class":"role-label pt-0"}},[a("div",[a("b-checkbox",{model:{value:e.role.implyOnly,callback:function(t){e.$set(e.role,"implyOnly",t)},expression:"role.implyOnly"}},[e._v("Role can only be implied, not assigned")]),a("b-checkbox",{model:{value:e.role.individual,callback:function(t){e.$set(e.role,"individual",t)},expression:"role.individual"}},[e._v("Role can only be held by one person")])],1)]),a("b-form-group",{attrs:{label:"This role has the following privileges on other roles:"}},[a("table",{attrs:{id:"role-aprivs"}},[a("tr",[a("th"),a("th",[e._v("Holds")]),a("th",[e._v("View")]),a("th",[e._v("Assign")]),a("th",[e._v("Events")])]),e._l(e.privs,(function(t){return a("tr",{key:t.id},[a("td",{domProps:{textContent:e._s(t.id===e.role.id&&e.newr?"(new role)":t.name)}}),a("td",[a("b-checkbox",{attrs:{checked:t.actor.holdsRole,disabled:!t.actor.holdsRoleEnabled},on:{change:function(a){return e.onChangePriv(t,"actor","holdsRole")}}})],1),a("td",[a("b-checkbox",{attrs:{checked:t.actor.viewHolders,disabled:!t.actor.viewHoldersEnabled},on:{change:function(a){return e.onChangePriv(t,"actor","viewHolders")}}})],1),a("td",[a("b-checkbox",{attrs:{checked:t.actor.assignRole,disabled:!t.actor.assignRoleEnabled},on:{change:function(a){return e.onChangePriv(t,"actor","assignRole")}}})],1),a("td",[a("b-checkbox",{attrs:{checked:t.actor.manageEvents,disabled:!t.actor.manageEventsEnabled},on:{change:function(a){return e.onChangePriv(t,"actor","manageEvents")}}})],1)])}))],2)]),a("b-form-group",{attrs:{label:"These other roles have the following privileges on this role:"}},[a("table",{attrs:{id:"role-tprivs"}},[a("tr",[a("th"),a("th",[e._v("Holds")]),a("th",[e._v("View")]),a("th",[e._v("Assign")]),a("th",[e._v("Events")])]),e._l(e.privs,(function(t){return[t.id!==e.role.id?a("tr",{key:t.id},[a("td",{domProps:{textContent:e._s(t.name)}}),a("td",[a("b-checkbox",{attrs:{checked:t.target.holdsRole,disabled:!t.target.holdsRoleEnabled},on:{change:function(a){return e.onChangePriv(t,"target","holdsRole")}}})],1),a("td",[a("b-checkbox",{attrs:{checked:t.target.viewHolders,disabled:!t.target.viewHoldersEnabled},on:{change:function(a){return e.onChangePriv(t,"target","viewHolders")}}})],1),a("td",[a("b-checkbox",{attrs:{checked:t.target.assignRole,disabled:!t.target.assignRoleEnabled},on:{change:function(a){return e.onChangePriv(t,"target","assignRole")}}})],1),a("td",[a("b-checkbox",{attrs:{checked:t.target.manageEvents,disabled:!t.target.manageEventsEnabled},on:{change:function(a){return e.onChangePriv(t,"target","manageEvents")}}})],1)]):e._e()]}))],2)]),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!e.valid},domProps:{textContent:e._s(e.newr?"Create Role":"Save Role")}}),a("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")]),e.role.id?a("b-btn",{staticClass:"ml-5",attrs:{variant:"danger"},on:{click:e.onDelete}},[e._v("Delete Role")]):e._e()],1)],1)])},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={data:function(){return{loading:!1,origName:null,role:null,privs:null,nameError:null,duplicateName:null,submitted:!1,valid:!0}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/roles/".concat(this.$route.params.id));case 3:t=e.sent.data,this.role=t.role,this.privs=t.privs,this.origName=this.role.name,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{newr:function(){return"NEW"===this.$route.params.id},subtitle:function(){return this.newr?"Create Role":"Edit Role"},title:function(){return this.newr?"New Role":this.origName?"Role: ".concat(this.origName):"Edit Role"}},watch:{"role.name":function(e,t){this.role.memberLabel===t&&(this.role.memberLabel=e),this.validate()}},methods:{onCancel:function(){this.$router.go(-1)},onChangePriv:function(){var e=l(o.a.mark((function e(t,a,r){var n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t[a][r]=!t[a][r],n=new FormData,this.privs.forEach((function(e){n.append("a:holdsRole-".concat(e.id),e.actor.holdsRole),n.append("a:viewHolders-".concat(e.id),e.actor.viewHolders),n.append("a:assignRole-".concat(e.id),e.actor.assignRole),n.append("a:manageEvents-".concat(e.id),e.actor.manageEvents),n.append("t:holdsRole-".concat(e.id),e.target.holdsRole),n.append("t:viewHolders-".concat(e.id),e.target.viewHolders),n.append("t:assignRole-".concat(e.id),e.target.assignRole),n.append("t:manageEvents-".concat(e.id),e.target.manageEvents)})),e.next=5,this.$axios.post("/api/roles/".concat(this.$route.params.id,"/reloadPrivs"),n);case 5:this.privs=e.sent.data;case 6:case"end":return e.stop()}}),e,this)})));function t(t,a,r){return e.apply(this,arguments)}return t}(),onDelete:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,t.append("delete","true"),e.next=4,this.$axios.post("/api/roles/".concat(this.$route.params.id),t);case 4:this.$router.push("/roles");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=l(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.validate(),this.valid){e.next=4;break}return e.abrupt("return");case 4:return t=new FormData,t.append("name",this.role.name),t.append("memberLabel",this.role.memberLabel),t.append("implyOnly",this.role.implyOnly),t.append("individual",this.role.individual),this.privs.forEach((function(e){t.append("a:holdsRole-".concat(e.id),e.actor.holdsRole),t.append("a:viewHolders-".concat(e.id),e.actor.viewHolders),t.append("a:assignRole-".concat(e.id),e.actor.assignRole),t.append("a:manageEvents-".concat(e.id),e.actor.manageEvents),t.append("t:holdsRole-".concat(e.id),e.target.holdsRole),t.append("t:viewHolders-".concat(e.id),e.target.viewHolders),t.append("t:assignRole-".concat(e.id),e.target.assignRole),t.append("t:manageEvents-".concat(e.id),e.target.manageEvents)})),e.next=12,this.$axios.post("/api/roles/".concat(this.$route.params.id),t);case 12:a=e.sent.data,a||this.$router.push("/roles"),a.duplicateName&&(this.duplicateName=this.role.name),this.validate();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){this.submitted&&(this.role.name?this.duplicateName===this.role.name?this.nameError="A different team has this name.":this.nameError=null:this.nameError="The role name is required.",this.valid=!this.nameError)}}},c=u,d=(a("b17a"),a("2877")),p=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=p.exports},"755c":function(e,t,a){"use strict";var r=a("f0f1"),n=a.n(r);n.a},"7c64":function(e,t,a){},"90d1":function(e,t,a){},9350:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:e.title,subtitle:e.subtitle,menuItem:"people"}},[e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("form",{staticClass:"mt-3",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-group",{attrs:{label:"First name","label-for":"person-firstName","label-cols-sm":"auto","label-class":"person-label",state:!e.firstNameError&&null,"invalid-feedback":e.firstNameError}},[a("b-input",{attrs:{id:"person-firstName",autofocus:"",plaintext:!e.canEditInfo,state:!e.firstNameError&&null,trim:""},model:{value:e.person.firstName,callback:function(t){e.$set(e.person,"firstName",t)},expression:"person.firstName"}})],1),a("b-form-group",{attrs:{label:"Last name","label-for":"person-lastName","label-cols-sm":"auto","label-class":"person-label",state:!e.lastNameError&&null,"invalid-feedback":e.lastNameError}},[a("b-input",{attrs:{id:"person-lastName",plaintext:!e.canEditInfo,state:!e.lastNameError&&null,trim:""},model:{value:e.person.lastName,callback:function(t){e.$set(e.person,"lastName",t)},expression:"person.lastName"}})],1),a("b-form-group",{attrs:{label:"Email address","label-for":"person-email","label-cols-sm":"auto","label-class":"person-label",state:!e.emailError&&null,"invalid-feedback":e.emailError}},[a("b-input",{attrs:{id:"person-email",plaintext:!e.canEditInfo,state:!e.emailError&&null,trim:""},model:{value:e.person.email,callback:function(t){e.$set(e.person,"email",t)},expression:"person.email"}})],1),a("b-form-group",{attrs:{label:"Phone number","label-for":"person-phone","label-cols-sm":"auto","label-class":"person-label",state:!e.phoneError&&null,"invalid-feedback":e.phoneError}},[a("b-input",{attrs:{id:"person-phone",plaintext:!e.canEditInfo,state:!e.phoneError&&null,trim:""},model:{value:e.person.phone,callback:function(t){e.$set(e.person,"phone",t)},expression:"person.phone"}})],1),e.canEditInfo?a("b-form-group",{attrs:{id:"person-password",label:"Change password","label-cols-sm":"auto","label-class":"person-label",state:!e.passwordError&&(!!e.passwordSuccess||null),"invalid-feedback":e.passwordError,"valid-feedback":e.passwordSuccess}},[a("div",[a("b-input",{attrs:{id:"person-password1",type:"password",state:e.passwordState},model:{value:e.password1,callback:function(t){e.password1=t},expression:"password1"}}),a("b-input",{staticClass:"mt-2",attrs:{id:"person-password2",type:"password",state:e.passwordState},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),e.passwordScore>=0?a("b-progress",{attrs:{id:"person-password-score",height:"0.5rem"}},[a("b-progress-bar",{attrs:{value:100,variant:e.passwordVariant}}),a("b-progress-bar",{attrs:{value:e.passwordScore>0?100:0,variant:e.passwordVariant}}),a("b-progress-bar",{attrs:{value:e.passwordScore>1?100:0,variant:e.passwordVariant}}),a("b-progress-bar",{attrs:{value:e.passwordScore>2?100:0,variant:e.passwordVariant}}),a("b-progress-bar",{attrs:{value:e.passwordScore>3?100:0,variant:e.passwordVariant}})],1):e._e()],1)]):e._e(),a("b-form-group",{attrs:{label:e.rolesLabel,state:!e.rolesError&&null,"invalid-feedback":e.rolesError}},[a("div",e._l(e.roles,(function(t){return a("b-checkbox",{key:t.id,attrs:{disabled:!t.enabled},model:{value:t.held,callback:function(a){e.$set(t,"held",a)},expression:"role.held"}},[e._v(e._s(t.memberLabel||t.name))])})),1)]),e.canEditInfo?a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!e.valid},domProps:{textContent:e._s(e.submitLabel)}}),a("b-btn",{staticClass:"ml-2",on:{click:e.onCancel}},[e._v("Cancel")])],1):e._e()],1)])},n=[],s=a("a34a"),o=a.n(s),i=a("580e"),l=a.n(i);function u(e){return p(e)||d(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function p(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function m(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){m(s,r,n,o,i,"next",e)}function i(e){m(s,r,n,o,i,"throw",e)}o(void 0)}))}}var v={data:function(){return{loading:!1,person:null,roles:null,password1:null,password2:null,canEditInfo:!1,allowBadPassword:!1,firstNameError:null,lastNameError:null,duplicateName:null,emailError:null,duplicateEmail:null,phoneError:null,passwordHints:null,passwordError:null,passwordSuccess:null,passwordScore:-1,rolesError:null,submitted:!1}},computed:{me:function(){return this.$route.params.id==this.$store.state.me.id},newp:function(){return"NEW"===this.$route.params.id},passwordState:function(){return!(this.password1&&this.passwordScore<2&&!this.allowBadPassword)&&null},passwordVariant:function(){return this.passwordScore>=3?"success":2===this.passwordScore?"warning":"danger"},rolesLabel:function(){return this.me?"You hold these roles:":this.new?"This person will hold these roles:":"This person holds these roles:"},submitLabel:function(){return this.me?"Save Changes":this.newp?"Create Person":"Save Person"},subtitle:function(){return this.me?"Edit Profile":this.newp?"New Person":"Edit Person"},title:function(){return this.person&&this.person.id?"".concat(this.person.firstName," ").concat(this.person.lastName):this.newp?"New Person":"Edit Person"},valid:function(){return!this.firstNameError&&!this.lastNameError&&!this.emailError&&!this.phoneError&&!this.rolesError&&(!this.password1&&!this.password2||this.passwordScore>=(this.allowBadPassword?1:2))}},created:function(){var e=h(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/people/".concat(this.$route.params.id));case 3:t=e.sent.data,this.canEditInfo=t.canEditInfo,this.allowBadPassword=t.allowBadPassword,this.person=t.person,this.passwordHints=t.passwordHints,this.roles=t.roles,this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{"person.firstName":"validate","person.lastName":"validate","person.email":"validate","person.phone":"validate",password1:"validate",password2:"validate"},methods:{onCancel:function(){this.$router.go(-1)},onSubmit:function(){var e=h(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.validate(),this.valid){e.next=4;break}return e.abrupt("return");case 4:return t=new FormData,t.append("firstName",this.person.firstName),t.append("lastName",this.person.lastName),t.append("email",this.person.email),t.append("phone",this.person.phone),this.password1&&t.append("password",this.password1),this.roles.filter((function(e){return e.held&&e.enabled})).forEach((function(e){t.append("role",e.id)})),e.next=13,this.$axios.post("/api/people/".concat(this.$route.params.id),t);case 13:a=e.sent.data,a?(a.duplicateName&&(this.duplicateName={firstName:this.person.firstName,lastName:this.person.lastName}),a.duplicateEmail&&(this.duplicateEmail=this.person.email),this.validate()):this.$router.push("/people");case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){if((this.submitted||this.password2)&&this.password1!==this.password2)this.passwordScore=-1,this.passwordError="These two password entries do not match.",this.passwordSuccess=null;else if(this.password1){var e=u(this.passwordHints);this.person.firstName&&e.push(this.person.firstName),this.person.lastName&&e.push(this.person.lastName),this.person.email&&e.push(this.person.email),this.person.phone&&e.push(this.person.phone);var t=l()(this.password1,e);this.passwordScore=t.score,t.feedback?(this.passwordError=[t.feedback.warning].concat(u(t.feedback.suggestions),[this.passwordScore<3?"This password would take ".concat(t.crack_times_display.offline_slow_hashing_1e4_per_second," to crack."):null]).filter((function(e){return!!e})).join("\n"),this.passwordSuccess=this.passwordScore>2?"This password would take ".concat(t.crack_times_display.offline_slow_hashing_1e4_per_second," to crack."):null):this.passwordError=this.passwordSuccess=null}else this.passwordScore=-1,this.passwordError=this.passwordSuccess=null;this.submitted&&(this.person.firstName?this.firstNameError=null:this.firstNameError="A first name is required.",this.person.lastName?this.duplicateName&&this.person.firstName==this.duplicateName.firstName&&this.person.lastName==this.duplicateName.lastName?this.lastNameError="A different person has this name.":this.lastNameError=null:this.lastNameError="A last name is required.",this.person.email?this.person.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)?this.person.email===this.duplicateEmail?this.emailError="This email address is in use by another person.":this.emailError=null:this.emailError="This is not a valid email address.":this.emailError="An email address is required.",this.person.phone&&10!==this.person.phone.replace(/[^0-9]/g,"").length?this.phoneError="A valid phone number must have 10 digits.":this.phoneError=null,this.newp&&!this.roles.some((function(e){return e.held}))?this.rolesError="At least one role must be selected.":this.rolesError=null)}}},f=v,b=(a("c1c8"),a("2877")),g=Object(b["a"])(f,r,n,!1,null,null,null);t["default"]=g.exports},b17a:function(e,t,a){"use strict";var r=a("54a5"),n=a.n(r);n.a},b439:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:"Reports",menuItem:"reports"}},[e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):[a("CERTAttendanceForm",e._b({},"CERTAttendanceForm",e.certAtt,!1))]],2)},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={data:function(){return{loading:!1,certAtt:null}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/reports");case 3:t=e.sent.data,this.certAtt=t.certAttendance,this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},c=u,d=(a("c33c"),a("2877")),p=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=p.exports},b599:function(e,t,a){},be131:function(e,t,a){},c1c8:function(e,t,a){"use strict";var r=a("5121"),n=a.n(r);n.a},c33c:function(e,t,a){"use strict";var r=a("0fe9"),n=a.n(r);n.a},d251:function(e,t,a){"use strict";var r=a("b599"),n=a.n(r);n.a},ddf8:function(e,t,a){"use strict";var r=a("90d1"),n=a.n(r);n.a},e1af:function(e,t,a){"use strict";var r=a("0964"),n=a.n(r);n.a},e5f1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"person-team-row"},[!e.team.canAdmin&&e.team.role?a("td",{domProps:{textContent:e._s(e.team.name+": "+e.roleName(e.team.role))}}):e.team.canAdmin?a("td",[e.manageAny?a("b-checkbox",{attrs:{checked:!!e.team.role},on:{change:e.onMemberChange}},[e._v(e._s(e.team.name))]):a("span",{domProps:{textContent:e._s(e.team.name)}})],1):a("td",{domProps:{textContent:e._s(e.team.name)}}),e.team.canAdmin&&e.team.roles.length>1&&e.team.role?a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.team.role,expression:"team.role"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.team,"role",t.target.multiple?a:a[0])}}},e._l(e.team.roles,(function(t){return a("option",{key:t.id,domProps:{value:t.id,textContent:e._s(t.name||"(member)")}})})),0)]):e._e()])},n=[],s={props:{manageAny:Boolean,team:Object},methods:{onMemberChange:function(){this.team.role=this.team.role?0:this.team.roles[0].id},roleName:function(e){return this.team.roles.find((function(t){return t.id===e})).name}}},o=s,i=a("2877"),l=Object(i["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},e640:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:"Events",menuItem:"events"}},[a("div",{attrs:{id:"events-title"}},[e._v("Events"),a("select",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],attrs:{id:"events-year"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.year=t.target.multiple?a:a[0]}}},e._l(e.years,(function(t){return a("option",{key:t,domProps:{value:t,textContent:e._s(t)}})})),0)]),e.loading?a("div",{attrs:{id:"events-spinner"}},[a("b-spinner",{attrs:{small:""}})],1):a("div",{attrs:{id:"events-table"}},[a("tr",[a("th",[e._v("Date")]),a("th",[e._v("Event")]),a("th",[e._v("Invited")]),a("th")]),e._l(e.events,(function(t){return a("tr",{key:t.id},[a("td",{domProps:{textContent:e._s(t.date)}}),a("td",[a("router-link",{attrs:{to:"/events/"+t.id},domProps:{textContent:e._s(t.name)}})],1),a("td",e._l(t.roles,(function(t){return a("div",{domProps:{textContent:e._s(t)}})})),0),a("td",[t.canAttendance?a("router-link",{attrs:{to:"/events/"+t.id+"/attendance"}},[e._v("Attendance")]):e._e()],1)])}))],2),e.canAdd&&!e.loading?a("div",{attrs:{id:"events-buttons"}},[a("b-btn",{attrs:{to:"/events/NEW?year="+e.year}},[e._v("Add Event")])],1):e._e()])},n=[],s=a("a34a"),o=a.n(s),i=a("5a3a"),l=a.n(i);function u(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){u(s,r,n,o,i,"next",e)}function i(e){u(s,r,n,o,i,"throw",e)}o(void 0)}))}}var d={data:function(){return{year:null,years:l()(2019,(new Date).getFullYear()+2),events:null,canAdd:!1,loading:!0}},created:function(){this.year=this.$route.params.year||this.$store.state.eventsYear||(new Date).getFullYear()},watch:{year:function(){this.$store.commit("eventsYear",this.year),this.load()}},methods:{load:function(){var e=c(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/events?year=".concat(this.year));case 3:t=e.sent.data,this.canAdd=t.canAdd,this.events=t.events,this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},p=d,m=(a("e1af"),a("2877")),h=Object(m["a"])(p,r,n,!1,null,null,null);t["default"]=h.exports},ea21:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{id:"cert-att-form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"report-title"},[e._v("CERT Attendance Report")]),a("b-form-group",{attrs:{label:"Report on team","label-cols-sm":"auto","label-class":"cert-att-label"}},[a("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:e.teamList},model:{value:e.team,callback:function(t){e.team=t},expression:"team"}})],1),a("b-form-group",{attrs:{label:"Date range","label-cols-sm":"auto","label-class":"cert-att-label",state:!e.dateError&&null,"invalid-feedback":e.dateError}},[a("b-form-input",{attrs:{id:"cert-att-date-from",type:"date",state:!e.dateError&&null},model:{value:e.dateFromI,callback:function(t){e.dateFromI=t},expression:"dateFromI"}}),e._v("\nthrough\n"),a("b-form-input",{attrs:{id:"cert-att-date-to",type:"date",state:!e.dateError&&null},model:{value:e.dateToI,callback:function(t){e.dateToI=t},expression:"dateToI"}})],1),a("b-form-group",{attrs:{label:"Statistics by","label-cols-sm":"auto","label-class":"cert-att-label"}},[a("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:e.statsList},model:{value:e.stats,callback:function(t){e.stats=t},expression:"stats"}})],1),a("b-form-group",{attrs:{label:"Show detail","label-cols-sm":"auto","label-class":"cert-att-label"}},[a("b-form-radio-group",{staticClass:"cert-att-radio-group",attrs:{options:e.detailList},model:{value:e.detail,callback:function(t){e.detail=t},expression:"detail"}})],1),a("div",{staticClass:"mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary",disabled:!!e.dateError}},[e._v("Generate Report")])],1)],1)},n=[],s=["Alpha","Bravo","Both"],o=[{value:"count",text:"Number of Events"},{value:"hours",text:"Cumulative Hours"}],i=[{value:"date",text:"Show by date"},{value:"month",text:"Show by month"},{value:"total",text:"Show totals only"}],l=/^20\d\d-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])$/,u={props:{dateFrom:String,dateTo:String},data:function(){return{teamList:s,statsList:o,detailList:i,team:"Both",dateFromI:null,dateToI:null,stats:"count",detail:"month",dateError:null}},created:function(){this.dateFromI=this.dateFrom,this.dateToI=this.dateTo},watch:{dateFromI:"checkDates",dateToI:"checkDates"},methods:{checkDates:function(){this.dateFromI&&this.dateToI?this.dateFromI.match(l)&&this.dateToI.match(l)?this.dateFromI>this.dateToI?this.dateError="The starting date must be before the ending date.":this.dateError=null:this.dateError="Valid dates have the form YYYY-MM-DD.":this.dateError="Starting and ending dates are required."},onSubmit:function(){this.dateError||this.$router.push("/reports/cert-attendance?team=".concat(this.team,"&dateFrom=").concat(this.dateFrom,"&dateTo=").concat(this.dateTo,"&stats=").concat(this.stats,"&detail=").concat(this.detail))}}},c=u,d=(a("755c"),a("2877")),p=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=p.exports},f0d3:function(e,t,a){"use strict";var r=a("7c64"),n=a.n(r);n.a},f0f1:function(e,t,a){},fec3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{attrs:{title:"CERT Attendance",subtitle:"CERT Attendance",menuItem:"reports"}},[e.loading?a("div",{staticClass:"mt-3"},[a("b-spinner",{attrs:{small:""}})],1):a("table",{attrs:{id:"cert-att-table"}},[a("thead",e._l(e.header,(function(t,r){return a("tr",{key:r},e._l(t,(function(t,n){return a("td",{key:n,class:e.headerClass(r,n),attrs:{colspan:t.span||1},domProps:{textContent:e._s(e.wrapText(t))}})})),0)})),0),a("tbody",e._l(e.body,(function(t,r){return a("tr",{key:r},e._l(t,(function(t,r){return a("td",{key:r,class:e.spanStarts[r]?"cert-att-span":null,domProps:{textContent:e._s(t)}})})),0)})),0),a("tfoot",e._l(e.footer,(function(t,r){return a("tr",{key:r},e._l(t,(function(t,r){return a("td",{key:r,class:e.spanStarts[r]?"cert-att-span":null,domProps:{textContent:e._s(t)}})})),0)})),0)])])},n=[],s=a("a34a"),o=a.n(s);function i(e,t,a,r,n,s,o){try{var i=e[s](o),l=i.value}catch(u){return void a(u)}i.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}var u={props:{team:String,dateFrom:String,dateTo:String,stats:String,detail:String},data:function(){return{loading:!1,header:null,body:null,footer:null}},computed:{spanStarts:function(){var e={},t=0;return this.header[0].forEach((function(a){a.span&&(e[t]=!0),t+=a.span||1})),e}},created:function(){var e=l(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$axios.get("/api/reports/cert-attendance",{params:{team:this.team,dateFrom:this.dateFrom,dateTo:this.dateTo,stats:this.stats,detail:this.detail,format:"JSON"}});case 3:t=e.sent.data,this.header=t.header,this.body=t.body,this.footer=t.footer,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{headerClass:function(e,t){return 0===e&&0!==t||0!==e&&this.spanStarts[t]?"cert-att-span":null},wrapText:function(e){return e.span>1?e.text:e.text.replace("-","\n")}}},c=u,d=(a("0619"),a("2877")),p=Object(d["a"])(c,r,n,!1,null,null,null);t["default"]=p.exports}});
//# sourceMappingURL=app.3cd8d6d4.js.map