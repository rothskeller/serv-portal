(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TextsView"],{"121b":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.message?s("div",{attrs:{id:"texts-view"}},[s("div",{attrs:{id:"texts-view-meta"}},[s("div",{staticClass:"texts-view-meta-label"},[e._v("Message sent")]),s("div",{staticClass:"texts-view-meta",domProps:{textContent:e._s(e.message.timestamp)}}),s("div",{staticClass:"texts-view-meta-label"},[e._v("Sent by")]),s("div",{staticClass:"texts-view-meta",domProps:{textContent:e._s(e.message.sender)}}),s("div",{staticClass:"texts-view-meta-label"},[e._v("Sent to")]),s("div",{staticClass:"texts-view-meta"},e._l(e.message.groups,(function(t){return s("div",{domProps:{textContent:e._s(t)}})})),0),s("div",{staticClass:"texts-view-meta-label"},[e._v("Message text")]),s("div",{staticClass:"texts-view-meta",domProps:{textContent:e._s(e.message.message)}})]),s("div",{attrs:{id:"texts-view-deliveries"}},[s("div",{staticClass:"texts-view-name-num texts-view-heading"},[e._v("Recipient")]),s("div",{staticClass:"texts-view-status-time texts-view-heading"},[e._v("Status")]),s("div",{staticClass:"texts-view-responses texts-view-heading"},[e._v("Reply")]),e._l(e.message.deliveries,(function(t){return[s("div",{staticClass:"texts-view-name-num",on:{click:function(s){return e.onClick(t)}}},[s("div",{staticClass:"texts-view-recipient",domProps:{textContent:e._s(t.recipient)}}),s("div",{staticClass:"texts-view-number",domProps:{textContent:e._s(e.formatNumber(t))}})]),s("div",{staticClass:"texts-view-status-time"},[s("div",{staticClass:"texts-view-status",class:e.statusColor(t),domProps:{textContent:e._s(e.formatStatus(t))}}),s("div",{staticClass:"texts-view-time",domProps:{textContent:e._s(e.formatTimestamp(t))}})]),s("div",{staticClass:"texts-view-responses"},e._l(t.responses,(function(t){return s("div",[s("span",{staticClass:"texts-view-response-time",domProps:{textContent:e._s(t.timestamp.substr(11,8))}}),s("span",{domProps:{textContent:e._s(t.response)}})])})),0)]}))],2)]):s("div",{staticClass:"mt-3 ml-2"},[s("b-spinner",{attrs:{small:""}})],1)},i=[],r=s("a34a"),a=s.n(r);function o(e,t,s,n,i,r,a){try{var o=e[r](a),u=o.value}catch(c){return void s(c)}o.done?t(u):Promise.resolve(u).then(n,i)}function u(e){return function(){var t=this,s=arguments;return new Promise((function(n,i){var r=e.apply(t,s);function a(e){o(r,n,i,a,u,"next",e)}function u(e){o(r,n,i,a,u,"throw",e)}a(void 0)}))}}var c={data:function(){return{message:null}},created:function(){this.load()},methods:{onClick:function(e){(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i))&&e.number&&(window.location="sms:".concat(e.number.substr(2)))},formatNumber:function(e){return e.number?"".concat(e.number.substr(2,3),"-").concat(e.number.substr(5,3),"-").concat(e.number.substr(8,4)):""},formatStatus:function(e){if(e.responses&&e.responses.length)return"Replied";switch(e.status){case"queued":return"Queued";case"sending":return"Sending";case"sent":return"Sent";case"delivered":return"Delivered";case"undelivered":return"Not Delivered";case"failed":return"Failed";case"No Cell Phone":return"No Cell Phone";default:return"Pending"}},formatTimestamp:function(e){return e.responses&&e.responses.length?e.responses[e.responses.length-1].timestamp.substr(11,8):e.status&&"No Cell Phone"!==e.status?e.timestamp.substr(11,8):""},load:function(){var e=u(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get("/api/sms/".concat(this.$route.params.id));case 2:this.message=e.sent.data,this.message.deliveries.sort((function(e,t){return e.recipient<t.recipient?-1:e.recipient>t.recipient?1:0})),window.setTimeout(this.load,5e3);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),statusColor:function(e){if(e.responses&&e.responses.length)return"texts-view-delivery-replied";switch(e.status){case"queued":return"texts-view-delivery-pending";case"sent":return"texts-view-delivery-sent";case"sending":return"texts-view-delivery-pending";case"delivered":return"texts-view-delivery-delivered";case"undelivered":return"texts-view-delivery-failed";case"failed":return"texts-view-delivery-failed";case"No Cell Phone":return"texts-view-delivery-failed";default:return"texts-view-delivery-pending"}}}},d=c,l=(s("f9f2"),s("2877")),v=Object(l["a"])(d,n,i,!1,null,null,null);t["default"]=v.exports},"400b":function(e,t,s){},a34a:function(e,t,s){e.exports=s("96cf")},f9f2:function(e,t,s){"use strict";var n=s("400b"),i=s.n(n);i.a}}]);
//# sourceMappingURL=TextsView.ca7b98e9.js.map