{"version":3,"sources":["webpack:///./client/pages/event/EventEdit.vue?b652","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./client/pages/event/EventEdit.vue?5f53","webpack:///client/pages/event/EventEdit.vue","webpack:///./client/pages/event/EventEdit.vue?7c43","webpack:///./client/pages/event/EventEdit.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","event","attrs","on","$event","preventDefault","onSubmit","nameError","model","value","callback","$$v","$set","expression","dateError","timeError","_v","venues","scopedSlots","_u","key","fn","proxy","venue","id","venueNameError","ref","venueAddressError","venueCityError","venueURLError","_e","typeError","types","groupsError","groups","staticClass","valid","domProps","_s","onCancel","onDelete","staticRenderFns","props","onLoadEvent","Function","data","watch","name","address","city","url","validate","$nextTick","methods","submitted","date","start","end","startsWith","length","component"],"mappings":"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","file":"js/EventEdit.93420e7d.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventEdit.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventEdit.vue?vue&type=style&index=0&lang=stylus&\"","module.exports = require(\"regenerator-runtime\");\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.event)?_c('div',{staticClass:\"mt-3 ml-2\"},[_c('b-spinner',{attrs:{\"small\":\"\"}})],1):_c('form',{attrs:{\"id\":\"event-edit\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('b-form-group',{attrs:{\"label\":\"Event name\",\"label-for\":\"event-name\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\",\"state\":_vm.nameError ? false : null,\"invalid-feedback\":_vm.nameError}},[_c('b-input',{attrs:{\"id\":\"event-name\",\"autofocus\":\"\",\"state\":_vm.nameError ? false : null,\"trim\":\"\"},model:{value:(_vm.event.name),callback:function ($$v) {_vm.$set(_vm.event, \"name\", $$v)},expression:\"event.name\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Event date\",\"label-for\":\"event-date\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\",\"state\":_vm.dateError ? false : null,\"invalid-feedback\":_vm.dateError}},[_c('b-input',{attrs:{\"id\":\"event-date\",\"type\":\"date\",\"state\":_vm.dateError ? false : null},model:{value:(_vm.event.date),callback:function ($$v) {_vm.$set(_vm.event, \"date\", $$v)},expression:\"event.date\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Event time\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\",\"state\":_vm.timeError ? false : null,\"invalid-feedback\":_vm.timeError}},[_c('div',{attrs:{\"id\":\"event-time\"}},[_c('b-input',{attrs:{\"id\":\"event-start\",\"type\":\"time\",\"state\":_vm.timeError ? false : null},model:{value:(_vm.event.start),callback:function ($$v) {_vm.$set(_vm.event, \"start\", $$v)},expression:\"event.start\"}}),_c('span',[_vm._v(\"to\")]),_c('b-input',{attrs:{\"id\":\"event-end\",\"type\":\"time\",\"state\":_vm.timeError ? false : null},model:{value:(_vm.event.end),callback:function ($$v) {_vm.$set(_vm.event, \"end\", $$v)},expression:\"event.end\"}})],1)]),_c('b-form-group',{attrs:{\"label\":\"Location\",\"label-for\":\"event-venue\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\"}},[_c('b-select',{attrs:{\"id\":\"event-venue\",\"options\":_vm.venues,\"text-field\":\"name\",\"value-field\":\"id\"},scopedSlots:_vm._u([{key:\"first\",fn:function(){return [_c('b-select-option',{attrs:{\"value\":\"0\"}},[_vm._v(\"TBD\")])]},proxy:true}]),model:{value:(_vm.event.venue.id),callback:function ($$v) {_vm.$set(_vm.event.venue, \"id\", $$v)},expression:\"event.venue.id\"}},[_c('b-select-option',{attrs:{\"value\":\"NEW\"}},[_vm._v(\"(create a new venue)\")])],1)],1),(_vm.event.venue.id === 'NEW')?[_c('b-form-group',{attrs:{\"label\":\"Venue name\",\"label-for\":\"venue-name\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\",\"state\":_vm.venueNameError ? false : null,\"invalid-feedback\":_vm.venueNameError}},[_c('b-input',{ref:\"venueName\",attrs:{\"id\":\"venue-name\",\"state\":_vm.venueNameError ? false : null,\"trim\":\"\"},model:{value:(_vm.event.venue.name),callback:function ($$v) {_vm.$set(_vm.event.venue, \"name\", $$v)},expression:\"event.venue.name\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Address\",\"label-for\":\"venue-address\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\",\"state\":_vm.venueAddressError ? false : null,\"invalid-feedback\":_vm.venueAddressError}},[_c('b-input',{attrs:{\"id\":\"venue-address\",\"state\":_vm.venueAddressError ? false : null,\"trim\":\"\"},model:{value:(_vm.event.venue.address),callback:function ($$v) {_vm.$set(_vm.event.venue, \"address\", $$v)},expression:\"event.venue.address\"}})],1),_c('b-form-group',{attrs:{\"label\":\"City\",\"label-for\":\"venue-city\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\",\"state\":_vm.venueCityError ? false : null,\"invalid-feedback\":_vm.venueCityError}},[_c('b-input',{attrs:{\"id\":\"venue-city\",\"state\":_vm.venueCityError ? false : null,\"trim\":\"\"},model:{value:(_vm.event.venue.city),callback:function ($$v) {_vm.$set(_vm.event.venue, \"city\", $$v)},expression:\"event.venue.city\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Map URL\",\"label-for\":\"venue-url\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\",\"state\":_vm.venueURLError ? false : null,\"invalid-feedback\":_vm.venueURLError}},[_c('b-input',{attrs:{\"id\":\"venue-url\",\"state\":_vm.venueURLError ? false : null,\"trim\":\"\"},model:{value:(_vm.event.venue.url),callback:function ($$v) {_vm.$set(_vm.event.venue, \"url\", $$v)},expression:\"event.venue.url\"}}),_c('b-form-text',[_vm._v(\"Generate this by opening Google Maps and searching for the venue.\\n(Search by the venue’s name rather than its address, if it has a\\nname, so that Google’s sidebar of information about the venue\\nappears.)  Once the venue is found, zoom out a few steps until the\\nnearest freeways are shown — enough to give the viewer an idea of\\nwhere in the Bay Area the venue is.  Copy the URL from the browser\\naddress bar and paste it here.\")])],1)]:_vm._e(),_c('b-form-group',{attrs:{\"label\":\"Details\",\"label-for\":\"event-details\",\"label-cols-sm\":\"auto\",\"label-class\":\"event-edit-label\"}},[_c('b-textarea',{attrs:{\"id\":\"event-details\",\"rows\":\"3\"},model:{value:(_vm.event.details),callback:function ($$v) {_vm.$set(_vm.event, \"details\", $$v)},expression:\"event.details\"}}),_c('b-form-text',[_vm._v(\"This may contain HTML <a> tags for links, but no other tags.\")])],1),_c('b-form-group',{attrs:{\"label\":\"Event has these types:\",\"state\":_vm.typeError ? false : null,\"invalid-feedback\":_vm.typeError}},[_c('b-form-checkbox-group',{attrs:{\"stacked\":\"\",\"options\":_vm.types},model:{value:(_vm.event.types),callback:function ($$v) {_vm.$set(_vm.event, \"types\", $$v)},expression:\"event.types\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Event is for these groups:\",\"state\":_vm.groupsError ? false : null,\"invalid-feedback\":_vm.groupsError}},[_c('b-form-checkbox-group',{attrs:{\"stacked\":\"\",\"options\":_vm.groups,\"text-field\":\"name\",\"value-field\":\"id\"},model:{value:(_vm.event.groups),callback:function ($$v) {_vm.$set(_vm.event, \"groups\", $$v)},expression:\"event.groups\"}})],1),_c('div',{staticClass:\"mt-3\"},[_c('b-btn',{attrs:{\"type\":\"submit\",\"variant\":\"primary\",\"disabled\":!_vm.valid},domProps:{\"textContent\":_vm._s(_vm.event.id ? 'Save Event' : 'Create Event')}}),_c('b-btn',{staticClass:\"ml-2\",on:{\"click\":_vm.onCancel}},[_vm._v(\"Cancel\")]),(_vm.event.id)?_c('b-btn',{staticClass:\"ml-5\",attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.onDelete}},[_vm._v(\"Delete Event\")]):_vm._e()],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nEvent displays the event viewing/editing page.\n-->\n\n<template lang=\"pug\">\ndiv.mt-3.ml-2(v-if=\"!event\")\n  b-spinner(small)\nform#event-edit(v-else @submit.prevent=\"onSubmit\")\n  b-form-group(label=\"Event name\" label-for=\"event-name\" label-cols-sm=\"auto\" label-class=\"event-edit-label\" :state=\"nameError ? false : null\" :invalid-feedback=\"nameError\")\n    b-input#event-name(autofocus :state=\"nameError ? false : null\" trim v-model=\"event.name\")\n  b-form-group(label=\"Event date\" label-for=\"event-date\" label-cols-sm=\"auto\" label-class=\"event-edit-label\" :state=\"dateError ? false : null\" :invalid-feedback=\"dateError\")\n    b-input#event-date(type=\"date\" :state=\"dateError ? false : null\" v-model=\"event.date\")\n  b-form-group(label=\"Event time\" label-cols-sm=\"auto\" label-class=\"event-edit-label\" :state=\"timeError ? false : null\" :invalid-feedback=\"timeError\")\n    #event-time\n      b-input#event-start(type=\"time\" :state=\"timeError ? false : null\" v-model=\"event.start\")\n      span to\n      b-input#event-end(type=\"time\" :state=\"timeError ? false : null\" v-model=\"event.end\")\n  b-form-group(label=\"Location\" label-for=\"event-venue\" label-cols-sm=\"auto\" label-class=\"event-edit-label\")\n    b-select#event-venue(v-model=\"event.venue.id\" :options=\"venues\" text-field=\"name\" value-field=\"id\")\n      template(v-slot:first)\n        b-select-option(value=\"0\") TBD\n      b-select-option(value=\"NEW\") (create a new venue)\n  template(v-if=\"event.venue.id === 'NEW'\")\n    b-form-group(label=\"Venue name\" label-for=\"venue-name\" label-cols-sm=\"auto\" label-class=\"event-edit-label\" :state=\"venueNameError ? false : null\" :invalid-feedback=\"venueNameError\")\n      b-input#venue-name(ref=\"venueName\" :state=\"venueNameError ? false : null\" trim v-model=\"event.venue.name\")\n    b-form-group(label=\"Address\" label-for=\"venue-address\" label-cols-sm=\"auto\" label-class=\"event-edit-label\" :state=\"venueAddressError ? false : null\" :invalid-feedback=\"venueAddressError\")\n      b-input#venue-address(:state=\"venueAddressError ? false : null\" trim v-model=\"event.venue.address\")\n    b-form-group(label=\"City\" label-for=\"venue-city\" label-cols-sm=\"auto\" label-class=\"event-edit-label\" :state=\"venueCityError ? false : null\" :invalid-feedback=\"venueCityError\")\n      b-input#venue-city(:state=\"venueCityError ? false : null\" trim v-model=\"event.venue.city\")\n    b-form-group(label=\"Map URL\" label-for=\"venue-url\" label-cols-sm=\"auto\" label-class=\"event-edit-label\" :state=\"venueURLError ? false : null\" :invalid-feedback=\"venueURLError\")\n      b-input#venue-url(:state=\"venueURLError ? false : null\" trim v-model=\"event.venue.url\")\n      b-form-text\n        | Generate this by opening Google Maps and searching for the venue.\n        | (Search by the venue’s name rather than its address, if it has a\n        | name, so that Google’s sidebar of information about the venue\n        | appears.)  Once the venue is found, zoom out a few steps until the\n        | nearest freeways are shown — enough to give the viewer an idea of\n        | where in the Bay Area the venue is.  Copy the URL from the browser\n        | address bar and paste it here.\n  b-form-group(label=\"Details\" label-for=\"event-details\" label-cols-sm=\"auto\" label-class=\"event-edit-label\")\n    b-textarea#event-details(v-model=\"event.details\" rows=\"3\")\n    b-form-text\n      | This may contain HTML &lt;a&gt; tags for links, but no other tags.\n  b-form-group(label=\"Event has these types:\" :state=\"typeError ? false : null\" :invalid-feedback=\"typeError\")\n    b-form-checkbox-group(stacked :options=\"types\" v-model=\"event.types\")\n  b-form-group(label=\"Event is for these groups:\" :state=\"groupsError ? false : null\" :invalid-feedback=\"groupsError\")\n    b-form-checkbox-group(stacked :options=\"groups\" text-field=\"name\" value-field=\"id\" v-model=\"event.groups\")\n  div.mt-3\n    b-btn(type=\"submit\" variant=\"primary\" :disabled=\"!valid\" v-text=\"event.id ? 'Save Event' : 'Create Event'\")\n    b-btn.ml-2(@click=\"onCancel\") Cancel\n    b-btn.ml-5(v-if=\"event.id\" variant=\"danger\" @click=\"onDelete\") Delete Event\n</template>\n\n<script>\nexport default {\n  props: {\n    onLoadEvent: Function,\n  },\n  data: () => ({\n    event: null,\n    groups: null,\n    venues: null,\n    types: null,\n    submitted: false,\n    dateError: null,\n    timeError: null,\n    nameError: null,\n    duplicateName: null,\n    venueNameError: null,\n    venueAddressError: null,\n    venueCityError: null,\n    venueURLError: null,\n    typeError: null,\n    groupsError: null,\n    valid: true,\n  }),\n  watch: {\n    'event.name': 'validate',\n    'event.date': 'validate',\n    'event.start': 'validate',\n    'event.end': 'validate',\n    'event.venue.name': 'validate',\n    'event.venue.address': 'validate',\n    'event.venue.city': 'validate',\n    'event.venue.url': 'validate',\n    'event.types': 'validate',\n    'event.groups': 'validate',\n    'event.venue.id'() {\n      if (this.event.venue.id === 'NEW') {\n        this.event.venue.name = this.event.venue.address = this.event.venue.city = this.event.venue.url = ''\n        this.validate()\n        this.$nextTick(() => { this.$refs.venueName.focus() })\n      }\n    },\n  },\n  async created() {\n    const data = (await this.$axios.get(`/api/events/${this.$route.params.id}?edit=1`)).data\n    this.event = data.event\n    this.groups = data.groups\n    this.venues = data.venues\n    this.types = data.types\n    this.onLoadEvent(this.event)\n  },\n  methods: {\n    onCancel() { this.$router.go(-1) },\n    async onDelete() {\n      const resp = await this.$bvModal.msgBoxConfirm(\n        'Are you sure you want to delete this event?  All associated data, including attendance records, will be permanently lost.', {\n        title: 'Delete Event', headerBgVariant: 'danger', headerTextVariant: 'white',\n        okTitle: 'Delete', okVariant: 'danger', cancelTitle: 'Keep',\n      }).catch(err => { })\n      if (!resp) return\n      const body = new FormData\n      body.append('delete', 'true')\n      await this.$axios.post(`/api/events/${this.$route.params.id}`, body)\n      this.$router.push({ path: '/events', params: { year: this.event.date.substr(0, 4) } })\n    },\n    async onSubmit() {\n      this.submitted = true\n      this.validate()\n      if (!this.valid) return\n      const body = new FormData\n      body.append('name', this.event.name)\n      body.append('date', this.event.date)\n      body.append('start', this.event.start)\n      body.append('end', this.event.end)\n      body.append('venue', this.event.venue.id)\n      if (this.event.venue.id === 'NEW') {\n        body.append('venueName', this.event.venue.name)\n        body.append('venueAddress', this.event.venue.address)\n        body.append('venueCity', this.event.venue.city)\n        body.append('venueURL', this.event.venue.url)\n      }\n      body.append('details', this.event.details)\n      this.event.types.forEach(t => { body.append('type', t) })\n      this.event.groups.forEach(r => { body.append('group', r) })\n      const resp = (await this.$axios.post(`/api/events/${this.$route.params.id}`, body)).data\n      if (resp && resp.nameError)\n        this.duplicateName = { date: this.event.date, name: this.event.name }\n      else if (resp)\n        this.$router.push(`/events/${resp.id}`)\n    },\n    validate() {\n      if (!this.submitted) return\n      if (!this.event.name)\n        this.nameError = 'The event name is required.'\n      else if (this.duplicateName && this.duplicateName.date === this.event.date && this.duplicateName.name === this.event.name)\n        this.nameError = 'Another event on this date has this name.'\n      else\n        this.nameError = this.duplicateName = null\n      if (!this.event.date)\n        this.dateError = 'The event date is required.'\n      else if (!this.event.date.match(/^20\\d\\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/))\n        this.dateError = 'This is not a valid date.'\n      else\n        this.dateError = null\n      if (!this.event.start || !this.event.end)\n        this.timeError = 'The event times are required.'\n      else if (!this.event.start.match(/^(?:[01][0-9]|2[0-3]):[0-5][0-9]$/))\n        this.timeError = 'The start time is not valid.'\n      else if (!this.event.end.match(/^(?:[01][0-9]|2[0-3]):[0-5][0-9]$/))\n        this.timeError = 'The end time is not valid.'\n      else if (this.event.end < this.event.start)\n        this.timeError = 'The end time must come after the start time.'\n      else\n        this.timeError = null\n      if (this.event.venue.id === 'NEW') {\n        if (!this.event.venue.name)\n          this.venueNameError = 'The venue name is required.'\n        else\n          this.venueNameError = null\n        if (!this.event.venue.address)\n          this.venueAddressError = 'The venue address is required.'\n        else\n          this.venueAddressError = null\n        if (!this.event.venue.city)\n          this.venueCityError = 'The venue city is required.'\n        else\n          this.venueCityError = null\n        if (this.event.venue.url && !this.event.venue.url.startsWith('https://www.google.com/maps/'))\n          this.venueURLError = 'The venue map URL must start with https://www.google.com/maps/.'\n        else\n          this.venueURLError = null\n      } else\n        this.venueNameError = this.venueAddressError = this.venueCityError = this.venueURLError = null\n      if (!this.event.types.length)\n        this.typeError = 'At least one event type is required.'\n      else\n        this.typeError = null\n      if (!this.event.groups.length)\n        this.groupsError = 'At least one group must be selected.'\n      else\n        this.groupsError = null\n      this.valid = !this.nameError && !this.dateError && !this.timeError && !this.venueNameError && !this.venueAddressError &&\n        !this.venueCityError && !this.venueURLError && !this.typeError && !this.groupsError\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n#event-edit\n  padding 1.5rem 0.75rem\n.event-edit-label\n  width 7rem\n#event-date, #event-name, #event-type, #event-groups, #venue-name, #venue-address, #venue-city, #venue-url, #event-details\n  min-width 14rem\n  max-width 20rem\n#event-venue\n  min-width 14rem\n  width auto\n#event-time\n  display flex\n  align-items baseline\n  min-width 14rem\n  max-width 20rem\n  span\n    padding 0 0.5rem\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EventEdit.vue?vue&type=template&id=0ac1b525&lang=pug&\"\nimport script from \"./EventEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./EventEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventEdit.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}