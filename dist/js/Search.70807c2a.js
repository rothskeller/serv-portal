(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Search"],{a34a:function(t,e,s){t.exports=s("96cf")},b4df:function(t,e,s){"use strict";var r=s("cc1d"),n=s.n(r);n.a},cc1d:function(t,e,s){},e462:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"search"}},[s("form",{attrs:{id:"search-form"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{attrs:{id:"search-query-row"}},[s("b-form-input",{attrs:{id:"search-query",autofocus:""},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),s("b-btn",{attrs:{type:"submit",variant:"primary"}},[t._v("Search")])],1)]),t.error?s("div",{attrs:{id:"search-error"},domProps:{textContent:t._s(t.error)}}):t._e(),s("div",{attrs:{id:"search-results"}},[t.groups.length?[s("div",{staticClass:"search-result-type"},[t._v("Groups")]),t._l(t.groups,(function(e){return s("div",{staticClass:"search-result"},[s("b-link",{attrs:{to:"/people/list?group="+e.id}},[t._v(t._s(e.name))])],1)}))]:t._e(),t.people.length?[s("div",{staticClass:"search-result-type"},[t._v("People")]),t._l(t.people,(function(e){return s("div",{staticClass:"search-result"},[s("b-link",{attrs:{to:"/people/"+e.id}},[t._v(t._s(e.informalName))])],1)}))]:t._e(),t.events.length?[s("div",{staticClass:"search-result-type"},[t._v("Events")]),t._l(t.events,(function(e){return s("div",{staticClass:"search-result"},[s("b-link",{attrs:{to:"/events/"+e.id}},[t._v(t._s(e.date)+" "+t._s(e.name))])],1)}))]:t._e(),t.folders.length?[s("div",{staticClass:"search-result-type"},[t._v("Folders")]),t._l(t.folders,(function(e){return s("div",{staticClass:"search-result"},[s("b-link",{attrs:{to:"/files/"+e.id}},[t._v(t._s(e.name))]),e.path.length?s("span",{staticClass:"search-result-path",domProps:{textContent:t._s(t.resultPath(e))}}):t._e()],1)}))]:t._e(),t.documents.length?[s("div",{staticClass:"search-result-type"},[t._v("Files")]),t._l(t.documents,(function(e){return s("div",{staticClass:"search-result"},[e.name.endsWith(".pdf")?s("b-link",{attrs:{href:"/api/folders/"+e.folderID+"/"+e.documentID,target:"_blank"}},[t._v(t._s(e.name))]):s("b-link",{attrs:{href:"/api/folders/"+e.folderID+"/"+e.documentID,download:""}},[t._v(t._s(e.name))]),s("span",{staticClass:"search-result-path",domProps:{textContent:t._s(t.resultPath(e))}})],1)}))]:t._e(),t.textMessages.length?[s("div",{staticClass:"search-result-type"},[t._v("Text Messages")]),t._l(t.textMessages,(function(e){return s("div",{staticClass:"search-result"},[s("b-link",{attrs:{to:"/texts/"+e.id}},[t._v("From "+t._s(e.sender)+" on "+t._s(e.timestamp.substr(0,10)))])],1)}))]:t._e(),!t.submitted||t.error||t.groups.length||t.people.length||t.events.length||t.folders.length||t.documents.length||t.textMessages.length?t._e():s("div",{staticClass:"search-result"},[t._v("No results found.")])],2)])},n=[],i=s("a34a"),a=s.n(i);function u(t,e,s,r,n,i,a){try{var u=t[i](a),o=u.value}catch(l){return void s(l)}u.done?e(o):Promise.resolve(o).then(r,n)}function o(t){return function(){var e=this,s=arguments;return new Promise((function(r,n){var i=t.apply(e,s);function a(t){u(i,r,n,a,o,"next",t)}function o(t){u(i,r,n,a,o,"throw",t)}a(void 0)}))}}var l={data:function(){return{query:null,error:null,documents:[],events:[],folders:[],groups:[],people:[],textMessages:[],submitted:!1}},mounted:function(){this.$store.commit("setPage",{title:"Search"}),this.query=this.$route.query.q,this.query&&this.onSubmit()},methods:{onSubmit:function(){var t=o(a.a.mark((function t(){var e;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.query=this.query.trim(),this.query){t.next=5;break}return this.documents=this.events=this.folders=this.groups=this.people=this.textMessages=[],this.error=null,t.abrupt("return");case 5:return this.query!==this.$route.query.q&&this.$router.replace({path:"/search",query:{q:this.query}}),t.next=8,this.$axios.get("/api/search",{params:{q:this.query}});case 8:e=t.sent.data,this.error=e.error,this.documents=e.results.filter((function(t){return"document"===t.type})),this.events=e.results.filter((function(t){return"event"===t.type})),this.folders=e.results.filter((function(t){return"folder"===t.type})),this.groups=e.results.filter((function(t){return"group"===t.type})),this.people=e.results.filter((function(t){return"person"===t.type})),this.textMessages=e.results.filter((function(t){return"textMessage"===t.type})),this.submitted=!0;case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),resultPath:function(t){return"in "+t.path.join(" > ")}}},c=l,h=(s("b4df"),s("2877")),d=Object(h["a"])(c,r,n,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=Search.70807c2a.js.map