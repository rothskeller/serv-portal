{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./client/pages/Search.vue?e254","webpack:///./client/pages/Search.vue?78e8","webpack:///client/pages/Search.vue","webpack:///./client/pages/Search.vue?dfc6","webpack:///./client/pages/Search.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","preventDefault","onSubmit","model","value","callback","$$v","query","expression","_v","domProps","_s","error","_e","groups","staticClass","_l","g","name","people","p","informalName","events","e","date","folders","f","path","resultPath","documents","d","endsWith","textMessages","tm","sender","timestamp","substr","length","staticRenderFns","data","mounted","$store","commit","$route","q","methods","result","join","component"],"mappings":"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","file":"js/Search.8c1ba6fb.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"search\"}},[_c('form',{attrs:{\"id\":\"search-form\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{attrs:{\"id\":\"search-query-row\"}},[_c('b-form-input',{attrs:{\"id\":\"search-query\",\"autofocus\":\"\"},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}}),_c('b-btn',{attrs:{\"type\":\"submit\",\"variant\":\"primary\"}},[_vm._v(\"Search\")])],1)]),(_vm.error)?_c('div',{attrs:{\"id\":\"search-error\"},domProps:{\"textContent\":_vm._s(_vm.error)}}):_vm._e(),_c('div',{attrs:{\"id\":\"search-results\"}},[(_vm.groups.length)?[_c('div',{staticClass:\"search-result-type\"},[_vm._v(\"Groups\")]),_vm._l((_vm.groups),function(g){return _c('div',{staticClass:\"search-result\"},[_c('b-link',{attrs:{\"to\":(\"/people/list?group=\" + (g.id))}},[_vm._v(_vm._s(g.name))])],1)})]:_vm._e(),(_vm.people.length)?[_c('div',{staticClass:\"search-result-type\"},[_vm._v(\"People\")]),_vm._l((_vm.people),function(p){return _c('div',{staticClass:\"search-result\"},[_c('b-link',{attrs:{\"to\":(\"/people/\" + (p.id))}},[_vm._v(_vm._s(p.informalName))])],1)})]:_vm._e(),(_vm.events.length)?[_c('div',{staticClass:\"search-result-type\"},[_vm._v(\"Events\")]),_vm._l((_vm.events),function(e){return _c('div',{staticClass:\"search-result\"},[_c('b-link',{attrs:{\"to\":(\"/events/\" + (e.id))}},[_vm._v(_vm._s(e.date)+\" \"+_vm._s(e.name))])],1)})]:_vm._e(),(_vm.folders.length)?[_c('div',{staticClass:\"search-result-type\"},[_vm._v(\"Folders\")]),_vm._l((_vm.folders),function(f){return _c('div',{staticClass:\"search-result\"},[_c('b-link',{attrs:{\"to\":(\"/files/\" + (f.id))}},[_vm._v(_vm._s(f.name))]),(f.path.length)?_c('span',{staticClass:\"search-result-path\",domProps:{\"textContent\":_vm._s(_vm.resultPath(f))}}):_vm._e()],1)})]:_vm._e(),(_vm.documents.length)?[_c('div',{staticClass:\"search-result-type\"},[_vm._v(\"Files\")]),_vm._l((_vm.documents),function(d){return _c('div',{staticClass:\"search-result\"},[(d.name.endsWith('.pdf'))?_c('b-link',{attrs:{\"href\":(\"/api/folders/\" + (d.folderID) + \"/\" + (d.documentID)),\"target\":\"_blank\"}},[_vm._v(_vm._s(d.name))]):_c('b-link',{attrs:{\"href\":(\"/api/folders/\" + (d.folderID) + \"/\" + (d.documentID)),\"download\":\"\"}},[_vm._v(_vm._s(d.name))]),_c('span',{staticClass:\"search-result-path\",domProps:{\"textContent\":_vm._s(_vm.resultPath(d))}})],1)})]:_vm._e(),(_vm.textMessages.length)?[_c('div',{staticClass:\"search-result-type\"},[_vm._v(\"Text Messages\")]),_vm._l((_vm.textMessages),function(tm){return _c('div',{staticClass:\"search-result\"},[_c('b-link',{attrs:{\"to\":(\"/texts/\" + (tm.id))}},[_vm._v(\"From \"+_vm._s(tm.sender)+\" on \"+_vm._s(tm.timestamp.substr(0, 10)))])],1)})]:_vm._e(),(!_vm.error && !_vm.groups.length && !_vm.people.length && !_vm.events.length && !_vm.folders.length && !_vm.documents.length && !_vm.textMessages.length)?_c('div',{staticClass:\"search-result\"},[_vm._v(\"No results found.\")]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nSearch displays the search page.\n-->\n\n<template lang=\"pug\">\n#search\n  form#search-form(@submit.prevent=\"onSubmit\")\n    #search-query-row\n      b-form-input#search-query(autofocus v-model=\"query\")\n      b-btn(type=\"submit\" variant=\"primary\") Search\n  #search-error(v-if=\"error\" v-text=\"error\")\n  #search-results\n    template(v-if=\"groups.length\")\n      .search-result-type Groups\n      .search-result(v-for=\"g in groups\")\n        b-link(:to=\"`/people/list?group=${g.id}`\") {{g.name}}\n    template(v-if=\"people.length\")\n      .search-result-type People\n      .search-result(v-for=\"p in people\")\n        b-link(:to=\"`/people/${p.id}`\") {{p.informalName}}\n    template(v-if=\"events.length\")\n      .search-result-type Events\n      .search-result(v-for=\"e in events\")\n        b-link(:to=\"`/events/${e.id}`\") {{e.date}} {{e.name}}\n    template(v-if=\"folders.length\")\n      .search-result-type Folders\n      .search-result(v-for=\"f in folders\")\n        b-link(:to=\"`/files/${f.id}`\") {{f.name}}\n        span.search-result-path(v-if=\"f.path.length\" v-text=\"resultPath(f)\")\n    template(v-if=\"documents.length\")\n      .search-result-type Files\n      .search-result(v-for=\"d in documents\")\n        b-link(v-if=\"d.name.endsWith('.pdf')\" :href=\"`/api/folders/${d.folderID}/${d.documentID}`\" target=\"_blank\") {{d.name}}\n        b-link(v-else :href=\"`/api/folders/${d.folderID}/${d.documentID}`\" download) {{d.name}}\n        span.search-result-path(v-text=\"resultPath(d)\")\n    template(v-if=\"textMessages.length\")\n      .search-result-type Text Messages\n      .search-result(v-for=\"tm in textMessages\")\n        b-link(:to=\"`/texts/${tm.id}`\") From {{tm.sender}} on {{tm.timestamp.substr(0, 10)}}\n    .search-result(v-if=\"!error && !groups.length && !people.length && !events.length && !folders.length && !documents.length && !textMessages.length\") No results found.\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    query: null,\n    error: null,\n    documents: [],\n    events: [],\n    folders: [],\n    groups: [],\n    people: [],\n    textMessages: [],\n  }),\n  mounted() {\n    this.$store.commit('setPage', { title: 'Search' })\n    this.query = this.$route.query.q\n    if (this.query) this.onSubmit()\n  },\n  methods: {\n    async onSubmit() {\n      this.query = this.query.trim()\n      if (!this.query) {\n        this.documents = this.events = this.folders = this.groups = this.people = this.textMessages = []\n        this.error = null\n        return\n      }\n      if (this.query !== this.$route.query.q)\n        this.$router.replace({ path: '/search', query: { q: this.query } })\n      const resp = (await this.$axios.get('/api/search', { params: { q: this.query } })).data\n      this.error = resp.error\n      this.documents = resp.results.filter(r => r.type === 'document')\n      this.events = resp.results.filter(r => r.type === 'event')\n      this.folders = resp.results.filter(r => r.type === 'folder')\n      this.groups = resp.results.filter(r => r.type === 'group')\n      this.people = resp.results.filter(r => r.type === 'person')\n      this.textMessages = resp.results.filter(r => r.type === 'textMessage')\n    },\n    resultPath(result) {\n      return 'in ' + result.path.join(' > ')\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n#search-query-row\n  text-align center\n#search-query\n  display inline\n  margin-right 0.25rem\n  width 10rem\n  vertical-align bottom\n#search-error\n  margin-top 0.75rem\n  color red\n  text-align center\n#search-results\n  margin-top 0.75rem\n.search-result-type\n  padding-top 0.75rem\n  text-decoration underline\n.search-result\n  margin-left 2rem\n  text-indent -2rem\n  line-height 1.2\n.search-result-path\n  padding-left 1rem\n  font-style italic\n  font-size 0.75rem\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=7d1f276e&lang=pug&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}