{"version":3,"sources":["webpack:///./client/pages/texts/TextsView.vue?aaea","webpack:///client/pages/texts/TextsView.vue","webpack:///./client/pages/texts/TextsView.vue?cca2","webpack:///./client/pages/texts/TextsView.vue","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./client/pages/texts/TextsView.vue?30ab"],"names":["render","_vm","this","_h","$createElement","_c","_self","message","attrs","staticClass","_v","domProps","_s","timestamp","sender","_l","g","d","on","$event","onClick","recipient","formatNumber","class","statusColor","formatStatus","formatTimestamp","r","substr","response","staticRenderFns","data","created","load","methods","navigator","userAgent","match","number","window","location","responses","length","status","component","module","exports"],"mappings":"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","file":"js/TextsView.5ed4d2cb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.message)?_c('div',{staticClass:\"mt-3 ml-2\"},[_c('b-spinner',{attrs:{\"small\":\"\"}})],1):_c('div',{attrs:{\"id\":\"texts-view\"}},[_c('div',{attrs:{\"id\":\"texts-view-meta\"}},[_c('div',{staticClass:\"texts-view-meta-label\"},[_vm._v(\"Message sent\")]),_c('div',{staticClass:\"texts-view-meta\",domProps:{\"textContent\":_vm._s(_vm.message.timestamp)}}),_c('div',{staticClass:\"texts-view-meta-label\"},[_vm._v(\"Sent by\")]),_c('div',{staticClass:\"texts-view-meta\",domProps:{\"textContent\":_vm._s(_vm.message.sender)}}),_c('div',{staticClass:\"texts-view-meta-label\"},[_vm._v(\"Sent to\")]),_c('div',{staticClass:\"texts-view-meta\"},_vm._l((_vm.message.groups),function(g){return _c('div',{domProps:{\"textContent\":_vm._s(g)}})}),0),_c('div',{staticClass:\"texts-view-meta-label\"},[_vm._v(\"Message text\")]),_c('div',{staticClass:\"texts-view-meta\",domProps:{\"textContent\":_vm._s(_vm.message.message)}})]),_c('div',{attrs:{\"id\":\"texts-view-deliveries\"}},[_c('div',{staticClass:\"texts-view-name-num texts-view-heading\"},[_vm._v(\"Recipient\")]),_c('div',{staticClass:\"texts-view-status-time texts-view-heading\"},[_vm._v(\"Status\")]),_c('div',{staticClass:\"texts-view-responses texts-view-heading\"},[_vm._v(\"Reply\")]),_vm._l((_vm.message.deliveries),function(d){return [_c('div',{staticClass:\"texts-view-name-num\",on:{\"click\":function($event){return _vm.onClick(d)}}},[_c('div',{staticClass:\"texts-view-recipient\",domProps:{\"textContent\":_vm._s(d.recipient)}}),_c('div',{staticClass:\"texts-view-number\",domProps:{\"textContent\":_vm._s(_vm.formatNumber(d))}})]),_c('div',{staticClass:\"texts-view-status-time\"},[_c('div',{staticClass:\"texts-view-status\",class:_vm.statusColor(d),domProps:{\"textContent\":_vm._s(_vm.formatStatus(d))}}),_c('div',{staticClass:\"texts-view-time\",domProps:{\"textContent\":_vm._s(_vm.formatTimestamp(d))}})]),_c('div',{staticClass:\"texts-view-responses\"},_vm._l((d.responses),function(r){return _c('div',[_c('span',{staticClass:\"texts-view-response-time\",domProps:{\"textContent\":_vm._s(r.timestamp.substr(11, 8))}}),_c('span',{domProps:{\"textContent\":_vm._s(r.response)}})])}),0)]})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nTextsView displays the status of an outgoing text message, including its\ndeliveries and replies.\n-->\n\n<template lang=\"pug\">\ndiv.mt-3.ml-2(v-if=\"!message\")\n  b-spinner(small)\n#texts-view(v-else)\n  #texts-view-meta\n    .texts-view-meta-label Message sent\n    .texts-view-meta(v-text=\"message.timestamp\")\n    .texts-view-meta-label Sent by\n    .texts-view-meta(v-text=\"message.sender\")\n    .texts-view-meta-label Sent to\n    .texts-view-meta\n      div(v-for=\"g in message.groups\" v-text=\"g\")\n    .texts-view-meta-label Message text\n    .texts-view-meta(v-text=\"message.message\")\n  #texts-view-deliveries\n    .texts-view-name-num.texts-view-heading Recipient\n    .texts-view-status-time.texts-view-heading Status\n    .texts-view-responses.texts-view-heading Reply\n    template(v-for=\"d in message.deliveries\")\n      .texts-view-name-num(@click=\"onClick(d)\")\n        .texts-view-recipient(v-text=\"d.recipient\")\n        .texts-view-number(v-text=\"formatNumber(d)\")\n      .texts-view-status-time\n        .texts-view-status(:class=\"statusColor(d)\" v-text=\"formatStatus(d)\")\n        .texts-view-time(v-text=\"formatTimestamp(d)\")\n      .texts-view-responses\n        div(v-for=\"r in d.responses\")\n          span.texts-view-response-time(v-text=\"r.timestamp.substr(11, 8)\")\n          span(v-text=\"r.response\")\n</template>\n\n<script>\nexport default {\n  data: () => ({ message: null }),\n  created() {\n    this.load()\n  },\n  methods: {\n    onClick(d) {\n      if (!navigator.userAgent.match(/Android/i) && !navigator.userAgent.match(/iPhone/i)) return\n      if (!d.number) return\n      window.location = `sms:${d.number.substr(2)}`\n    },\n    formatNumber(d) {\n      if (!d.number) return ''\n      return `${d.number.substr(2, 3)}-${d.number.substr(5, 3)}-${d.number.substr(8, 4)}`\n    },\n    formatStatus(d) {\n      if (d.responses && d.responses.length) return 'Replied'\n      switch (d.status) {\n        case 'queued': return 'Queued'\n        case 'sending': return 'Sending'\n        case 'sent': return 'Sent'\n        case 'delivered': return 'Delivered'\n        case 'undelivered': return 'Not Delivered'\n        case 'failed': return 'Failed'\n        case 'No Cell Phone': return 'No Cell Phone'\n        default: return 'Pending'\n      }\n    },\n    formatTimestamp(d) {\n      if (d.responses && d.responses.length) return d.responses[d.responses.length - 1].timestamp.substr(11, 8)\n      if (!d.status || d.status === 'No Cell Phone') return ''\n      return d.timestamp.substr(11, 8)\n    },\n    async load() {\n      this.message = (await this.$axios.get(`/api/sms/${this.$route.params.id}`)).data\n      this.message.deliveries.sort((a, b) => (a.recipient < b.recipient ? -1 : a.recipient > b.recipient ? +1 : 0))\n      window.setTimeout(this.load, 5000)\n    },\n    statusColor(d) {\n      if (d.responses && d.responses.length) return 'texts-view-delivery-replied'\n      switch (d.status) {\n        case 'queued': return 'texts-view-delivery-pending'\n        case 'sent': return 'texts-view-delivery-sent'\n        case 'sending': return 'texts-view-delivery-pending'\n        case 'delivered': return 'texts-view-delivery-delivered'\n        case 'undelivered': return 'texts-view-delivery-failed'\n        case 'failed': return 'texts-view-delivery-failed'\n        case 'No Cell Phone': return 'texts-view-delivery-failed'\n        default: return 'texts-view-delivery-pending'\n      }\n    },\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n#texts-view\n  display flex\n  flex-direction column\n  padding 0.75rem\n  height 100%\n#texts-view-meta\n  display grid\n  flex none\n  line-height 1.2\n  grid auto / 8rem 1fr\n#texts-view-deliveries\n  display grid\n  justify-content start\n  align-items start\n  margin-top 1rem\n  min-width 0\n  width 100%\n  line-height 1.2\n  grid unquote('auto / minmax(1fr, 12rem) 7rem')\n  @media (min-width: 576px)\n    grid auto / 12rem 7rem 1fr\n.texts-view-heading\n  font-weight bold\n  &:nth-child(3)\n    display none\n    @media (min-width: 576px)\n      display block\n.texts-view-delivery-pending\n  color #888\n.texts-view-delivery-failed\n  background-color #e6194b\n  color white\n.texts-view-delivery-delivered\n  background-color #808000\n  color white\n.texts-view-delivery-replied\n  background-color #3cb44b\n  color white\n.texts-view-delivery-sent\n  background-color #9a6324\n  color white\n.texts-view-name-num\n  overflow hidden\n  margin-top 0.75rem\n  padding-right 0.5rem\n.texts-view-recipient\n  overflow hidden\n  text-overflow ellipsis\n  white-space nowrap\n.texts-view-number\n  color #888\n  font-size 0.75rem\n.texts-view-status-time\n  margin-top 0.75rem\n.texts-view-status\n  padding-left 2px\n.texts-view-time\n  color #888\n  font-size 0.75rem\n.texts-view-responses\n  margin-left 4rem\n  text-indent -2rem\n  grid-column 1 / 3\n  @media (min-width: 576px)\n    margin-top 0.75rem\n    margin-left 1.5rem\n    text-indent -1rem\n    grid-column 3 / 4\n.texts-view-response-time\n  display none\n  color #888\n  font-variant tabular-nums\n  font-size 0.75rem\n  &::before\n    content '['\n  &::after\n    content '] '\n  @media (min-width: 800px)\n    display inline\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextsView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextsView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextsView.vue?vue&type=template&id=c23fd788&lang=pug&\"\nimport script from \"./TextsView.vue?vue&type=script&lang=js&\"\nexport * from \"./TextsView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextsView.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = require(\"regenerator-runtime\");\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextsView.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextsView.vue?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}