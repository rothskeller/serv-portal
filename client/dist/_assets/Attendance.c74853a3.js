let e=document.createElement("style");e.innerHTML="#attrep-params{margin-bottom:1.5rem}#attrep-params td:first-child{padding-right:1rem}@media print{#attrep-params{display:none}}#attrep{margin:1.5rem .75rem;overflow-x:auto}.attrep-col-h{border-left:2px solid #888}.attrep-col-h2{border-left:1px solid #ccc}.attrep-col-s{border-left:2px solid #888}.attrep-col-c{border-left:1px solid #ccc}.attrep-col-t{border-left:1px solid #ccc;border-right:2px solid #888}.attrep-col-1{border-left:2px solid #888;border-right:2px solid #888}.attrep-row-h,.attrep-row-s,.attrep-row-t{border-top:2px solid #888}.attrep-row-h2{border-top:1px solid #ccc}.attrep-row-t{border-bottom:2px solid #888}.attrep-row-c2,.attrep-row-tc2{background-color:#eee}.attrep-row-h2>.attrep-col-h,.attrep-row-h2>.attrep-col-h2,.attrep-row-h>.attrep-col-h,.attrep-row-h>.attrep-col-h2{border-left:hidden;border-top:hidden}.attrep-row-h>.attrep-col-1,.attrep-row-h>.attrep-col-c,.attrep-row-h>.attrep-col-s,.attrep-row-h>.attrep-col-t{text-align:right;vertical-align:bottom;padding-right:.5rem}.attrep-vertical{-ms-writing-mode:tb-rl;writing-mode:vertical-rl;font-variant-numeric:tabular-nums;line-height:1;width:100%;padding-top:.5rem;padding-bottom:.5rem}.attrep-col-1,.attrep-col-c,.attrep-col-s,.attrep-col-t{padding-right:.5rem;min-width:4rem;text-align:right;font-variant-numeric:tabular-nums}.attrep-col-h,.attrep-col-h2{padding-left:.5rem;padding-right:.5rem;white-space:nowrap}.attrep-col-t,.attrep-row-t{font-weight:700}",document.head.appendChild(e);import{d as t,Z as l,a6 as a,a7 as o,Q as r,f as n,q as s,C as p,v as d,x as i,_ as u,r as c,c as m,a as v,b as g,t as h,F as w,g as b,z as y,o as V}from"./index.9d4b30ca.js";import{s as f}from"./page.010f3c62.js";const x=[{value:"p",label:"Person"},{value:"o",label:"Org"},{value:"po",label:"Person, Org"},{value:"op",label:"Org, Person"}],S=[{value:"e",label:"Events"},{value:"m",label:"Months"}],T=[{value:"h",label:"Cumulative Hours"},{value:"c",label:"Attendance Counts"}];var C=t({components:{SCheck:l,SCheckGroup:a,SRadioGroup:o,SSelect:r},setup(){const e=d(),t=i();f({title:"Attendance Report",browserTitle:"Attendance"});const l=n({}),a=n({}),o=n([]),r=n([]),c=n([]),m=n(new Set),v=n(new Set),g=n(new Set);return s((async()=>{const t=(await u.get("/api/reports/attendance",{params:e.query})).data;l.value=t.parameters,a.value=t.options,o.value=t.columns,r.value=t.rows,c.value=t.cells,m.value=new Set(t.parameters.orgs),v.value=new Set(t.parameters.eventTypes),g.value=new Set(t.parameters.attendanceTypes)})),p([l,g,v,m],(()=>{const e={};e.dateRange=l.value.dateRange,e.rows=l.value.rows,e.columns=l.value.columns,e.cells=l.value.cells,e.orgs=Array.from(m.value.keys(),(e=>e.toString())).sort().join(","),e.eventTypes=Array.from(v.value.keys(),(e=>e.toString())).sort().join(","),e.attendanceTypes=Array.from(g.value.keys(),(e=>e.toString())).sort().join(","),l.value.includeZerosX&&(e.includeZerosX="true"),l.value.includeZerosY&&(e.includeZerosY="true"),t.replace({path:"/reports/attendance",query:e})}),{deep:!0}),{attendanceTypes:g,cells:c,cellOptions:T,columns:o,columnOptions:S,eventTypes:v,options:a,orgs:m,params:l,rows:r,rowOptions:x}}});const Z={key:0,id:"attrep"},k={id:"attrep-params"},O=v("td",null,"Date range",-1),R=v("td",null,"Rows",-1),U=v("td",null,"Columns",-1),A=v("td",null,"Cells",-1),j=v("td",null,"Organizations",-1),K=v("td",null,"Events",-1),X=v("td",null,"Attendees",-1),Y={id:"attrep-table"};C.render=function(e,t,l,a,o,r){const n=c("SSelect"),s=c("SRadioGroup"),p=c("SCheck"),d=c("SCheckGroup");return e.params.cells?(V(),m("div",Z,[v("table",k,[v("tr",null,[O,v("td",null,[v(n,{options:e.options.dateRanges,valueKey:"tag",labelKey:"label",modelValue:e.params.dateRange,"onUpdate:modelValue":t[1]||(t[1]=t=>e.params.dateRange=t)},null,8,["options","modelValue"]),g(" "+h(e.params.dateFrom)+" to "+h(e.params.dateTo),1)])]),v("tr",null,[R,v("td",null,[v(s,{id:"attrep-rows",inline:"",options:e.rowOptions,modelValue:e.params.rows,"onUpdate:modelValue":t[2]||(t[2]=t=>e.params.rows=t)},null,8,["options","modelValue"]),v(p,{id:"attrep-includeZerosY",label:"Include Zeros",inline:"",modelValue:e.params.includeZerosY,"onUpdate:modelValue":t[3]||(t[3]=t=>e.params.includeZerosY=t)},null,8,["modelValue"])])]),v("tr",null,[U,v("td",null,[v(s,{id:"attrep-columns",inline:"",options:e.columnOptions,modelValue:e.params.columns,"onUpdate:modelValue":t[4]||(t[4]=t=>e.params.columns=t)},null,8,["options","modelValue"]),v(p,{id:"attrep-includeZerosX",label:"Include Zeros",inline:"",modelValue:e.params.includeZerosX,"onUpdate:modelValue":t[5]||(t[5]=t=>e.params.includeZerosX=t)},null,8,["modelValue"])])]),v("tr",null,[A,v("td",null,[v(s,{id:"attrep-cells",inline:"",options:e.cellOptions,modelValue:e.params.cells,"onUpdate:modelValue":t[6]||(t[6]=t=>e.params.cells=t)},null,8,["options","modelValue"])])]),v("tr",null,[j,v("td",null,[v(d,{id:"attrep-orgs",inline:"",options:e.options.orgs,valueKey:"id",modelValue:e.orgs,"onUpdate:modelValue":t[7]||(t[7]=t=>e.orgs=t)},null,8,["options","modelValue"])])]),v("tr",null,[K,v("td",null,[v(d,{id:"attrep-eventTypes",inline:"",options:e.options.eventTypes,valueKey:"id",modelValue:e.eventTypes,"onUpdate:modelValue":t[8]||(t[8]=t=>e.eventTypes=t)},null,8,["options","modelValue"])])]),v("tr",null,[X,v("td",null,[v(d,{id:"attrep-attendanceTypes",inline:"",options:e.options.attendanceTypes,valueKey:"id",modelValue:e.attendanceTypes,"onUpdate:modelValue":t[9]||(t[9]=t=>e.attendanceTypes=t)},null,8,["options","modelValue"])])])]),v("table",Y,[v("tbody",null,[(V(!0),m(w,null,b(e.rows,((t,l)=>(V(),m("tr",{class:"attrep-row-"+t},[0===l?(V(!0),m(w,{key:0},b(e.cells[l],((t,l)=>(V(),m("td",{class:"attrep-col-"+e.columns[l]},[t?(V(),m("div",{key:0,class:"attrep-vertical",textContent:h(t)},null,8,["textContent"])):y("",!0)],2)))),256)):(V(!0),m(w,{key:1},b(e.cells[l],((t,l)=>(V(),m("td",{class:"attrep-col-"+e.columns[l],textContent:h(t)},null,10,["textContent"])))),256))],2)))),256))])])])):y("",!0)};export default C;
