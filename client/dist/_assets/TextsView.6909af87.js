let e=document.createElement("style");e.innerHTML="#texts-view-spinner{margin:1.5rem .75rem}#texts-view{display:flex;flex-direction:column;padding:.75rem;height:100%}#texts-view-meta{display:grid;flex:none;line-height:1.2;grid:auto/8rem 1fr}#texts-view-deliveries{display:grid;justify-content:start;align-items:start;margin-top:1rem;min-width:0;width:100%;line-height:1.2;grid:auto/minmax(1fr,12rem) 7rem}.texts-view-heading{font-weight:700}.texts-view-heading:nth-child(3){display:none}.texts-view-delivery-pending{color:#888}.texts-view-delivery-failed{background-color:#e6194b;color:#fff}.texts-view-delivery-delivered{background-color:olive;color:#fff}.texts-view-delivery-replied{background-color:#3cb44b;color:#fff}.texts-view-delivery-sent{background-color:#9a6324;color:#fff}.texts-view-name-num{overflow:hidden;margin-top:.75rem;padding-right:.5rem}.texts-view-recipient{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.texts-view-number{color:#888;font-size:.75rem}.texts-view-status-time{margin-top:.75rem}.texts-view-status{padding-left:2px}.texts-view-time{color:#888;font-size:.75rem}.texts-view-responses{margin-left:4rem;text-indent:-2rem;grid-column:1/3}@media (min-width 576px){#texts-view-deliveries{grid:auto/12rem 7rem 1fr}.texts-view-heading:nth-child(3){display:block}.texts-view-responses{margin-top:.75rem;margin-left:1.5rem;text-indent:-1rem;grid-column:3/4}}.texts-view-response-time{display:none;color:#888;font-variant:tabular-nums;font-size:.75rem}.texts-view-response-time::before{content:'['}.texts-view-response-time::after{content:'] '}@media (min-width 800px){.texts-view-response-time{display:inline}}",document.head.appendChild(e);import{d as t,p as s,g as i,R as n,x as r,_ as a,r as l,c as o,a as d,F as v,k as m,o as u}from"./index.ab3702d8.js";var c=t({components:{SSpinner:s},setup(){const e=r(),t=i(null);async function s(){t.value=(await a.get("/api/sms/"+e.params.id)).data,t.value.deliveries.sort((e,t)=>e.recipient<t.recipient?-1:e.recipient>t.recipient?1:0),window.setTimeout(s,5e3)}return n(()=>{s()}),{formatNumber:function(e){return e.number?`${e.number.substr(2,3)}-${e.number.substr(5,3)}-${e.number.substr(8,4)}`:""},formatStatus:function(e){if(e.responses&&e.responses.length)return"Replied";switch(e.status){case"queued":return"Queued";case"sending":return"Sending";case"sent":return"Sent";case"delivered":return"Delivered";case"undelivered":return"Not Delivered";case"failed":return"Failed";case"No Cell Phone":return"No Cell Phone";default:return"Pending"}},formatTimestamp:function(e){return e.responses&&e.responses.length?e.responses[e.responses.length-1].timestamp.substr(11,8):e.status&&"No Cell Phone"!==e.status?e.timestamp.substr(11,8):""},message:t,onClick:function(e){(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i))&&e.number&&(window.location.href="sms:"+e.number.substr(2))},statusColor:function(e){if(e.responses&&e.responses.length)return"texts-view-delivery-replied";switch(e.status){case"queued":return"texts-view-delivery-pending";case"sent":return"texts-view-delivery-sent";case"sending":return"texts-view-delivery-pending";case"delivered":return"texts-view-delivery-delivered";case"undelivered":case"failed":case"No Cell Phone":return"texts-view-delivery-failed";default:return"texts-view-delivery-pending"}}}}});const x={key:0,id:"texts-view-spinner"},p={key:1,id:"texts-view"},w={id:"texts-view-meta"},g=d("div",{class:"texts-view-meta-label"},"Message sent",-1),f=d("div",{class:"texts-view-meta-label"},"Sent by",-1),h=d("div",{class:"texts-view-meta-label"},"Sent to",-1),b={class:"texts-view-meta"},C=d("div",{class:"texts-view-meta-label"},"Message text",-1),y={id:"texts-view-deliveries"},k=d("div",{class:"texts-view-name-num texts-view-heading"},"Recipient",-1),S=d("div",{class:"texts-view-status-time texts-view-heading"},"Status",-1),N=d("div",{class:"texts-view-responses texts-view-heading"},"Reply",-1),P={class:"texts-view-status-time"},T={class:"texts-view-responses"};c.render=function(e,t,s,i,n,r){const a=l("SSpinner");return e.message?(u(),o("div",p,[d("div",w,[g,d("div",{class:"texts-view-meta",textContent:e.message.timestamp},null,8,["textContent"]),f,d("div",{class:"texts-view-meta",textContent:e.message.sender},null,8,["textContent"]),h,d("div",b,[(u(!0),o(v,null,m(e.message.groups,e=>(u(),o("div",{textContent:e},null,8,["textContent"]))),256))]),C,d("div",{class:"texts-view-meta",textContent:e.message.message},null,8,["textContent"])]),d("div",y,[k,S,N,(u(!0),o(v,null,m(e.message.deliveries,t=>(u(),o(v,null,[d("div",{class:"texts-view-name-num",onClick:s=>e.onClick(t)},[d("div",{class:"texts-view-recipient",textContent:t.recipient},null,8,["textContent"]),d("div",{class:"texts-view-number",textContent:e.formatNumber(t)},null,8,["textContent"])],8,["onClick"]),d("div",P,[d("div",{class:["texts-view-status",e.statusColor(t)],textContent:e.formatStatus(t)},null,10,["textContent"]),d("div",{class:"texts-view-time",textContent:e.formatTimestamp(t)},null,8,["textContent"])]),d("div",T,[(u(!0),o(v,null,m(t.responses,e=>(u(),o("div",null,[d("span",{class:"texts-view-response-time",textContent:e.timestamp.substr(11,8)},null,8,["textContent"]),d("span",{textContent:e.response},null,8,["textContent"])]))),256))])],64))),256))])])):(u(),o("div",x,[d(a)]))},c.__file="client/src/pages/texts/TextsView.vue";export default c;
