let e=document.createElement("style");e.innerHTML="#texts-send{padding:1.5rem .75rem}.texts-send-label{width:7rem}#texts-send-message{min-width:12rem;max-width:20rem}.texts-send-long{color:red!important}",document.head.appendChild(e);import{d as s,j as t,x as a,L as n,e as r,f as l,_ as o,m as i,u as d,r as u,c as m,a as c,o as p,w as g}from"./index.5b61b32f.js";import{s as b}from"./page.4ea6de6e.js";var f=s({components:{SForm:t,SFCheckGroup:a,SFTextArea:n,SSpinner:r},setup(){b({title:"New Text Message"});const e=l([]);o.get("/api/sms/NEW").then((s=>{e.value=s.data.lists}));const s=l(""),t=l("0/160");const a=l(new Set);const n=l(!1),r=i((()=>n.value?"Sending...":"Send Message")),u=i((()=>n.value)),m=d();return{countMessage:t,disabled:u,lists:e,listsError:function(e,s){return s&&!a.value.size?"Please select the recipients of your message.":""},message:s,messageError:function(e){if(e&&!s.value)return"Please enter the text of your message.";let a=!1,n=0;for(const e of s.value)n++,"Â£$Â¥Ã¨Ã©Ã¹Ã¬Ã²Ã‡\nÃ˜Ã¸\rÃ…Ã¥Î”_Î¦Î“Î›Î©Î Î¨Î£Î˜ÎžÃ†Ã¦ÃŸÃ‰ !\"#Â¤%&'()*+,-./0123456789:;<=>?Â¡ABCDEFGHIJKLMNOPQRSTUVWXYZÃ„Ã–Ã‘ÃœÂ§Â¿abcdefghijklmnopqrstuvwxyzÃ¤Ã¶Ã±Ã¼Ã ".includes(e)||"\f\n^{}\\[~]|â‚¬".includes(e)||(a=!0);let r=a?70:160,l=Math.ceil(n/r);return t.value=l>1?`${n}/${r} (${l} messages)`:`${n}/${r}`,""},onSubmit:async function(){n.value=!0;const e=new FormData;e.append("message",s.value),a.value.forEach((s=>e.append("list",s.toString())));const t=await o.post("/api/sms",e);m.push(`/texts/${t.data.id}`)},recipients:a,submitLabel:r}}});const S={key:0,id:"texts-send"};f.render=function(e,s,t,a,n,r){const l=u("SSpinner"),o=u("SFTextArea"),i=u("SFCheckGroup"),d=u("SForm");return e.lists.length?(p(),m(d,{key:1,id:"texts-send",onSubmit:e.onSubmit,submitLabel:e.submitLabel,disabled:e.disabled},{default:g((()=>[c(o,{id:"texts-send-message",label:"Message",autofocus:"",rows:"5",trim:"",modelValue:e.message,"onUpdate:modelValue":s[1]||(s[1]=s=>e.message=s),help:e.countMessage,errorFn:e.messageError},null,8,["modelValue","help","errorFn"]),c(i,{id:"texts-send-lists",label:"Recipients",options:e.lists,valueKey:"id",labelKey:"name",modelValue:e.recipients,"onUpdate:modelValue":s[2]||(s[2]=s=>e.recipients=s),errorFn:e.listsError},null,8,["options","modelValue","errorFn"])])),_:1},8,["onSubmit","submitLabel","disabled"])):(p(),m("div",S,[c(l)]))};export default f;
