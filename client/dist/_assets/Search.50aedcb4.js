let e=document.createElement("style");e.innerHTML="#search{margin:1.5rem .75rem}#search-query-row{text-align:center}#search-query{display:inline;margin-right:.25rem;width:10rem;vertical-align:bottom}#search-error{margin-top:.75rem;color:red;text-align:center}#search-results{margin-top:.75rem}.search-result-type{padding-top:.75rem;text-decoration:underline}.search-result{margin-left:2rem;text-indent:-2rem;line-height:1.2}.search-result-path{padding-left:1rem;font-style:italic;font-size:.75rem}",document.head.appendChild(e);import{d as t,s,O as r,f as a,_ as l,v as n,x as u,r as o,c as i,a as d,w as c,P as p,t as h,z as m,F as v,g,o as f,b as y}from"./index.c7c02bd7.js";import{s as x}from"./page.839d73b9.js";var q=t({components:{SButton:s,SInput:r},setup(){const e=n(),t=u();x({title:"Search"});const s=a("");e.query.q&&(s.value=e.query.q,v());const r=a([]),o=a([]),i=a([]),d=a([]),c=a([]),p=a([]),h=a(""),m=a(!1);async function v(){if(s.value=s.value.trim(),!s.value)return r.value=o.value=i.value=d.value=c.value=p.value=[],void(h.value="");s.value!==e.query.q&&t.replace({path:"/search",query:{q:s.value}});const a=(await l.get("/api/search",{params:{q:s.value}})).data;h.value=a.error||"",r.value=a.results.filter((e=>"document"===e.type)),o.value=a.results.filter((e=>"event"===e.type)),i.value=a.results.filter((e=>"folder"===e.type)),d.value=a.results.filter((e=>"group"===e.type)),c.value=a.results.filter((e=>"person"===e.type)),p.value=a.results.filter((e=>"textMessage"===e.type)),m.value=!0}return{documents:r,error:h,events:o,folders:i,groups:d,onSubmit:v,people:c,query:s,resultPath:function(e){return"in "+e.path.join(" > ")},submitted:m,textMessages:p}}});const b={id:"search"},k={id:"search-query-row"},S=y("Search"),C={id:"search-results"},M=d("div",{class:"search-result-type"},"Groups",-1),_={class:"search-result"},w=d("div",{class:"search-result-type"},"People",-1),P={class:"search-result"},F=d("div",{class:"search-result-type"},"Events",-1),I={class:"search-result"},j=d("div",{class:"search-result-type"},"Folders",-1),V={class:"search-result"},z=d("div",{class:"search-result-type"},"Files",-1),B={class:"search-result"},D=d("div",{class:"search-result-type"},"Text Messages",-1),E={class:"search-result"},N={key:6,class:"search-result"};q.render=function(e,t,s,r,a,l){const n=o("SInput"),u=o("SButton"),x=o("router-link");return f(),i("div",b,[d("form",{id:"search-form",onSubmit:t[2]||(t[2]=p(((...t)=>e.onSubmit(...t)),["prevent"]))},[d("div",k,[d(n,{id:"search-query",autofocus:"",modelValue:e.query,"onUpdate:modelValue":t[1]||(t[1]=t=>e.query=t)},null,8,["modelValue"]),d(u,{type:"submit",variant:"primary"},{default:c((()=>[S])),_:1})])],32),e.error?(f(),i("div",{key:0,id:"search-error",textContent:h(e.error)},null,8,["textContent"])):m("",!0),d("div",C,[e.groups.length?(f(),i(v,{key:0},[M,(f(!0),i(v,null,g(e.groups,(e=>(f(),i("div",_,[d(x,{to:"/people/list?group="+e.id},{default:c((()=>[y(h(e.name),1)])),_:2},1032,["to"])])))),256))],64)):m("",!0),e.people.length?(f(),i(v,{key:1},[w,(f(!0),i(v,null,g(e.people,(e=>(f(),i("div",P,[d(x,{to:"/people/"+e.id},{default:c((()=>[y(h(e.informalName),1)])),_:2},1032,["to"])])))),256))],64)):m("",!0),e.events.length?(f(),i(v,{key:2},[F,(f(!0),i(v,null,g(e.events,(e=>(f(),i("div",I,[d(x,{to:"/events/"+e.id},{default:c((()=>[y(h(e.date)+" "+h(e.name),1)])),_:2},1032,["to"])])))),256))],64)):m("",!0),e.folders.length?(f(),i(v,{key:3},[j,(f(!0),i(v,null,g(e.folders,(t=>(f(),i("div",V,[d(x,{to:"/files/"+t.id},{default:c((()=>[y(h(t.name),1)])),_:2},1032,["to"]),t.path.length?(f(),i("span",{key:0,class:"search-result-path",textContent:h(e.resultPath(t))},null,8,["textContent"])):m("",!0)])))),256))],64)):m("",!0),e.documents.length?(f(),i(v,{key:4},[z,(f(!0),i(v,null,g(e.documents,(t=>(f(),i("div",B,[d("a",{href:`/api/folders/${t.folderID}/${t.documentID}`,download:""},h(t.name),9,["href"]),d("span",{class:"search-result-path",textContent:h(e.resultPath(t))},null,8,["textContent"])])))),256))],64)):m("",!0),e.textMessages.length?(f(),i(v,{key:5},[D,(f(!0),i(v,null,g(e.textMessages,(e=>(f(),i("div",E,[d(x,{to:"/texts/"+e.id},{default:c((()=>[y("From "+h(e.sender)+" on "+h(e.timestamp.substr(0,10)),1)])),_:2},1032,["to"])])))),256))],64)):m("",!0),!e.submitted||e.error||e.groups.length||e.people.length||e.events.length||e.folders.length||e.documents.length||e.textMessages.length?m("",!0):(f(),i("div",N,"No results found."))])])};export default q;
