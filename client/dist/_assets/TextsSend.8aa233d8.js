let e=document.createElement("style");e.innerHTML="#texts-send{padding:1.5rem .75rem}.texts-send-label{width:7rem}#texts-send-message{min-width:12rem;max-width:20rem}.texts-send-long{color:red!important}",document.head.appendChild(e);import{d as s,l as t,m as a,L as n,e as r,f as o,_ as l,u,x as i,r as d,c as m,a as p,o as c,w as g}from"./index.c4b1b76c.js";import{s as b}from"./page.9293f3d3.js";var f=s({components:{SForm:t,SFCheckGroup:a,SFTextArea:n,SSpinner:r},setup(){b({title:"New Text Message"});const e=o([]);l.get("/api/sms/NEW").then((s=>{e.value=s.data.groups}));const s=o(""),t=o("0/160");const a=o(new Set);const n=o(!1),r=u((()=>n.value?"Sending...":"Send Message")),d=u((()=>n.value)),m=i();return{countMessage:t,disabled:d,groups:e,groupsError:function(e,s){return s&&!a.value.size?"Please select the recipients of your message.":""},message:s,messageError:function(e){if(e&&!s.value)return"Please enter the text of your message.";let a=!1,n=0;for(const e of s.value)n++,"Â£$Â¥Ã¨Ã©Ã¹Ã¬Ã²Ã‡\nÃ˜Ã¸\rÃ…Ã¥Î”_Î¦Î“Î›Î©Î Î¨Î£Î˜ÎžÃ†Ã¦ÃŸÃ‰ !\"#Â¤%&'()*+,-./0123456789:;<=>?Â¡ABCDEFGHIJKLMNOPQRSTUVWXYZÃ„Ã–Ã‘ÃœÂ§Â¿abcdefghijklmnopqrstuvwxyzÃ¤Ã¶Ã±Ã¼Ã ".includes(e)||"\f\n^{}\\[~]|â‚¬".includes(e)||(a=!0);let r=a?70:160,o=Math.ceil(n/r);return t.value=o>1?`${n}/${r} (${o} messages)`:`${n}/${r}`,""},onSubmit:async function(){n.value=!0;const e=new FormData;e.append("message",s.value),a.value.forEach((s=>e.append("group",s.toString())));const t=await l.post("/api/sms",e);m.push("/texts/"+t.data.id)},recipients:a,submitLabel:r}}});const S={key:0,id:"texts-send"};f.render=function(e,s,t,a,n,r){const o=d("SSpinner"),l=d("SFTextArea"),u=d("SFCheckGroup"),i=d("SForm");return e.groups.length?(c(),m(i,{key:1,id:"texts-send",onSubmit:e.onSubmit,submitLabel:e.submitLabel,disabled:e.disabled},{default:g((()=>[p(l,{id:"texts-send-message",label:"Message",autofocus:"",rows:"5",trim:"",modelValue:e.message,"onUpdate:modelValue":s[1]||(s[1]=s=>e.message=s),help:e.countMessage,errorFn:e.messageError},null,8,["modelValue","help","errorFn"]),p(u,{id:"texts-send-groups",label:"Recipients",options:e.groups,valueKey:"id",labelKey:"name",modelValue:e.recipients,"onUpdate:modelValue":s[2]||(s[2]=s=>e.recipients=s),errorFn:e.groupsError},null,8,["options","modelValue","errorFn"])])),_:1},8,["onSubmit","submitLabel","disabled"])):(c(),m("div",S,[p(o)]))};export default f;
