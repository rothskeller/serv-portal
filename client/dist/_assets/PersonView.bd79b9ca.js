let e=document.createElement("style");e.innerHTML=".person-address-label-Mail,.person-address-label-Work{padding-top:0}.person-address-same-box{white-space:nowrap}.person-address-same-label{margin:0 0 0 .5rem}.person-address-input{display:block;width:100%;margin-top:.5rem}.person-address-input:first-child{margin-top:0}.person-view-section{margin-bottom:1.5rem}.person-view-section-header{display:flex;align-items:center;justify-content:space-between;background-color:#eee}.person-view-section-header-text{color:#000;font-size:1.25rem;padding-left:.75rem}.person-view-section-edit{flex:none;padding-left:.25rem;background-color:#fff}#person-view-emails{margin-top:.75rem}.person-view-email-label{color:#888}.person-view-phone{font-variant:tabular-nums}.person-view-phone-label{margin-left:.25rem;color:#888}.person-view-address,.person-view-clearances{margin-top:.75rem;line-height:1.2}.person-view-map{margin-left:1rem}.person-view-map::before{content:'['}.person-view-map::after{content:']'}.person-view-address-flag{color:#888;font-size:.875rem}#person-view-names{display:flex;justify-content:space-between;align-items:flex-start}#person-view-names-ifc{margin-bottom:1.5rem}#person-view-names-ic{font-size:1.25rem;line-height:1.2;color:#000}#person-view-names-i{display:inline;font-weight:700}#person-view-names-c{display:inline;margin-left:.5rem}#person-view-names-f{color:#888;line-height:1}#person-view-names-edit{margin-left:.5rem}#person-edit-note-help{margin:0 .75rem 1rem}.person-edit-note{display:grid;grid:auto-flow/-webkit-min-content 1fr;grid:auto-flow/min-content 1fr;margin:0 .75rem 1rem;-moz-column-gap:1rem;column-gap:1rem}#person-view-notes{margin-top:.75rem}.person-view-note{line-height:1.2;margin-left:2rem;text-indent:-2rem}.person-view-note-date{display:inline;margin-right:.75rem;color:#666;font-variant:tabular-nums}.person-view-note-text{display:inline;margin-left:.5rem}#person-view-roles-badges{display:grid;grid:auto-flow/-webkit-min-content 1fr;grid:auto-flow/min-content 1fr;min-width:0}.person-view-roles-badge{margin-top:1rem}.person-view-roles-titles{margin-top:1rem;line-height:1.2;min-width:0}.person-view-roles-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#person-edbg-header{margin:0 .75rem;border-top:1px solid #ccc;padding-top:.25rem}#person-edbg-help{margin:0 .75rem;color:#6c757d;font-size:80%}#person-view-status-grid{margin-top:.75rem;display:grid;grid:auto-flow/1fr}#person-view-status-grid>div:nth-child(2n+1),#person-view-status-identification div{white-space:nowrap}#person-view-status-grid>div:nth-child(2n){margin-left:2rem}@media (min-width:400px){#person-view-status-grid{grid:auto-flow/-webkit-min-content 1fr;grid:auto-flow/min-content 1fr}#person-view-status-grid>div:nth-child(2n){margin-left:1rem}}#person-view-status-identification{display:flex;flex-wrap:wrap}#person-view-status-identification div::after{content:',Â '}#person-view-status-identification div:last-child::after{content:''}.person-view-status-date{font-variant-numeric:tabular-nums}.person-view-status-assumed{color:#f60}#person-view-lists-list{margin-top:.75rem;line-height:1.2;margin-left:2em;text-indent:-2em}#person-view{margin:1.5rem .75rem}#person-view-grid{display:grid;grid:auto-flow/1fr}.person-view-spacer{display:none}@media (min-width:740px){#person-view-status-grid{grid:auto-flow/1fr}#person-view-status-grid>div:nth-child(2n){margin-left:2rem}#person-view-grid{grid:auto-flow/1fr 1fr;-moz-column-gap:.75rem;column-gap:.75rem}.person-view-spacer{display:block}}@media (min-width:1048px){#person-view-grid{grid:auto-flow/1fr 1fr 1fr}.person-view-spacer{grid-column:span 2}}#person-view-chpw{display:grid;grid:auto/auto auto;-moz-column-gap:.5rem;column-gap:.5rem;margin-top:.75rem}",document.head.appendChild(e);import{d as t,q as n,j as s,k as o,Y as r,e as a,f as i,i as l,_ as d,K as u,r as c,c as p,o as h,w as m,a as f,F as v,h as g,a2 as y,a3 as w,a4 as b,z as _,a5 as C,t as E,G as k,a6 as S,a7 as x,S as A,a8 as R,b as P,m as T,y as N,C as V,g as F,x as L,a9 as U,O as D,P as B,v as I,A as O,s as q,n as M}from"./index.e2195a2e.js";import{s as j}from"./SubscriptionsForm.06a1ce72.js";var z=t({components:{Modal:n,SForm:s,SFInput:o,SFPassword:r,SSpinner:a},props:{pid:{type:Number,required:!0}},setup(e){const t=l("me"),n=i(null);const s=i([]),o=i(!0);const r=i(""),a=i(null),c=i(""),p=i(null),h=i("");const m=i(!1);return{hints:s,loading:o,me:t,modal:n,oldPassword:r,oldPasswordError:function(e,n){return n?!c.value||r.value||t.value.webmaster?r.value&&r.value===h.value?"This is not the correct old password.":"":"You must supply your old password in order to change your password.":""},oldPasswordRef:a,onCancel:function(){n.value.close(!1)},onSubmit:async function(){var t=new FormData;t.append("oldPassword",r.value),t.append("password",c.value),m.value=!0;try{await d.post(`/api/people/${e.pid}/password`,t),n.value.close(!0)}catch(e){if(!e.response||409!==e.response.status)throw e;h.value=r.value}finally{m.value=!1}},password:c,passwordRef:p,show:function(){return r.value=c.value="",async function(){o.value=!0,s.value=(await d.get(`/api/people/${e.pid}/password`)).data,o.value=!1,u((()=>{t.value.webmaster?p.value.focus():a.value.focus()}))}(),n.value.show()},submitting:m}}});z.render=function(e,t,n,s,o,r){const a=c("SSpinner"),i=c("SFInput"),l=c("SFPassword"),d=c("SForm"),u=c("Modal");return h(),p(u,{ref:"modal"},{default:m((()=>[f(d,{dialog:"",variant:"primary",title:"Change Password",submitLabel:"Save",disabled:e.submitting,onSubmit:e.onSubmit,onCancel:e.onCancel},{default:m((()=>[e.loading?(h(),p(a,{key:0})):(h(),p(v,{key:1},[e.me.webmaster?g("",!0):(h(),p(i,{key:0,id:"person-oldPassword",ref:"oldPasswordRef",type:"password",label:"Old Password",modelValue:e.oldPassword,"onUpdate:modelValue":t[1]||(t[1]=t=>e.oldPassword=t),errorFn:e.oldPasswordError},null,8,["modelValue","errorFn"])),f(l,{id:"person-password",ref:"passwordRef",label:"New Password",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),allowBadPassword:e.me.webmaster,passwordHints:e.hints},null,8,["modelValue","allowBadPassword","passwordHints"])],64))])),_:1},8,["disabled","onSubmit","onCancel"])])),_:1},512)};class H extends Error{constructor(e){super(e)}}var $={BatchFullError:class extends H{constructor(){super("A batch can contain a max of 100 lookups.")}},BatchEmptyError:class extends H{constructor(){super("A batch must contain at least 1 lookup.")}},UndefinedLookupError:class extends H{constructor(){super("The lookup provided is missing or undefined. Make sure you're passing a Lookup object.")}},BadCredentialsError:class extends H{constructor(){super("Unauthorized: The credentials were provided incorrectly or did not match any existing active credentials.")}},PaymentRequiredError:class extends H{constructor(){super("Payment Required: There is no active subscription for the account associated with the credentials submitted with the request.")}},RequestEntityTooLargeError:class extends H{constructor(){super("Request Entity Too Large: The request body has exceeded the maximum size.")}},BadRequestError:class extends H{constructor(){super("Bad Request (Malformed Payload): A GET request lacked a street field or the request body of a POST request contained malformed JSON.")}},UnprocessableEntityError:class extends H{constructor(e){super(e)}},TooManyRequestsError:class extends H{constructor(){super("When using the public 'website key' authentication, we restrict the number of requests coming from a given source over too short of a time.")}},InternalServerError:class extends H{constructor(){super("Internal Server Error.")}},ServiceUnavailableError:class extends H{constructor(){super("Service Unavailable. Try again later.")}},GatewayTimeoutError:class extends H{constructor(){super("The upstream data provider did not respond in a timely fashion and the request failed. A serious, yet rare occurrence indeed.")}}};const W=$.BatchFullError;var G=class{constructor(){this.lookups=[]}add(e){if(!this.lookupsHasRoomForLookup())throw new W;this.lookups.push(e)}lookupsHasRoomForLookup(){return this.lookups.length<100}length(){return this.lookups.length}getByIndex(e){return this.lookups[e]}getByInputId(e){return this.lookups.filter((t=>t.inputId===e))[0]}clear(){this.lookups=[]}isEmpty(){return 0===this.length()}};var Y=class{constructor(e,t,n){this.statusCode=e,this.payload=t,this.error=n}},Z=function(e,t){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return e.apply(t,n)}};function X(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var K=Object.prototype.toString;function J(e){return"[object Array]"===K.call(e)}function Q(e){return null!==e&&"object"==typeof e}function ee(e){return"[object Function]"===K.call(e)}function te(e,t){if(null!=e)if("object"==typeof e||J(e)||(e=[e]),J(e))for(var n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var ne={isArray:J,isArrayBuffer:function(e){return"[object ArrayBuffer]"===K.call(e)},isBuffer:function(e){return null!=e&&(X(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&X(e.slice(0,0))}(e)||!!e._isBuffer)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Q,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===K.call(e)},isFile:function(e){return"[object File]"===K.call(e)},isBlob:function(e){return"[object Blob]"===K.call(e)},isFunction:ee,isStream:function(e){return Q(e)&&ee(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:te,merge:function e(){var t={};function n(n,s){"object"==typeof t[s]&&"object"==typeof n?t[s]=e(t[s],n):t[s]=n}for(var s=0,o=arguments.length;s<o;s++)te(arguments[s],n);return t},extend:function(e,t,n){return te(t,(function(t,s){e[s]=n&&"function"==typeof t?Z(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}},se=function(e,t,n,s,o){return function(e,t,n,s,o){return e.config=t,n&&(e.code=n),e.request=s,e.response=o,e}(new Error(e),t,n,s,o)};function oe(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var re=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ae=ne.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function s(e){var s=e;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=s(window.location.href),function(t){var n=ne.isString(t)?s(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function ie(){this.message="String contains an invalid character"}ie.prototype=new Error,ie.prototype.code=5,ie.prototype.name="InvalidCharacterError";var le=function(e){for(var t,n,s=String(e),o="",r=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.charAt(0|r)||(a="=",r%1);o+=a.charAt(63&t>>8-r%1*8)){if((n=s.charCodeAt(r+=3/4))>255)throw new ie;t=t<<8|n}return o},de=ne.isStandardBrowserEnv()?{write:function(e,t,n,s,o,r){var a=[];a.push(e+"="+encodeURIComponent(t)),ne.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ne.isString(s)&&a.push("path="+s),ne.isString(o)&&a.push("domain="+o),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ue="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||le,ce=function(e){return new Promise((function(t,n){var s=e.data,o=e.headers;ne.isFormData(s)&&delete o["Content-Type"];var r=new XMLHttpRequest,a="onreadystatechange",i=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in r||ae(e.url)||(r=new window.XDomainRequest,a="onload",i=!0,r.onprogress=function(){},r.ontimeout=function(){}),e.auth){var l=e.auth.username||"",d=e.auth.password||"";o.Authorization="Basic "+ue(l+":"+d)}if(r.open(e.method.toUpperCase(),function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(ne.isURLSearchParams(t))s=t.toString();else{var o=[];ne.forEach(t,(function(e,t){null!=e&&(ne.isArray(e)&&(t+="[]"),ne.isArray(e)||(e=[e]),ne.forEach(e,(function(e){ne.isDate(e)?e=e.toISOString():ne.isObject(e)&&(e=JSON.stringify(e)),o.push(oe(t)+"="+oe(e))})))})),s=o.join("&")}return s&&(e+=(-1===e.indexOf("?")?"?":"&")+s),e}(e.url,e.params,e.paramsSerializer),!0),r.timeout=e.timeout,r[a]=function(){if(r&&(4===r.readyState||i)&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))){var s,o,a,l,d,u="getAllResponseHeaders"in r?(s=r.getAllResponseHeaders(),d={},s?(ne.forEach(s.split("\n"),(function(e){if(l=e.indexOf(":"),o=ne.trim(e.substr(0,l)).toLowerCase(),a=ne.trim(e.substr(l+1)),o){if(d[o]&&re.indexOf(o)>=0)return;d[o]="set-cookie"===o?(d[o]?d[o]:[]).concat([a]):d[o]?d[o]+", "+a:a}})),d):d):null,c={data:e.responseType&&"text"!==e.responseType?r.response:r.responseText,status:1223===r.status?204:r.status,statusText:1223===r.status?"No Content":r.statusText,headers:u,config:e,request:r};!function(e,t,n){var s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(se("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}(t,n,c),r=null}},r.onerror=function(){n(se("Network Error",e,null,r)),r=null},r.ontimeout=function(){n(se("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",r)),r=null},ne.isStandardBrowserEnv()){var u=de,c=(e.withCredentials||ae(e.url))&&e.xsrfCookieName?u.read(e.xsrfCookieName):void 0;c&&(o[e.xsrfHeaderName]=c)}if("setRequestHeader"in r&&ne.forEach(o,(function(e,t){void 0===s&&"content-type"===t.toLowerCase()?delete o[t]:r.setRequestHeader(t,e)})),e.withCredentials&&(r.withCredentials=!0),e.responseType)try{r.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&r.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){r&&(r.abort(),n(e),r=null)})),void 0===s&&(s=null),r.send(s)}))},pe={"Content-Type":"application/x-www-form-urlencoded"};function he(e,t){!ne.isUndefined(e)&&ne.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var me,fe={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process)&&(me=ce),me),transformRequest:[function(e,t){return function(e,t){ne.forEach(e,(function(n,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[s])}))}(t,"Content-Type"),ne.isFormData(e)||ne.isArrayBuffer(e)||ne.isBuffer(e)||ne.isStream(e)||ne.isFile(e)||ne.isBlob(e)?e:ne.isArrayBufferView(e)?e.buffer:ne.isURLSearchParams(e)?(he(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ne.isObject(e)?(he(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};fe.headers={common:{Accept:"application/json, text/plain, */*"}},ne.forEach(["delete","get","head"],(function(e){fe.headers[e]={}})),ne.forEach(["post","put","patch"],(function(e){fe.headers[e]=ne.merge(pe)}));var ve=fe;function ge(){this.handlers=[]}ge.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},ge.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},ge.prototype.forEach=function(e){ne.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var ye=ge,we=function(e,t,n){return ne.forEach(n,(function(n){e=n(e,t)})),e},be=function(e){return!(!e||!e.__CANCEL__)};function _e(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Ce=function(e){var t,n,s;return _e(e),e.baseURL&&(s=e.url,!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s))&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=we(e.data,e.headers,e.transformRequest),e.headers=ne.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),ne.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||ve.adapter)(e).then((function(t){return _e(e),t.data=we(t.data,t.headers,e.transformResponse),t}),(function(t){return be(t)||(_e(e),t&&t.response&&(t.response.data=we(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))};function Ee(e){this.defaults=e,this.interceptors={request:new ye,response:new ye}}Ee.prototype.request=function(e){"string"==typeof e&&(e=ne.merge({url:arguments[0]},arguments[1])),(e=ne.merge(ve,this.defaults,{method:"get"},e)).method=e.method.toLowerCase();var t=[Ce,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},ne.forEach(["delete","get","head","options"],(function(e){Ee.prototype[e]=function(t,n){return this.request(ne.merge(n||{},{method:e,url:t}))}})),ne.forEach(["post","put","patch"],(function(e){Ee.prototype[e]=function(t,n,s){return this.request(ne.merge(s||{},{method:e,url:t,data:n}))}}));var ke=Ee;function Se(e){this.message=e}Se.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Se.prototype.__CANCEL__=!0;var xe=Se;function Ae(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new xe(e),t(n.reason))}))}Ae.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Ae.source=function(){var e;return{token:new Ae((function(t){e=t})),cancel:e}};var Re=Ae;function Pe(e){var t=new ke(e),n=Z(ke.prototype.request,t);return ne.extend(n,ke.prototype,t),ne.extend(n,t),n}var Te=Pe(ve);Te.Axios=ke,Te.create=function(e){return Pe(ne.merge(ve,e))},Te.Cancel=xe,Te.CancelToken=Re,Te.isCancel=be,Te.all=function(e){return Promise.all(e)},Te.spread=function(e){return function(t){return e.apply(null,t)}};var Ne=Te,Ve=Te;Ne.default=Ve;var Fe=Ne,Le=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],Ue=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"],De=function(e){return!e||!e.code||(-1!==Le.indexOf(e.code)||-1===Ue.indexOf(e.code))},Be=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNetworkError=r,t.isRetryableError=l,t.isSafeRequestError=d,t.isIdempotentRequestError=u,t.isNetworkOrIdempotentRequestError=c,t.exponentialDelay=h,t.default=f;var n,s=(n=De)&&n.__esModule?n:{default:n};var o="axios-retry";function r(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,s.default)(e)}var a=["get","head","options"],i=a.concat(["put","delete"]);function l(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function d(e){return!!e.config&&(l(e)&&-1!==a.indexOf(e.config.method))}function u(e){return!!e.config&&(l(e)&&-1!==i.indexOf(e.config.method))}function c(e){return r(e)||u(e)}function p(){return 0}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e),n=.2*t*Math.random();return t+n}function m(e){var t=e[o]||{};return t.retryCount=t.retryCount||0,e[o]=t,t}function f(e,t){e.interceptors.request.use((function(e){return m(e).lastRequestTime=Date.now(),e})),e.interceptors.response.use(null,(function(n){var s=n.config;if(!s)return Promise.reject(n);var r=function(e,t){return Object.assign({},t,e[o])}(s,t),a=r.retries,i=void 0===a?3:a,l=r.retryCondition,d=void 0===l?c:l,u=r.retryDelay,h=void 0===u?p:u,f=r.shouldResetTimeout,v=void 0!==f&&f,g=m(s);if(d(n)&&g.retryCount<i){g.retryCount+=1;var y=h(g.retryCount,n);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,s),!v&&s.timeout&&g.lastRequestTime){var w=Date.now()-g.lastRequestTime;s.timeout=Math.max(s.timeout-w-y,1)}return s.transformRequest=[function(e){return e}],new Promise((function(t){return setTimeout((function(){return t(e(s))}),y)}))}return Promise.reject(n)}))}f.isNetworkError=r,f.isSafeRequestError=d,f.isIdempotentRequestError=u,f.isNetworkOrIdempotentRequestError=c,f.exponentialDelay=h,f.isRetryableError=l})).default,Ie=Oe;function Oe(e){Me.length||qe(),Me[Me.length]=e}var qe,Me=[],je=0;function ze(){for(;je<Me.length;){var e=je;if(je+=1,Me[e].call(),je>1024){for(var t=0,n=Me.length-je;t<n;t++)Me[t]=Me[t+je];Me.length-=je,je=0}}Me.length=0,je=0}var He,$e,We,Ge=void 0!==w?w:self,Ye=Ge.MutationObserver||Ge.WebKitMutationObserver;function Ze(e){return function(){var t=setTimeout(s,0),n=setInterval(s,50);function s(){clearTimeout(t),clearInterval(n),e()}}}function Xe(){}"function"==typeof Ye?(He=1,$e=new Ye(ze),We=document.createTextNode(""),$e.observe(We,{characterData:!0}),qe=function(){He=-He,We.data=He}):qe=Ze(ze),Oe.requestFlush=qe,Oe.makeRequestCallFromTimer=Ze;var Ke=null,Je={};var Qe=et;function et(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,e!==Xe&&at(e,this)}function tt(e,t){for(;3===e._V;)e=e._W;if(et._Y&&et._Y(e),0===e._V)return 0===e._U?(e._U=1,void(e._X=t)):1===e._U?(e._U=2,void(e._X=[e._X,t])):void e._X.push(t);!function(e,t){Ie((function(){var n=1===e._V?t.onFulfilled:t.onRejected;if(null!==n){var s=function(e,t){try{return e(t)}catch(e){return Ke=e,Je}}(n,e._W);s===Je?st(t.promise,Ke):nt(t.promise,s)}else 1===e._V?nt(t.promise,e._W):st(t.promise,e._W)}))}(e,t)}function nt(e,t){if(t===e)return st(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=function(e){try{return e.then}catch(e){return Ke=e,Je}}(t);if(n===Je)return st(e,Ke);if(n===e.then&&t instanceof et)return e._V=3,e._W=t,void ot(e);if("function"==typeof n)return void at(n.bind(t),e)}e._V=1,e._W=t,ot(e)}function st(e,t){e._V=2,e._W=t,et._Z&&et._Z(e,t),ot(e)}function ot(e){if(1===e._U&&(tt(e,e._X),e._X=null),2===e._U){for(var t=0;t<e._X.length;t++)tt(e,e._X[t]);e._X=null}}function rt(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function at(e,t){var n=!1,s=function(e,t,n){try{e(t,n)}catch(e){return Ke=e,Je}}(e,(function(e){n||(n=!0,nt(t,e))}),(function(e){n||(n=!0,st(t,e))}));n||s!==Je||(n=!0,st(t,Ke))}et._Y=null,et._Z=null,et._0=Xe,et.prototype.then=function(e,t){if(this.constructor!==et)return function(e,t,n){return new e.constructor((function(s,o){var r=new et(Xe);r.then(s,o),tt(e,new rt(t,n,r))}))}(this,e,t);var n=new et(Xe);return tt(this,new rt(e,t,n)),n},Qe.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,(function(e){setTimeout((function(){throw e}),0)}))},Qe.prototype.finally=function(e){return this.then((function(t){return Qe.resolve(e()).then((function(){return t}))}),(function(t){return Qe.resolve(e()).then((function(){throw t}))}))};var it=ht(!0),lt=ht(!1),dt=ht(null),ut=ht(void 0),ct=ht(0),pt=ht("");function ht(e){var t=new Qe(Qe._0);return t._V=1,t._W=e,t}Qe.resolve=function(e){if(e instanceof Qe)return e;if(null===e)return dt;if(void 0===e)return ut;if(!0===e)return it;if(!1===e)return lt;if(0===e)return ct;if(""===e)return pt;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new Qe(t.bind(e))}catch(e){return new Qe((function(t,n){n(e)}))}return ht(e)};var mt=function(e){return"function"==typeof Array.from?(mt=Array.from,Array.from(e)):(mt=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};Qe.all=function(e){var t=mt(e);return new Qe((function(e,n){if(0===t.length)return e([]);var s=t.length;function o(r,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof Qe&&a.then===Qe.prototype.then){for(;3===a._V;)a=a._W;return 1===a._V?o(r,a._W):(2===a._V&&n(a._W),void a.then((function(e){o(r,e)}),n))}var i=a.then;if("function"==typeof i)return void new Qe(i.bind(a)).then((function(e){o(r,e)}),n)}t[r]=a,0==--s&&e(t)}for(var r=0;r<t.length;r++)o(r,t[r])}))},Qe.reject=function(e){return new Qe((function(t,n){n(e)}))},Qe.race=function(e){return new Qe((function(t,n){mt(e).forEach((function(e){Qe.resolve(e).then(t,n)}))}))},Qe.prototype.catch=function(e){return this.then(null,e)};var ft=[],vt=[],gt=Ie.makeRequestCallFromTimer((function(){if(vt.length)throw vt.shift()}));var yt=wt;function wt(e){var t;(t=ft.length?ft.pop():new bt).task=e,Ie(t)}function bt(){this.task=null}bt.prototype.call=function(){try{this.task.call()}catch(e){wt.onerror?wt.onerror(e):(vt.push(e),gt())}finally{this.task=null,ft[ft.length]=this}},Qe.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?function(e,t){for(var n=[],s=0;s<t;s++)n.push("a"+s);var o=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([_t]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(Qe,e)}(e,t):function(e){for(var t=Math.max(e.length-1,3),n=[],s=0;s<t;s++)n.push("a"+s);var o=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+_t+";","var res;","switch (argLength) {",n.concat(["extra"]).map((function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"})).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(Qe,e)}(e)};var _t="function (err, res) {if (err) { rj(err); } else { rs(res); }}";Qe.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,s=this;try{return e.apply(this,arguments).nodeify(n,s)}catch(e){if(null==n)return new Qe((function(t,n){n(e)}));yt((function(){n.call(s,e)}))}}},Qe.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then((function(n){yt((function(){e.call(t,null,n)}))}),(function(n){yt((function(){e.call(t,n)}))}))},Qe.enableSynchronous=function(){Qe.prototype.isPending=function(){return 0==this.getState()},Qe.prototype.isFulfilled=function(){return 1==this.getState()},Qe.prototype.isRejected=function(){return 2==this.getState()},Qe.prototype.getValue=function(){if(3===this._V)return this._W.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._W},Qe.prototype.getReason=function(){if(3===this._V)return this._W.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._W},Qe.prototype.getState=function(){return 3===this._V?this._W.getState():-1===this._V||-2===this._V?0:this._V}},Qe.disableSynchronous=function(){Qe.prototype.isPending=void 0,Qe.prototype.isFulfilled=void 0,Qe.prototype.isRejected=void 0,Qe.prototype.getValue=void 0,Qe.prototype.getReason=void 0,Qe.prototype.getState=void 0};var Ct=Qe;var Et=class{constructor(e=1e4,t=5,n,s=!1){Be(Fe,{retries:t}),this.timeout=e,this.proxyConfig=n,s&&this.enableDebug()}buildRequestConfig({payload:e,parameters:t,headers:n,baseUrl:s}){let o={method:"GET",timeout:this.timeout,params:t,headers:n,baseURL:s,validateStatus:function(e){return e<500}};return e&&(o.method="POST",o.data=e),this.proxyConfig&&(o.proxy=this.proxyConfig),o}buildSmartyResponse(e,t){return e?new Y(e.status,e.data):new Y(void 0,void 0,t)}send(e){return new Ct(((t,n)=>{let s=this.buildRequestConfig(e);Fe(s).then((e=>{let s=this.buildSmartyResponse(e);s.statusCode>=400&&n(s),t(s)})).catch((e=>n(this.buildSmartyResponse(void 0,e))))}))}enableDebug(){Fe.interceptors.request.use((e=>(console.log("Request:\r\n",e),console.log("\r\n*******************************************\r\n"),e))),Fe.interceptors.response.use((e=>(console.log("Response:\r\n"),console.log("Status:",e.status,e.statusText),console.log("Headers:",e.headers),console.log("Data:",e.data),e)))}};var kt=class{constructor(e,t){this.authId=e,this.hostName=t}sign(e){e.parameters["auth-id"]=this.authId,this.hostName&&(e.headers.Referer=this.hostName)}};const St=$.UnprocessableEntityError;var xt=class{constructor(e,t){this.signer=t,this.sender=e}send(e){if(e.payload&&this.signer instanceof kt){throw new St("Shared credentials cannot be used in batches with a length greater than 1 or when using the US Extract API.")}return new Ct(((t,n)=>{this.signer.sign(e),this.sender.send(e).then(t).catch(n)}))}};var At=class{constructor(e,t){this.urlOverride=t,this.sender=e}send(e){return new Ct(((t,n)=>{e.baseUrl=this.urlOverride,this.sender.send(e).then(t).catch(n)}))}};var Rt="1.6.0";var Pt=class{constructor(e){this.sender=e}send(e){return e.parameters.agent="smartystreets (sdk:javascript@"+Rt+")",new Ct(((t,n)=>{this.sender.send(e).then(t).catch(n)}))}};var Tt=class{constructor(e,t){this.authId=e,this.authToken=t}sign(e){e.parameters["auth-id"]=this.authId,e.parameters["auth-token"]=this.authToken}};var Nt=class{constructor(e,t){this.sender=e,this.customHeaders=t}send(e){for(let t in this.customHeaders)e.headers[t]=this.customHeaders[t];return new Ct(((t,n)=>{this.sender.send(e).then(t).catch(n)}))}};var Vt=class{constructor(e){this.sender=e}send(e){return new Ct(((t,n)=>{this.sender.send(e).then(t).catch((e=>{switch(e.statusCode){case 400:e.error=new $.BadRequestError;break;case 401:e.error=new $.BadCredentialsError;break;case 402:e.error=new $.PaymentRequiredError;break;case 413:e.error=new $.RequestEntityTooLargeError;break;case 422:e.error=new $.UnprocessableEntityError("GET request lacked required fields.");break;case 429:e.error=new $.TooManyRequestsError;break;case 500:e.error=new $.InternalServerError;break;case 503:e.error=new $.ServiceUnavailableError;break;case 504:e.error=new $.GatewayTimeoutError}n(e)}))}))}};var Ft=class{constructor(e,t){this.sender=e,this.licenses=t}send(e){return 0!==this.licenses.length&&(e.parameters.license=this.licenses.join(",")),new Ct(((t,n)=>{this.sender.send(e).then(t).catch(n)}))}};var Lt=class{constructor(e){this.inputIndex=e.input_index,this.candidateIndex=e.candidate_index,this.addressee=e.addressee,this.deliveryLine1=e.delivery_line_1,this.deliveryLine2=e.delivery_line_2,this.lastLine=e.last_line,this.deliveryPointBarcode=e.delivery_point_barcode,this.components={},void 0!==e.components&&(this.components.urbanization=e.components.urbanization,this.components.primaryNumber=e.components.primary_number,this.components.streetName=e.components.street_name,this.components.streetPredirection=e.components.street_predirection,this.components.streetPostdirection=e.components.street_postdirection,this.components.streetSuffix=e.components.street_suffix,this.components.secondaryNumber=e.components.secondary_number,this.components.secondaryDesignator=e.components.secondary_designator,this.components.extraSecondaryNumber=e.components.extra_secondary_number,this.components.extraSecondaryDesignator=e.components.extra_secondary_designator,this.components.pmbDesignator=e.components.pmb_designator,this.components.pmbNumber=e.components.pmb_number,this.components.cityName=e.components.city_name,this.components.defaultCityName=e.components.default_city_name,this.components.state=e.components.state_abbreviation,this.components.zipCode=e.components.zipcode,this.components.plus4Code=e.components.plus4_code,this.components.deliveryPoint=e.components.delivery_point,this.components.deliveryPointCheckDigit=e.components.delivery_point_check_digit),this.metadata={},void 0!==e.metadata&&(this.metadata.recordType=e.metadata.record_type,this.metadata.zipType=e.metadata.zip_type,this.metadata.countyFips=e.metadata.county_fips,this.metadata.countyName=e.metadata.county_name,this.metadata.carrierRoute=e.metadata.carrier_route,this.metadata.congressionalDistrict=e.metadata.congressional_district,this.metadata.buildingDefaultIndicator=e.metadata.building_default_indicator,this.metadata.rdi=e.metadata.rdi,this.metadata.elotSequence=e.metadata.elot_sequence,this.metadata.elotSort=e.metadata.elot_sort,this.metadata.latitude=e.metadata.latitude,this.metadata.longitude=e.metadata.longitude,this.metadata.precision=e.metadata.precision,this.metadata.timeZone=e.metadata.time_zone,this.metadata.utcOffset=e.metadata.utc_offset,this.metadata.obeysDst=e.metadata.dst,this.metadata.isEwsMatch=e.metadata.ews_match),this.analysis={},void 0!==e.analysis&&(this.analysis.dpvMatchCode=e.analysis.dpv_match_code,this.analysis.dpvFootnotes=e.analysis.dpv_footnotes,this.analysis.cmra=e.analysis.dpv_cmra,this.analysis.vacant=e.analysis.dpv_vacant,this.analysis.active=e.analysis.active,this.analysis.isEwsMatch=e.analysis.ews_match,this.analysis.footnotes=e.analysis.footnotes,this.analysis.lacsLinkCode=e.analysis.lacslink_code,this.analysis.lacsLinkIndicator=e.analysis.lacslink_indicator,this.analysis.isSuiteLinkMatch=e.analysis.suitelink_match)}};var Ut=class{constructor(e,t,n,s,o,r,a,i,l,d,u,c){this.street=e,this.street2=t,this.secondary=n,this.city=s,this.state=o,this.zipCode=r,this.lastLine=a,this.addressee=i,this.urbanization=l,this.match=d,this.maxCandidates=u,this.inputId=c,this.result=[]}};var Dt=class{constructor(e){this.baseUrl="",this.payload=e,this.headers={"Content-Type":"application/json; charset=utf-8"},this.parameters={}}};var Bt=class{constructor(e){this.lookup=e,this.data={}}add(e,t){this.lookupFieldIsPopulated(t)&&(this.data[e]=this.lookup[t])}lookupFieldIsPopulated(e){return""!==this.lookup[e]&&void 0!==this.lookup[e]}},It=(e,t)=>{let n=new Bt(e);for(let e in t)n.add(e,t[e]);return n.data},Ot=(e,t,n,s)=>{if(e.isEmpty())throw new $.BatchEmptyError;let o=new Dt;return 1===e.length()?o.parameters=r(e)[0]:o.payload=r(e),new Ct(((s,r)=>{t.send(o).then((t=>{t.error&&r(t.error),s(function(e,t){return t.payload.map((t=>{let s=new n(t);e.getByIndex(s.inputIndex).result.push(s)})),e}(e,t))})).catch(r)}));function r(e){return e.lookups.map((e=>It(e,s)))}},qt={city:"city",state:"state",zipcode:"zipCode"},Mt={country:"country",freeform:"freeform",address1:"address1",address2:"address2",address3:"address3",address4:"address4",organization:"organization",locality:"locality",administrative_area:"administrativeArea",postal_code:"postalCode",geocode:"geocode",language:"language"},jt={latitude:"latitude",longitude:"longitude"};const zt=$.UndefinedLookupError,Ht={street:"street",street2:"street2",secondary:"secondary",city:"city",state:"state",zipcode:"zipCode",lastline:"lastLine",addressee:"addressee",urbanization:"urbanization",match:"match",candidates:"maxCandidates"};var $t=class{constructor(e){this.sender=e}send(e){const t=e instanceof Ut;if(!t&&!(e instanceof G))throw new zt;let n;return t?(n=new G,n.add(e)):n=e,Ot(n,this.sender,Lt,Ht)}};var Wt=class{constructor(e,t,n,s){this.city=e,this.state=t,this.zipCode=n,this.inputId=s,this.result=[]}};var Gt=class{constructor(e){this.inputIndex=e.input_index,this.status=e.status,this.reason=e.reason,this.valid=void 0===this.status&&void 0===this.reason,this.cities=e.city_states?e.city_states.map((e=>({city:e.city,stateAbbreviation:e.state_abbreviation,state:e.state,mailableCity:e.mailable_city}))):[],this.zipcodes=e.zipcodes?e.zipcodes.map((e=>({zipcode:e.zipcode,zipcodeType:e.zipcode_type,defaultCity:e.default_city,countyFips:e.county_fips,countyName:e.county_name,latitude:e.latitude,longitude:e.longitude,precision:e.precision,stateAbbreviation:e.state_abbreviation,state:e.state,alternateCounties:e.alternate_counties?e.alternate_counties.map((e=>({countyFips:e.county_fips,countyName:e.county_name,stateAbbreviation:e.state_abbreviation,state:e.state}))):[]}))):[]}};const Yt=$.UndefinedLookupError,Zt=qt;var Xt=class{constructor(e){this.sender=e}send(e){const t=e instanceof Wt;if(!t&&!(e instanceof G))throw new Yt;let n;return t?(n=new G,n.add(e)):n=e,Ot(n,this.sender,Gt,Zt)}};var Kt=class{constructor(e){this.text=e.text,this.streetLine=e.street_line,this.city=e.city,this.state=e.state}};var Jt=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new $.UndefinedLookupError;let t=new Dt;return t.parameters=function(e){return{prefix:e.prefix,suggestions:e.maxSuggestions,city_filter:t(e.cityFilter,","),state_filter:t(e.stateFilter,","),prefer:t(e.prefer,";"),prefer_ratio:e.preferRatio,geolocate:e.geolocate,geolocate_precision:e.geolocatePrecision};function t(e,t){if(e.length)return e.join(t)}}(e),new Ct(((n,s)=>{this.sender.send(t).then((t=>{var o;t.error&&s(t.error),e.result=null===(o=t.payload).suggestions?[]:o.suggestions.map((e=>new Kt(e))),n(e)})).catch(s)}))}};var Qt=class{constructor(e){this.streetLine=e.street_line,this.secondary=e.secondary,this.city=e.city,this.state=e.state,this.zipcode=e.zipcode,this.entries=e.entries}};var en=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new $.UndefinedLookupError;let t=new Dt;return t.parameters=function(e){return{search:e.search,selected:e.selected,max_results:e.maxResults,include_only_cities:t(e.includeOnlyCities,";"),include_only_states:t(e.includeOnlyStates,";"),include_only_zip_codes:t(e.includeOnlyZIPCodes,";"),exclude_states:t(e.excludeStates,";"),prefer_cities:t(e.preferCities,";"),prefer_states:t(e.preferStates,";"),prefer_zip_codes:t(e.preferZIPCodes,";"),prefer_ratio:e.preferRatio,prefer_geolocation:e.preferGeolocation};function t(e,t){if(e.length)return e.join(t)}}(e),new Ct(((n,s)=>{this.sender.send(t).then((t=>{var o;t.error&&s(t.error),e.result=null===(o=t.payload).suggestions?[]:o.suggestions.map((e=>new Qt(e))),n(e)})).catch(s)}))}};var tn=class{constructor(e){this.text=e.text,this.verified=e.verified,this.line=e.line,this.start=e.start,this.end=e.end,this.candidates=e.api_output.map((e=>new Lt(e)))}};var nn=class{constructor({meta:e,addresses:t}){this.meta={lines:e.lines,unicode:e.unicode,addressCount:e.address_count,verifiedCount:e.verified_count,bytes:e.bytes,characterCount:e.character_count},this.addresses=t.map((e=>new tn(e)))}};var sn=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new $.UndefinedLookupError;let t=new Dt(e.text);var n;return t.parameters={html:(n=e).html,aggressive:n.aggressive,addr_line_breaks:n.addressesHaveLineBreaks,addr_per_line:n.addressesPerLine},new Ct(((n,s)=>{this.sender.send(t).then((t=>{t.error&&s(t.error),e.result=new nn(t.payload),n(e)})).catch(s)}))}};var on=class{constructor(e){this.organization=e.organization,this.address1=e.address1,this.address2=e.address2,this.address3=e.address3,this.address4=e.address4,this.address5=e.address5,this.address6=e.address6,this.address7=e.address7,this.address8=e.address8,this.address9=e.address9,this.address10=e.address10,this.address11=e.address11,this.address12=e.address12,this.components={},void 0!==e.components&&(this.components.countryIso3=e.components.country_iso_3,this.components.superAdministrativeArea=e.components.super_administrative_area,this.components.administrativeArea=e.components.administrative_area,this.components.subAdministrativeArea=e.components.sub_administrative_area,this.components.dependentLocality=e.components.dependent_locality,this.components.dependentLocalityName=e.components.dependent_locality_name,this.components.doubleDependentLocality=e.components.double_dependent_locality,this.components.locality=e.components.locality,this.components.postalCode=e.components.postal_code,this.components.postalCodeShort=e.components.postal_code_short,this.components.postalCodeExtra=e.components.postal_code_extra,this.components.premise=e.components.premise,this.components.premiseExtra=e.components.premise_extra,this.components.premisePrefixNumber=e.components.premise_prefix_number,this.components.premiseNumber=e.components.premise_number,this.components.premiseType=e.components.premise_type,this.components.thoroughfare=e.components.thoroughfare,this.components.thoroughfarePredirection=e.components.thoroughfare_predirection,this.components.thoroughfarePostdirection=e.components.thoroughfare_postdirection,this.components.thoroughfareName=e.components.thoroughfare_name,this.components.thoroughfareTrailingType=e.components.thoroughfare_trailing_type,this.components.thoroughfareType=e.components.thoroughfare_type,this.components.dependentThoroughfare=e.components.dependent_thoroughfare,this.components.dependentThoroughfarePredirection=e.components.dependent_thoroughfare_predirection,this.components.dependentThoroughfarePostdirection=e.components.dependent_thoroughfare_postdirection,this.components.dependentThoroughfareName=e.components.dependent_thoroughfare_name,this.components.dependentThoroughfareTrailingType=e.components.dependent_thoroughfare_trailing_type,this.components.dependentThoroughfareType=e.components.dependent_thoroughfare_type,this.components.building=e.components.building,this.components.buildingLeadingType=e.components.building_leading_type,this.components.buildingName=e.components.building_name,this.components.buildingTrailingType=e.components.building_trailing_type,this.components.subBuildingType=e.components.sub_building_type,this.components.subBuildingNumber=e.components.sub_building_number,this.components.subBuildingName=e.components.sub_building_name,this.components.subBuilding=e.components.sub_building,this.components.postBox=e.components.post_box,this.components.postBoxType=e.components.post_box_type,this.components.postBoxNumber=e.components.post_box_number),this.analysis={},void 0!==e.analysis&&(this.analysis.verificationStatus=e.analysis.verification_status,this.analysis.addressPrecision=e.analysis.address_precision,this.analysis.maxAddressPrecision=e.analysis.max_address_precision,this.analysis.changes={},void 0!==e.analysis.changes&&(this.analysis.changes.organization=e.analysis.changes.organization,this.analysis.changes.address1=e.analysis.changes.address1,this.analysis.changes.address2=e.analysis.changes.address2,this.analysis.changes.address3=e.analysis.changes.address3,this.analysis.changes.address4=e.analysis.changes.address4,this.analysis.changes.address5=e.analysis.changes.address5,this.analysis.changes.address6=e.analysis.changes.address6,this.analysis.changes.address7=e.analysis.changes.address7,this.analysis.changes.address8=e.analysis.changes.address8,this.analysis.changes.address9=e.analysis.changes.address9,this.analysis.changes.address10=e.analysis.changes.address10,this.analysis.changes.address11=e.analysis.changes.address11,this.analysis.changes.address12=e.analysis.changes.address12,this.analysis.changes.components={},void 0!==e.analysis.changes.components&&(this.analysis.changes.components.countryIso3=e.analysis.changes.components.country_iso_3,this.analysis.changes.components.superAdministrativeArea=e.analysis.changes.components.super_administrative_area,this.analysis.changes.components.administrativeArea=e.analysis.changes.components.administrative_area,this.analysis.changes.components.subAdministrativeArea=e.analysis.changes.components.sub_administrative_area,this.analysis.changes.components.dependentLocality=e.analysis.changes.components.dependent_locality,this.analysis.changes.components.dependentLocalityName=e.analysis.changes.components.dependent_locality_name,this.analysis.changes.components.doubleDependentLocality=e.analysis.changes.components.double_dependent_locality,this.analysis.changes.components.locality=e.analysis.changes.components.locality,this.analysis.changes.components.postalCode=e.analysis.changes.components.postal_code,this.analysis.changes.components.postalCodeShort=e.analysis.changes.components.postal_code_short,this.analysis.changes.components.postalCodeExtra=e.analysis.changes.components.postal_code_extra,this.analysis.changes.components.premise=e.analysis.changes.components.premise,this.analysis.changes.components.premiseExtra=e.analysis.changes.components.premise_extra,this.analysis.changes.components.premisePrefixNumber=e.analysis.changes.components.premise_prefix_number,this.analysis.changes.components.premiseNumber=e.analysis.changes.components.premise_number,this.analysis.changes.components.premiseType=e.analysis.changes.components.premise_type,this.analysis.changes.components.thoroughfare=e.analysis.changes.components.thoroughfare,this.analysis.changes.components.thoroughfarePredirection=e.analysis.changes.components.thoroughfare_predirection,this.analysis.changes.components.thoroughfarePostdirection=e.analysis.changes.components.thoroughfare_postdirection,this.analysis.changes.components.thoroughfareName=e.analysis.changes.components.thoroughfare_name,this.analysis.changes.components.thoroughfareTrailingType=e.analysis.changes.components.thoroughfare_trailing_type,this.analysis.changes.components.thoroughfareType=e.analysis.changes.components.thoroughfare_type,this.analysis.changes.components.dependentThoroughfare=e.analysis.changes.components.dependent_thoroughfare,this.analysis.changes.components.dependentThoroughfarePredirection=e.analysis.changes.components.dependent_thoroughfare_predirection,this.analysis.changes.components.dependentThoroughfarePostdirection=e.analysis.changes.components.dependent_thoroughfare_postdirection,this.analysis.changes.components.dependentThoroughfareName=e.analysis.changes.components.dependent_thoroughfare_name,this.analysis.changes.components.dependentThoroughfareTrailingType=e.analysis.changes.components.dependent_thoroughfare_trailing_type,this.analysis.changes.components.dependentThoroughfareType=e.analysis.changes.components.dependent_thoroughfare_type,this.analysis.changes.components.building=e.analysis.changes.components.building,this.analysis.changes.components.buildingLeadingType=e.analysis.changes.components.building_leading_type,this.analysis.changes.components.buildingName=e.analysis.changes.components.building_name,this.analysis.changes.components.buildingTrailingType=e.analysis.changes.components.building_trailing_type,this.analysis.changes.components.subBuildingType=e.analysis.changes.components.sub_building_type,this.analysis.changes.components.subBuildingNumber=e.analysis.changes.components.sub_building_number,this.analysis.changes.components.subBuildingName=e.analysis.changes.components.sub_building_name,this.analysis.changes.components.subBuilding=e.analysis.changes.components.sub_building,this.analysis.changes.components.postBox=e.analysis.changes.components.post_box,this.analysis.changes.components.postBoxType=e.analysis.changes.components.post_box_type,this.analysis.changes.components.postBoxNumber=e.analysis.changes.components.post_box_number))),this.metadata={},void 0!==e.metadata&&(this.metadata.latitude=e.metadata.latitude,this.metadata.longitude=e.metadata.longitude,this.metadata.geocodePrecision=e.metadata.geocode_precision,this.metadata.maxGeocodePrecision=e.metadata.max_geocode_precision,this.metadata.addressFormat=e.metadata.address_format)}};const rn=Mt;var an=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new $.UndefinedLookupError;let t=new Dt;return t.parameters=It(e,rn),new Ct(((n,s)=>{this.sender.send(t).then((t=>{t.error&&s(t.error),n(function(e,t){return e.payload.map((e=>{t.result.push(new on(e))})),t}(t,e))})).catch(s)}))}};const ln=jt,{UndefinedLookupError:dn}=$;var un=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new dn;let t=new Dt;return t.parameters=It(e,ln),new Promise(((n,s)=>{this.sender.send(t).then((t=>{t.error&&s(t.error),n(function(e,t){return t.response=e.payload,t}(t,e))})).catch(s)}))}};const cn=$.BadCredentialsError;var pn=class{constructor(e){if(!e instanceof Tt||!e instanceof kt)throw new cn;this.signer=e,this.httpSender=void 0,this.maxRetries=5,this.maxTimeout=1e4,this.baseUrl=void 0,this.proxy=void 0,this.customHeaders={},this.debug=void 0,this.licenses=[]}withMaxRetries(e){return this.maxRetries=e,this}withMaxTimeout(e){return this.maxTimeout=e,this}withSender(e){return this.httpSender=e,this}withBaseUrl(e){return this.baseUrl=e,this}withProxy(e,t,n,s){return this.proxy={host:e,port:t},n&&s&&(this.proxy.auth={username:n,password:s}),this}withCustomHeaders(e){return this.customHeaders=e,this}withDebug(){return this.debug=!0,this}withLicenses(e){for(const t in e)this.licenses.push(t);return this}buildSender(){if(this.httpSender)return this.httpSender;const e=new Et(this.maxTimeout,this.maxRetries,this.proxy,this.debug),t=new Vt(e),n=new xt(t,this.signer),s=new Pt(n),o=new Nt(s,this.customHeaders),r=new At(o,this.baseUrl);return new Ft(r,this.licenses)}buildClient(e,t){return this.baseUrl||(this.baseUrl=e),new t(this.buildSender())}buildUsStreetApiClient(){return this.buildClient("https://us-street.api.smartystreets.com/street-address",$t)}buildUsZipcodeClient(){return this.buildClient("https://us-zipcode.api.smartystreets.com/lookup",Xt)}buildUsAutocompleteClient(){return this.buildClient("https://us-autocomplete.api.smartystreets.com/suggest",Jt)}buildUsAutocompleteProClient(){return this.buildClient("https://us-autocomplete-pro.api.smartystreets.com/lookup",en)}buildUsExtractClient(){return this.buildClient("https://us-extract.api.smartystreets.com/",sn)}buildInternationalStreetClient(){return this.buildClient("https://international-street.api.smartystreets.com/verify",an)}buildUsReverseGeoClient(){return this.buildClient("https://us-reverse-geo.api.smartystreets.com/lookup",un)}};function hn(e){return new pn(e)}var mn={usStreet:function(e){return hn(e).buildUsStreetApiClient()},usAutocomplete:function(e){return hn(e).buildUsAutocompleteClient()},usAutocompletePro:function(e){return hn(e).buildUsAutocompleteProClient()},usExtract:function(e){return hn(e).buildUsExtractClient()},usZipcode:function(e){return hn(e).buildUsZipcodeClient()},internationalStreet:function(e){return hn(e).buildInternationalStreetClient()},usReverseGeo:function(e){return hn(e).buildUsReverseGeoClient()}};var fn=class{constructor(e){this.result=[],this.prefix=e,this.maxSuggestions=void 0,this.cityFilter=[],this.stateFilter=[],this.prefer=[],this.preferRatio=void 0,this.geolocate=void 0,this.geolocatePrecision=void 0}};var vn=class{constructor(e){this.result=[],this.search=e,this.selected=void 0,this.maxResults=void 0,this.includeOnlyCities=[],this.includeOnlyStates=[],this.includeOnlyZIPCodes=[],this.excludeStates=[],this.preferCities=[],this.preferStates=[],this.preferZIPCodes=[],this.preferRatio=void 0,this.preferGeolocation=void 0}};var gn=class{constructor(e){this.result={meta:{},addresses:[]},this.text=e,this.html=void 0,this.aggressive=void 0,this.addressesHaveLineBreaks=void 0,this.addressesPerLine=void 0}};const yn=$.UnprocessableEntityError,wn="Country field is required.",bn="Either freeform or address1 is required.",_n="Insufficient information: One or more required fields were not set on the lookup.",Cn="Invalid input: geocode can only be set to 'true' (default is 'false'.",En="Invalid input: language can only be set to 'latin' or 'native'. When not set, the the output language will match the language of the input values.";function kn(e){if(!e)return!0;return e.replace(/\s/g,"").length<1}function Sn(e){return!kn(e)}var xn={core:{Batch:G,ClientBuilder:pn,buildClient:mn,SharedCredentials:kt,StaticCredentials:Tt,Errors:$},usStreet:{Lookup:Ut,Candidate:Lt},usZipcode:{Lookup:Wt,Result:Gt},usAutocomplete:{Lookup:fn,Suggestion:Kt},usAutocompletePro:{Lookup:vn,Suggestion:Qt},usExtract:{Lookup:gn,Result:nn},internationalStreet:{Lookup:class{constructor(e,t){this.result=[],this.country=e,this.freeform=t,this.address1=void 0,this.address2=void 0,this.address3=void 0,this.address4=void 0,this.organization=void 0,this.locality=void 0,this.administrativeArea=void 0,this.postalCode=void 0,this.geocode=void 0,this.language=void 0,this.inputId=void 0,this.ensureEnoughInfo=this.ensureEnoughInfo.bind(this),this.ensureValidData=this.ensureValidData.bind(this)}ensureEnoughInfo(){if(kn(this.country))throw new yn(wn);if(Sn(this.freeform))return!0;if(kn(this.address1))throw new yn(bn);if(Sn(this.postalCode))return!0;if(kn(this.locality)||kn(this.administrativeArea))throw new yn(_n);return!0}ensureValidData(){if((()=>Sn(this.geocode)&&"true"!==this.geocode.toLowerCase())())throw new yn(Cn);if((()=>{let e=e=>this.language.toLowerCase()===e;return Sn(this.language)&&!(e("latin")||e("native"))})())throw new yn(En);return!0}},Candidate:on}};const An=xn.core,Rn=xn.usStreet.Lookup,Pn=new An.SharedCredentials("1674975535561744"),Tn=An.buildClient.usStreet(Pn);var Nn=t({props:{type:String,modelValue:{type:Object,required:!0},hasHome:{type:Boolean,default:!1},help:String},emits:["update:modelValue"],setup(e,{emit:t}){var n;const{modelValue:s}=b(e),o=i(""),r=i(""),a=i(!1);let d="",c=0,p=0;(null==(n=e.modelValue)?void 0:n.address)&&(d=e.modelValue.address,o.value=e.modelValue.address.split(",")[0],r.value=e.modelValue.address.replace(/^[^,]*, */,""),c=e.modelValue.latitude||0,p=e.modelValue.longitude||0),e.modelValue?a.value=e.modelValue.sameAsHome||!1:a.value="Mail"===e.type,_(o,(()=>{""===o.value?r.value="":""===r.value&&(r.value="Sunnyvale, CA")}));const h=i(null);_(a,(()=>{o.value=r.value="",t("update:modelValue",{address:"",latitude:0,longitude:0,sameAsHome:a.value}),a.value||u((()=>{var e;null==(e=h.value)||e.focus()}))}));const m=i(null);const f=i(""),v=l("setValidity");_(f,(()=>{null==v||v(`person-address-${e.type}`,!f.value)}));const{submitted:g}=C();async function y(){var e,n;if(!o.value&&!r.value)return void t("update:modelValue",{address:"",latitude:0,longitude:0,sameAsHome:a.value});let s=`${o.value}, ${r.value}`;if(s.match(/\W[A-Za-z][A-Za-z]\W/)||(s+=", CA"),s===d)return;const i=new Rn;i.street=s,f.value="Verifying address...";const l=await Tn.send(i).catch(console.error);if(l)if(l.lookups[0].result.length){const s=l.lookups[0].result[0];o.value=s.deliveryLine1||"",s.deliveryLine2&&(o.value+=", "+s.deliveryLine2),r.value=s.lastLine?s.lastLine.replace(/-[0-9]{4}/,""):"",d=o.value+", "+r.value,c=(null==(e=s.metadata)?void 0:e.latitude)||0,p=(null==(n=s.metadata)?void 0:n.longitude)||0,f.value="",t("update:modelValue",{address:d,latitude:c,longitude:p})}else d=s,f.value="We couldn't locate this address.  Please provide a valid address.";else f.value="The address could not be verified because the address verification service is not available."}_(g,y);const w="Home"===e.type?"Home Address":"Work"===e.type?"Business Hours Address":"Mailing Address";return{error:f,label:w,line1:o,line1input:h,line2:r,line2input:m,onFocusLine2:function(){var e;null==(e=m.value)||e.select()},onBlur:function(e){e.relatedTarget!==h.value&&e.relatedTarget!==m.value&&y()},sameAsHome:a}}});const Vn={class:"form-item-input"},Fn={key:0,class:"person-address-same-box"},Ln={class:"form-item-help person-address-helpbox"};Nn.render=function(e,t,n,s,o,r){return h(),p(v,null,[f("label",{class:["form-item-label",`person-address-label-${e.type}`],textContent:E(e.label)},null,10,["textContent"]),f("div",Vn,["Home"!==e.type?(h(),p("div",Fn,[k(f("input",{class:"person-address-same",id:`person-address-${e.type}-same`,type:"checkbox",autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=t=>e.sameAsHome=t),disabled:!e.hasHome},null,8,["id","disabled"]),[[S,e.sameAsHome]]),f("label",{class:"person-address-same-label",for:`person-address-${e.type}-same`},"Same as home address",8,["for"])])):g("",!0),e.sameAsHome?g("",!0):k((h(),p("input",{key:1,class:["form-control person-address-input",{"form-control-invalid":e.error}],ref:"line1input",id:`person-address-${e.type}`,"onUpdate:modelValue":t[2]||(t[2]=t=>e.line1=t),onBlur:t[3]||(t[3]=(...t)=>e.onBlur&&e.onBlur(...t))},null,42,["id"])),[[x,e.line1]]),e.sameAsHome?g("",!0):k((h(),p("input",{key:2,class:["form-control person-address-input",{"form-control-invalid":e.error}],ref:"line2input","onUpdate:modelValue":t[4]||(t[4]=t=>e.line2=t),onFocus:t[5]||(t[5]=(...t)=>e.onFocusLine2&&e.onFocusLine2(...t)),onBlur:t[6]||(t[6]=(...t)=>e.onBlur&&e.onBlur(...t))},null,34)),[[x,e.line2]])]),f("div",Ln,[e.help?(h(),p("div",{key:0,class:"form-item-help-text",textContent:E(e.help)},null,8,["textContent"])):g("",!0),e.error?(h(),p("div",{key:1,class:"form-item-error-text",textContent:E(e.error)},null,8,["textContent"])):g("",!0)])],64)};var Un=t({components:{Modal:n,PersonEditAddress:Nn,SForm:s,SFInput:o,SSpinner:a},props:{pid:{type:Number,required:!0}},setup(e){const t=i(null);const n=i({}),s=i(!0);const o=i("");const r=i("");const a=i(!1);return{loading:s,modal:t,onCancel:function(){t.value.close(!1)},onSubmit:async function(){var s=new FormData;s.append("email",n.value.email),s.append("email2",n.value.email2),s.append("cellPhone",n.value.cellPhone),s.append("homePhone",n.value.homePhone),s.append("workPhone",n.value.workPhone),n.value.homeAddress.address&&(s.append("homeAddress",n.value.homeAddress.address),s.append("homeAddressLatitude",(n.value.homeAddress.latitude||0).toString()),s.append("homeAddressLongitude",(n.value.homeAddress.longitude||0).toString())),n.value.workAddress.address?(s.append("workAddress",n.value.workAddress.address),s.append("workAddressLatitude",(n.value.workAddress.latitude||0).toString()),s.append("workAddressLongitude",(n.value.workAddress.longitude||0).toString())):s.append("workAddressSameAsHome",n.value.workAddress.sameAsHome.toString()),n.value.mailAddress.address?s.append("mailAddress",n.value.mailAddress.address):s.append("mailAddressSameAsHome",n.value.mailAddress.sameAsHome.toString()),a.value=!0;try{await d.post(`/api/people/${e.pid}/contact`,s),t.value.close(!0)}catch(e){if(!e.response||409!==e.response.status)throw e;switch(e.response.data){case"email":o.value=n.value.email;break;case"cellPhone":r.value=n.value.cellPhone}}finally{a.value=!1}},person:n,show:function(){return async function(){s.value=!0,n.value=(await d.get(`/api/people/${e.pid}/contact`)).data,s.value=!1}(),t.value.show()},submitting:a,emailError:function(e){var t;return e&&(null==(t=n.value)?void 0:t.email)?n.value.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)?o.value===n.value.email?"Another user has this email address.":"":"This is not a valid email address.":""},email2Error:function(e){var t;return e&&(null==(t=n.value)?void 0:t.email2)?n.value.email2.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)?n.value.email===n.value.email2?"The two email addresses should not be the same.  (Leave this field empty if you only have one.)":"":"This is not a valid email address.":""},cellPhoneError:function(e){var t;return(null==(t=n.value)?void 0:t.cellPhone)?e&&10!==n.value.cellPhone.replace(/[^0-9]/g,"").length?"A valid phone number must have 10 digits.":r.value===n.value.cellPhone?"A different person has this cell phone number.":"":""},homePhoneError:function(e){var t;return e&&(null==(t=n.value)?void 0:t.homePhone)&&10!==n.value.homePhone.replace(/[^0-9]/g,"").length?"A valid phone number must have 10 digits.":""},workPhoneError:function(e){var t;return e&&(null==(t=n.value)?void 0:t.workPhone)&&10!==n.value.workPhone.replace(/[^0-9]/g,"").length?"A valid phone number must have 10 digits.":""}}}});Un.render=function(e,t,n,s,o,r){const a=c("SSpinner"),i=c("SFInput"),l=c("PersonEditAddress"),d=c("SForm"),u=c("Modal");return h(),p(u,{ref:"modal"},{default:m((()=>[f(d,{dialog:"",variant:"primary",title:"Edit Contact Information",submitLabel:"Save",disabled:e.submitting,onSubmit:e.onSubmit,onCancel:e.onCancel},{default:m((()=>[e.loading?(h(),p(a,{key:0})):(h(),p(v,{key:1},[f(i,{id:"person-email",label:"Email",help:"This is the email address you log in with.",trim:"",autofocus:"",modelValue:e.person.email,"onUpdate:modelValue":t[1]||(t[1]=t=>e.person.email=t),errorFn:e.emailError,style:{"text-transform":"lowercase"}},null,8,["modelValue","errorFn"]),f(i,{id:"person-email2",label:"Alt. Email",trim:"",modelValue:e.person.email2,"onUpdate:modelValue":t[2]||(t[2]=t=>e.person.email2=t),errorFn:e.email2Error,style:{"text-transform":"lowercase"}},null,8,["modelValue","errorFn"]),f(i,{id:"person-cellPhone",label:"Cell Phone",trim:"",modelValue:e.person.cellPhone,"onUpdate:modelValue":t[3]||(t[3]=t=>e.person.cellPhone=t),errorFn:e.cellPhoneError},null,8,["modelValue","errorFn"]),f(i,{id:"person-homePhone",label:"Home Phone",trim:"",modelValue:e.person.homePhone,"onUpdate:modelValue":t[4]||(t[4]=t=>e.person.homePhone=t),errorFn:e.homePhoneError},null,8,["modelValue","errorFn"]),f(i,{id:"person-workPhone",label:"Work Phone",trim:"",modelValue:e.person.workPhone,"onUpdate:modelValue":t[5]||(t[5]=t=>e.person.workPhone=t),errorFn:e.workPhoneError},null,8,["modelValue","errorFn"]),f(l,{type:"Home",modelValue:e.person.homeAddress,"onUpdate:modelValue":t[6]||(t[6]=t=>e.person.homeAddress=t)},null,8,["modelValue"]),f(l,{type:"Work",modelValue:e.person.workAddress,"onUpdate:modelValue":t[7]||(t[7]=t=>e.person.workAddress=t),hasHome:!!e.person.homeAddress.address},null,8,["modelValue","hasHome"]),f(l,{type:"Mail",modelValue:e.person.mailAddress,"onUpdate:modelValue":t[8]||(t[8]=t=>e.person.mailAddress=t),hasHome:!!e.person.homeAddress.address},null,8,["modelValue","hasHome"])],64))])),_:1},8,["disabled","onSubmit","onCancel"])])),_:1},512)};var Dn=t({components:{SButton:A},props:{title:{type:String,required:!0},editable:{type:Boolean,required:!0}},emits:["edit"]});const Bn={class:"person-view-section-header"},In={key:0,class:"person-view-section-edit"},On=P("Edit");Dn.render=function(e,t,n,s,o,r){const a=c("SButton");return h(),p("div",{class:["person-view-section",{"person-view-section-editable":e.editable}]},[f("div",Bn,[f("div",{class:"person-view-section-header-text",textContent:E(e.title)},null,8,["textContent"]),e.editable?(h(),p("div",In,[f(a,{class:"person-view-section-ebtn",variant:"primary",small:"",onClick:t[1]||(t[1]=t=>e.$emit("edit"))},{default:m((()=>[On])),_:1})])):g("",!0)]),R(e.$slots,"default")],2)};var qn=t({components:{PersonEditContact:Un,PersonViewSection:Dn},props:{person:{type:Object,required:!0}},emits:["reload"],setup(e,{emit:t}){const n=T((()=>!!e.person.contact&&(e.person.contact.email||e.person.contact.email2||e.person.contact.cellPhone||e.person.contact.homePhone||e.person.contact.workPhone||e.person.contact.homeAddress||e.person.contact.workAddress||e.person.contact.mailAddress))),s=i(null);return{editContactModal:s,hasContactInfo:n,onEditContact:async function(){await s.value.show()&&t("reload")}}}});const Mn={key:0,id:"person-view-emails"},jn={key:0},zn={key:1},Hn={key:1,class:"person-view-phone"},$n=f("span",{class:"person-view-phone-label"},"(Cell)",-1),Wn={key:2,class:"person-view-phone"},Gn=f("span",{class:"person-view-phone-label"},"(Home)",-1),Yn={key:3,class:"person-view-phone"},Zn=f("span",{class:"person-view-phone-label"},"(Work)",-1),Xn={key:4,class:"person-view-address"},Kn={key:0},Jn={key:1},Qn={key:5,class:"person-view-address"},es=f("span",null,"Work Address:",-1),ts={key:6,class:"person-view-address"},ns=f("div",null,"Mailing Address:",-1);qn.render=function(e,t,n,s,o,r){const a=c("PersonEditContact"),i=c("PersonViewSection");return e.hasContactInfo||e.person.canEdit?(h(),p(i,{key:0,title:"Contact Information",editable:e.person.canEdit,onEdit:e.onEditContact},{default:m((()=>[e.person.contact.email||e.person.contact.email2?(h(),p("div",Mn,[e.person.contact.email?(h(),p("div",jn,[f("a",{href:`mailto:${e.person.contact.email}`,textContent:E(e.person.contact.email)},null,8,["href","textContent"])])):g("",!0),e.person.contact.email2?(h(),p("div",zn,[f("a",{href:`mailto:${e.person.contact.email2}`,textContent:E(e.person.contact.email2)},null,8,["href","textContent"])])):g("",!0)])):g("",!0),e.person.contact.cellPhone?(h(),p("div",Hn,[f("a",{href:`tel:${e.person.contact.cellPhone}`,textContent:E(e.person.contact.cellPhone)},null,8,["href","textContent"]),$n])):g("",!0),e.person.contact.homePhone?(h(),p("div",Wn,[f("a",{href:`tel:${e.person.contact.homePhone}`,textContent:E(e.person.contact.homePhone)},null,8,["href","textContent"]),Gn])):g("",!0),e.person.contact.workPhone?(h(),p("div",Yn,[f("a",{href:`tel:${e.person.contact.workPhone}`,textContent:E(e.person.contact.workPhone)},null,8,["href","textContent"]),Zn])):g("",!0),e.person.contact.homeAddress&&e.person.contact.homeAddress.address?(h(),p("div",Xn,[f("div",null,[e.person.contact.workAddress&&e.person.contact.workAddress.sameAsHome?(h(),p("span",Kn,"Home Address (all day):")):(h(),p("span",Jn,"Home Address:")),f("a",{class:"person-view-map",target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.person.contact.homeAddress.address)}`},"Map",8,["href"])]),f("div",{textContent:E(e.person.contact.homeAddress.address.split(",")[0])},null,8,["textContent"]),f("div",{textContent:E(e.person.contact.homeAddress.address.replace(/^[^,]*, */,""))},null,8,["textContent"]),e.person.contact.homeAddress.fireDistrict?(h(),p("div",{key:0,textContent:E(`Sunnyvale Fire District ${e.person.contact.homeAddress.fireDistrict}`)},null,8,["textContent"])):g("",!0)])):g("",!0),e.person.contact.workAddress&&e.person.contact.workAddress.address?(h(),p("div",Qn,[f("div",null,[es,f("a",{class:"person-view-map",target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.person.contact.workAddress.address)}`},"Map",8,["href"])]),f("div",{textContent:E(e.person.contact.workAddress.address.split(",")[0])},null,8,["textContent"]),f("div",{textContent:E(e.person.contact.workAddress.address.replace(/^[^,]*, */,""))},null,8,["textContent"]),e.person.contact.workAddress.fireDistrict?(h(),p("div",{key:0,textContent:E(`Sunnyvale Fire District ${e.person.contact.workAddress.fireDistrict}`)},null,8,["textContent"])):g("",!0)])):g("",!0),e.person.contact.mailAddress&&e.person.contact.mailAddress.address?(h(),p("div",ts,[ns,f("div",{textContent:E(e.person.contact.mailAddress.address.split(",")[0])},null,8,["textContent"]),f("div",{textContent:E(e.person.contact.mailAddress.address.replace(/^[^,]*, */,""))},null,8,["textContent"])])):g("",!0),e.person.canEdit?(h(),p(a,{key:7,ref:"editContactModal",pid:e.person.id},null,8,["pid"])):g("",!0)])),_:1},8,["editable","onEdit"])):g("",!0)};var ss=t({components:{Modal:n,SForm:s,SFInput:o,SSpinner:a},props:{pid:{type:Number,required:!0}},setup(e){const t=i(null);const n=i({}),s=i(!0);const o=i(""),r=i("");function a(e){if(!e)return e;const t=e.split(/\s+/,2);return t.length>1?`${t[1]}, ${t[0]}`:e}_((()=>n.value.informalName),((e,t)=>{n.value.formalName===t&&(n.value.formalName=e),n.value.sortName===a(t)&&(n.value.sortName=a(e))}));const l=i(!1);return{callSignError:function(e){var t;return n.value.callSign?e&&!n.value.callSign.match(/^[AKNW][A-Z]?[0-9][A-Z]{1,3}$/i)?"This is not a valid call sign.":o.value===(null==(t=n.value)?void 0:t.callSign)?"A different person has this call sign.":"":""},formalNameError:function(e){return e?n.value.formalName?"":"A name is required.":""},informalNameError:function(e){return e?n.value.informalName?"":"A name is required.":""},loading:s,modal:t,onCancel:function(){t.value.close(!1)},onSubmit:async function(){var s=new FormData;s.append("informalName",n.value.informalName),s.append("formalName",n.value.formalName),s.append("sortName",n.value.sortName),s.append("callSign",n.value.callSign),l.value=!0;try{await d.post(`/api/people/${e.pid}/names`,s),t.value.close(!0)}catch(e){if(!e.response||409!==e.response.status)throw e;switch(e.response.data){case"sortName":r.value=n.value.sortName;break;case"callSign":o.value=n.value.callSign}}finally{l.value=!1}},person:n,show:function(){return async function(){s.value=!0,n.value=(await d.get(`/api/people/${e.pid}/names`)).data,s.value=!1}(),t.value.show()},sortNameError:function(e){var t;return n.value.sortName?r.value===(null==(t=n.value)?void 0:t.sortName)?"A different person has this name.":"":e?"A name is required.":""},submitting:l}}});ss.render=function(e,t,n,s,o,r){const a=c("SSpinner"),i=c("SFInput"),l=c("SForm"),d=c("Modal");return h(),p(d,{ref:"modal"},{default:m((()=>[f(l,{dialog:"",variant:"primary",title:"Edit Names",submitLabel:"Save",disabled:e.submitting,onSubmit:e.onSubmit,onCancel:e.onCancel},{default:m((()=>[e.loading?(h(),p(a,{key:0})):(h(),p(v,{key:1},[f(i,{id:"person-informalName",label:"Name",trim:"",autofocus:"",modelValue:e.person.informalName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.person.informalName=t),errorFn:e.informalNameError,help:"What you like to be called, e.g. âJoe Banksâ"},null,8,["modelValue","errorFn"]),f(i,{id:"person-formalName",label:"Formal name",trim:"",modelValue:e.person.formalName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.person.formalName=t),errorFn:e.formalNameError,help:"For formal documents, e.g. âJoseph A. Banks, Jr.â"},null,8,["modelValue","errorFn"]),f(i,{id:"person-sortName",label:"Sort name",trim:"",modelValue:e.person.sortName,"onUpdate:modelValue":t[3]||(t[3]=t=>e.person.sortName=t),errorFn:e.sortNameError,help:"For appearance in sorted lists, e.g. âBanks, Joeâ"},null,8,["modelValue","errorFn"]),f(i,{id:"person-callSign",label:"Call sign",trim:"",modelValue:e.person.callSign,"onUpdate:modelValue":t[4]||(t[4]=t=>e.person.callSign=t),errorFn:e.callSignError,help:"FCC amateur radio license",style:{"text-transform":"uppercase"}},null,8,["modelValue","errorFn"])],64))])),_:1},8,["disabled","onSubmit","onCancel"])])),_:1},512)};var os=t({components:{PersonEditNames:ss,SButton:A},props:{person:{type:Object,required:!0}},emits:["reload"],setup(e,{emit:t}){const n=i(null);return{editNamesModal:n,onEditNames:async function(){await n.value.show()&&t("reload")}}}});const rs={id:"person-view-names"},as={id:"person-view-names-ifc"},is={id:"person-view-names-ic"},ls={key:0,id:"person-view-names-edit"},ds=P("Edit");os.render=function(e,t,n,s,o,r){const a=c("SButton"),i=c("PersonEditNames");return h(),p("div",rs,[f("div",as,[f("div",is,[f("div",{id:"person-view-names-i",textContent:E(e.person.informalName)},null,8,["textContent"]),e.person.callSign?(h(),p("div",{key:0,id:"person-view-names-c",textContent:E(e.person.callSign)},null,8,["textContent"])):g("",!0)]),e.person.formalName!==e.person.informalName?(h(),p("div",{key:0,id:"person-view-names-f",textContent:E(`(${e.person.formalName})`)},null,8,["textContent"])):g("",!0)]),e.person.canEdit?(h(),p("div",ls,[f(a,{variant:"primary",small:"",onClick:e.onEditNames},{default:m((()=>[ds])),_:1},8,["onClick"])])):g("",!0),e.person.canEdit?(h(),p(i,{key:1,ref:"editNamesModal",pid:e.person.id},null,8,["pid"])):g("",!0)])};const us={webmaster:"Webmasters only",admin:"DPS staff only",leader:"SERV leads only",contact:"Anyone who can see contact info",person:"Anyone"};let cs=[{value:"webmaster",label:"Webmasters only"},{value:"admin",label:"DPS staff only"},{value:"leader",label:"SERV leads only"},{value:"contact",label:"Anyone who can see contact info"},{value:"person",label:"Anyone"}];var ps=t({components:{Modal:n,SButton:A,SForm:s,SFInput:o,SFSelect:N,SSpinner:a},props:{pid:{type:Number,required:!0}},setup(e){const t=i(null);const n=i([]),s=i([]),o=i({}),r=i(!0);const a=i(null);const l=i(!1);return{editNote:function(e){o.value.date&&o.value.note&&n.value.push(o.value),s.value.forEach((e=>n.value.push(e)));const t=n.value.findIndex((t=>t===e));s.value=n.value.splice(t+1),o.value=n.value.splice(t,1)[0],u((()=>{a.value.focus()}))},loading:r,modal:t,noteEditing:o,noteRef:a,notesAfter:s,notesBefore:n,onAdd:function(){o.value.date&&o.value.note&&n.value.push(o.value),s.value.forEach((e=>n.value.push(e))),s.value=[],o.value={date:V().format("YYYY-MM-DD"),note:"",visibility:cs[0].value},u((()=>{a.value.focus()}))},onCancel:function(){t.value.close(!1)},onSubmit:async function(){var r=new FormData;n.value.forEach((e=>{r.append("note",e.note),r.append("date",e.date),r.append("visibility",e.visibility)})),o.value.date&&o.value.note&&(r.append("note",o.value.note),r.append("date",o.value.date),r.append("visibility",o.value.visibility)),s.value.forEach((e=>{r.append("note",e.note),r.append("date",e.date),r.append("visibility",e.visibility)})),l.value=!0,await d.post(`/api/people/${e.pid}/notes`,r),l.value=!1,t.value.close(!0)},show:function(){return async function(){r.value=!0;const t=(await d.get(`/api/people/${e.pid}/notes`)).data;n.value=t.notes,n.value.sort(((e,t)=>e.date!==t.date?e.date<t.date?-1:1:e.note.localeCompare(t.note))),s.value=[],cs=cs.filter((e=>t.visibilities.includes(e.value))),n.value.length?o.value={date:"",note:"",visibility:""}:o.value={date:V().format("YYYY-MM-DD"),note:"",visibility:cs[0].value};r.value=!1}(),t.value.show()},submitting:l,visibilityLabels:us,visibilityOptions:cs}}});const hs={key:0,class:"form-item",id:"person-edit-note-help"},ms=f("div",null,"Date",-1),fs=f("div",null,"Note",-1),vs=f("div",null,"Vis.",-1),gs=f("div",null,"Date",-1),ys=f("div",null,"Note",-1),ws=f("div",null,"Vis.",-1),bs=P("Add");ps.render=function(e,t,n,s,o,r){const a=c("SSpinner"),i=c("SFInput"),l=c("SFSelect"),d=c("SButton"),u=c("SForm"),y=c("Modal");return h(),p(y,{ref:"modal"},{default:m((()=>[f(u,{dialog:"",variant:"primary",title:"Edit Notes",submitLabel:"Save",disabled:e.submitting,onSubmit:e.onSubmit,onCancel:e.onCancel},{extraButtons:m((()=>[f(d,{variant:"primary",onClick:e.onAdd},{default:m((()=>[bs])),_:1},8,["onClick"])])),default:m((()=>[e.loading?(h(),p(a,{key:0})):(h(),p(v,{key:1},[e.notesBefore.length||e.notesAfter.length?(h(),p("div",hs,"Click on a note to edit it, or click the Add button to add one.")):g("",!0),(h(!0),p(v,null,F(e.notesBefore,(t=>(h(),p("div",{class:"person-edit-note form-item",onClick:n=>e.editNote(t)},[ms,f("div",{textContent:E(t.date)},null,8,["textContent"]),fs,f("div",{textContent:E(t.note)},null,8,["textContent"]),vs,f("div",{textContent:E(e.visibilityLabels[t.visibility])},null,8,["textContent"])],8,["onClick"])))),256)),e.noteEditing.date?(h(),p(v,{key:1},[f(i,{id:"person-edit-note-date",label:"Date",type:"date",modelValue:e.noteEditing.date,"onUpdate:modelValue":t[1]||(t[1]=t=>e.noteEditing.date=t)},null,8,["modelValue"]),f(i,{id:"person-edit-note-note",ref:"noteRef",label:"Note Text",trim:"",modelValue:e.noteEditing.note,"onUpdate:modelValue":t[2]||(t[2]=t=>e.noteEditing.note=t)},null,8,["modelValue"]),f(l,{id:"person-edit-note-visibility",label:"Visibility",options:e.visibilityOptions,modelValue:e.noteEditing.visibility,"onUpdate:modelValue":t[3]||(t[3]=t=>e.noteEditing.visibility=t)},null,8,["options","modelValue"])],64)):g("",!0),(h(!0),p(v,null,F(e.notesAfter,(t=>(h(),p("div",{class:"person-edit-note form-item",onClick:n=>e.editNote(t)},[gs,f("div",{textContent:E(t.date)},null,8,["textContent"]),ys,f("div",{textContent:E(t.note)},null,8,["textContent"]),ws,f("div",{textContent:E(e.visibilityLabels[t.visibility])},null,8,["textContent"])],8,["onClick"])))),256))],64))])),_:1},8,["disabled","onSubmit","onCancel"])])),_:1},512)};var _s=t({components:{PersonEditNotes:ps,PersonViewSection:Dn},props:{person:{type:Object,required:!0}},emits:["reload"],setup(e,{emit:t}){const n=i(null);return{editNotesModal:n,onEditNotes:async function(){await n.value.show()&&t("reload")}}}});const Cs={id:"person-view-notes"},Es={class:"person-view-note"},ks={key:0};_s.render=function(e,t,n,s,o,r){const a=c("PersonEditNotes"),i=c("PersonViewSection");return e.person.notes.length||e.person.canEditNotes?(h(),p(i,{key:0,title:"Notes",editable:e.person.canEditNotes,onEdit:e.onEditNotes},{default:m((()=>[f("div",Cs,[(h(!0),p(v,null,F(e.person.notes,(e=>(h(),p("div",Es,[f("div",{class:"person-view-note-date",textContent:E(e.date)},null,8,["textContent"]),f("div",{class:"person-view-note-text",textContent:E(e.note)},null,8,["textContent"])])))),256)),e.person.notes.length?g("",!0):(h(),p("div",ks,"No notes on file."))]),e.person.canEdit?(h(),p(a,{key:0,ref:"editNotesModal",pid:e.person.id},null,8,["pid"])):g("",!0)])),_:1},8,["editable","onEdit"])):g("",!0)};const Ss={admin:"Admin","cert-d":"CERT Deployment","cert-t":"CERT Training",listos:"Listos",sares:"SARES",snap:"SNAP"};var xs=t({components:{Modal:n,SFCheckGroup:L,SForm:s,SFSelect:N,SSpinner:a},props:{pid:{type:Number,required:!0}},setup(e){const t=i(null);const n=i([]),s=i("");const o=i([]),r=i(new Set);_(s,(()=>{if(!n.value.length)return;const e=n.value.find((e=>e.org===s.value)).roles;r.value=new Set(e.filter((e=>e.held)).map((e=>e.id)))})),_([r,s],((e,t)=>{if(!n.value.length)return;let a=e[1]!=t[1];if(e[0].forEach((e=>{t[0].has(e)||(a=!0)})),t[0].forEach((t=>{e[0].has(t)||(a=!0)})),!a)return;const i=new Set,l=new Set;n.value.forEach((e=>{e.org===s.value?e.roles.filter((e=>(!e.held||e.direct)&&r.value.has(e.id))).forEach((e=>{i.add(e.id),e.implies.forEach((e=>l.add(e)))})):e.roles.filter((e=>e.held&&e.direct)).forEach((e=>{i.add(e.id),e.implies.forEach((e=>l.add(e)))}))})),n.value.forEach((e=>{e.roles.forEach((e=>{i.has(e.id)?e.held=e.direct=!0:l.has(e.id)?(e.held=!0,e.direct=!1):e.held=e.direct=!1}))}));const d=n.value.find((e=>e.org===s.value)).roles;r.value=new Set(d.filter((e=>e.held)).map((e=>e.id))),o.value=d.map((e=>({value:e.id,label:e.name,disabled:e.implicitOnly||e.held&&!e.direct})))}));const a=i(!1);return{modal:t,onCancel:function(){t.value.close(!1)},onSubmit:async function(){var s=new FormData;n.value.forEach((e=>{e.roles.filter((e=>e.held&&e.direct)).forEach((e=>{s.append("role",e.id.toString())}))})),a.value=!0,await d.post(`/api/people/${e.pid}/roles`,s),a.value=!1,t.value.close(!0)},org:s,orgRoleOptions:o,orgRoles:r,orgs:n,show:function(){return async function(){n.value=[],s.value="",n.value=(await d.get(`/api/people/${e.pid}/roles`)).data,n.value.forEach((e=>{e.fmtOrg=Ss[e.org]})),s.value=n.value[0].org}(),t.value.show()},submitting:a}}});function As(e){return"admin"===e.org&&e.title.startsWith("OES")?"dps":"admin"===e.org?"serv":e.org.replace(/-.*/,"")}xs.render=function(e,t,n,s,o,r){const a=c("SSpinner"),i=c("SFSelect"),l=c("SFCheckGroup"),d=c("SForm"),u=c("Modal");return h(),p(u,{ref:"modal"},{default:m((()=>[f(d,{dialog:"",variant:"primary",title:"Edit Roles",submitLabel:"Save",disabled:e.submitting,onSubmit:e.onSubmit,onCancel:e.onCancel},{default:m((()=>[e.orgs.length?(h(),p(v,{key:1},[e.orgs.length>1?(h(),p(i,{key:0,id:"person-roles-org",label:"Org",options:e.orgs,valueKey:"org",labelKey:"fmtOrg",modelValue:e.org,"onUpdate:modelValue":t[1]||(t[1]=t=>e.org=t)},null,8,["options","modelValue"])):g("",!0),f(l,{id:"person-roles-roles",label:e.orgs.length>1?"Roles":"",options:e.orgRoleOptions,disabledKey:"disabled",modelValue:e.orgRoles,"onUpdate:modelValue":t[2]||(t[2]=t=>e.orgRoles=t)},null,8,["label","options","modelValue"])],64)):(h(),p(a,{key:0}))])),_:1},8,["disabled","onSubmit","onCancel"])])),_:1},512)};var Rs=t({components:{OrgBadge:U,PersonEditRoles:xs,PersonViewSection:Dn},props:{person:{type:Object,required:!0}},emits:["reload"],setup(e,{emit:t}){const n=i([]);D((()=>{n.value=[],e.person.roles.forEach((e=>{const t=n.value.findIndex((t=>t.org===As(e)));t<0?n.value.push({org:As(e),titles:[e.title]}):n.value[t].titles.push(e.title)}))}));const s=i(null);return{editRolesModal:s,onEditRoles:async function(){await s.value.show()&&t("reload")},badges:n}}});const Ps={id:"person-view-roles-badges"},Ts={class:"person-view-roles-titles"},Ns={key:0,class:"person-view-roles-title"};Rs.render=function(e,t,n,s,o,r){const a=c("OrgBadge"),i=c("PersonEditRoles"),l=c("PersonViewSection");return e.badges.length||e.person.canEditRoles?(h(),p(l,{key:0,title:"SERV "+(1===e.person.roles.length?"Role":"Roles"),editable:e.person.canEditRoles,onEdit:e.onEditRoles},{default:m((()=>[f("div",Ps,[(h(!0),p(v,null,F(e.badges,(e=>(h(),p(v,null,[f(a,{class:"person-view-roles-badge",org:e.org},null,8,["org"]),f("div",Ts,[(h(!0),p(v,null,F(e.titles,(e=>(h(),p("div",{class:"person-view-roles-title",textContent:E(e)},null,8,["textContent"])))),256))])],64)))),256)),e.badges.length?g("",!0):(h(),p("div",Ns,"No current role in any SERV org."))]),e.person.canEditRoles?(h(),p(i,{key:0,ref:"editRolesModal",pid:e.person.id},null,8,["pid"])):g("",!0)])),_:1},8,["title","editable","onEdit"])):g("",!0)};const Vs=t({name:"PersonEditBGChecks",props:{checks:{type:Array,required:!0},types:{type:Array,required:!0}},setup(e,{expose:t}){const n=i([...e.checks]),s=i([]),o=i({date:"",types:new Set,assumed:!1}),r=i(0===e.checks.length);function a(){return!r.value||!(o.value.date&&!o.value.date.match(/^20\d\d-\d\d-\d\d$/))&&(o.value.types.size&&n.value.push({date:o.value.date,types:e.types.filter((e=>o.value.types.has(e))),assumed:o.value.assumed}),n.value.splice(n.value.length,0,...s.value.splice(0)),n.value.sort(((e,t)=>e.date.localeCompare(t.date))),r.value=!1,!0)}function l(e){if(!a())return;o.value.date=e.date,o.value.types=new Set(e.types),o.value.assumed=e.assumed;const t=n.value.findIndex((t=>t===e));s.value.splice(s.value.length,0,...n.value.splice(t+1)),n.value.splice(t),r.value=!0}return t({startAdd:function(){console.log("startAdd called"),a()&&(o.value.date=V().format("YYYY-MM-DD"),o.value.types=new Set,o.value.assumed=!1,r.value=!0)},prepareForSave:function(){a(),e.checks.splice(0,e.checks.length,...n.value)}}),function(){return[(t=e.checks,[B("div",{id:"person-edbg-header",class:"form-item"},"Background Checks"),t.length?B("div",{id:"person-edbg-help",class:"form-item"},"Click on a check to edit it, or click Add to add one."):null]),Fs(n.value,l),r.value?Ls(o.value,e.types):null,Fs(s.value,l)];var t}}});function Fs(e,t){return e.map((e=>B("div",{class:"form-item-input",onClick:()=>{t(e)}},`${e.date||"Unknown date"}: ${e.types.join(", ")}${e.assumed?" (assumed)":""}`)))}function Ls(e,t){return[B(o,{id:"person-edbg-date",label:"Date",help:"Date on which the background check was cleared (empty if not known)",type:"date",modelValue:e.date,"onUpdate:modelValue":t=>e.date=t,errorFn:t=>t&&""!==e.date?e.date.match(/^20\d\d-\d\d-\d\d$/)?"":"This is not a valid date.":""}),B(L,{id:"person-edbg-types",label:"Type(s)",options:t,inline:!0,modelValue:e.types,"onUpdate:modelValue":t=>e.types=t}),B(I,{id:"person-edbg-assumed",label:"Assumed (no paper record)",help:"Checks are assumed for long-standing volunteers whose historical records are missing.",modelValue:e.assumed,"onUpdate:modelValue":t=>e.assumed=t})]}function Us(e){return e.replace(/[^0-9]/g,"")}var Ds=t({components:{Modal:n,PersonEditBGChecks:Vs,SButton:A,SForm:s,SFCheckGroup:L,SFInput:o,SSpinner:a},props:{pid:{type:Number,required:!0}},setup(e){const t=i(null);const n=i({}),s=i(""),o=i(new Set),r=i([]),a=i(!0);const l=i(null);const u=i(!1);return{bgChecksRef:l,digitsOnly:Us,dswCERTError:function(e){return e&&n.value.dswCERT?n.value.dswCERT.match(/^20\d\d-\d\d-\d\d$/)?"":"This is not a valid YYYY-MM-DD date.":""},dswCommError:function(e){return e&&n.value.dswComm?n.value.dswComm.match(/^20\d\d-\d\d-\d\d$/)?"":"This is not a valid YYYY-MM-DD date.":""},identification:o,identTypes:r,loading:a,modal:t,onAddBGCheck:function(){var e;console.log("onAddBGCheck called"),null==(e=l.value)||e.startAdd()},onCancel:function(){t.value.close(!1)},onSubmit:async function(){var r;null==(r=l.value)||r.prepareForSave();var a=new FormData;a.append("volgistics",s.value),a.append("dswCERT",n.value.dswCERT||""),a.append("dswComm",n.value.dswComm||""),o.value.forEach((e=>{a.append("identification",e)})),n.value.bgChecks.forEach((e=>{a.append("bgCheck",`${e.date}:${e.types.join(",")}:${e.assumed}`)})),u.value=!0,await d.post(`/api/people/${e.pid}/status`,a),u.value=!1,t.value.close(!0)},person:n,show:function(){return async function(){a.value=!0,n.value=(await d.get(`/api/people/${e.pid}/status`)).data,s.value=n.value.volgistics?n.value.volgistics.toString():"",r.value=n.value.identification.map((e=>({label:e.type,value:e.type}))),o.value=new Set(n.value.identification.filter((e=>e.held)).map((e=>e.type))),a.value=!1}(),t.value.show()},submitting:u,volgistics:s,volgisticsError:function(e){return e&&s.value&&parseInt(s.value)<1?"This is not a valid Volgistics ID number.":""}}}});const Bs=P("Add");Ds.render=function(e,t,n,s,o,r){const a=c("SSpinner"),i=c("SFInput"),l=c("SFCheckGroup"),d=c("PersonEditBGChecks"),u=c("SButton"),g=c("SForm"),y=c("Modal");return h(),p(y,{ref:"modal"},{default:m((()=>[f(g,{dialog:"",variant:"primary",title:"Edit Volunteer Status",submitLabel:"Save",disabled:e.submitting,onSubmit:e.onSubmit,onCancel:e.onCancel},{extraButtons:m((()=>[f(u,{variant:"primary",onClick:O(e.onAddBGCheck,["prevent"])},{default:m((()=>[Bs])),_:1},8,["onClick"])])),default:m((()=>[e.loading?(h(),p(a,{key:0})):(h(),p(v,{key:1},[f(i,{id:"person-volgistics",label:"Volgistics ID",modelValue:e.volgistics,"onUpdate:modelValue":t[1]||(t[1]=t=>e.volgistics=t),autofocus:"",errorFn:e.volgisticsError,restrictFn:e.digitsOnly},null,8,["modelValue","errorFn","restrictFn"]),f(i,{id:"person-dsw-cert",type:"date",label:"DSW CERT",modelValue:e.person.dswCERT,"onUpdate:modelValue":t[2]||(t[2]=t=>e.person.dswCERT=t),errorFn:e.dswCERTError,help:"Date when CERT DSW registration form was signed."},null,8,["modelValue","errorFn","help"]),f(i,{id:"person-dsw-comm",type:"date",label:"DSW Communications",modelValue:e.person.dswComm,"onUpdate:modelValue":t[3]||(t[3]=t=>e.person.dswComm=t),errorFn:e.dswCommError,help:"Date when Communications DSW registration form was signed."},null,8,["modelValue","errorFn","help"]),f(l,{id:"person-identification",label:"IDs Issued",modelValue:e.identification,"onUpdate:modelValue":t[4]||(t[4]=t=>e.identification=t),options:e.identTypes},null,8,["modelValue","options"]),f(d,{ref:"bgChecksRef",checks:e.person.bgChecks,types:e.person.bgCheckTypes},null,8,["checks","types"])],64))])),_:1},8,["disabled","onSubmit","onCancel"])])),_:1},512)};var Is=t({components:{PersonEditStatus:Ds,PersonViewSection:Dn},props:{person:{type:Object,required:!0}},emits:["reload"],setup(e,{emit:t}){const n=l("me"),s=T((()=>e.person.status&&!e.person.status.dswCERT.registered&&!e.person.status.dswCERT.needed&&!e.person.status.dswComm.registered&&!e.person.status.dswComm.needed&&(e.person.status.backgroundCheck.admin?!e.person.status.backgroundCheck.needed&&!e.person.status.backgroundCheck.checks.length:!e.person.status.backgroundCheck.cleared&&!e.person.status.backgroundCheck.needed)&&!e.person.status.identification.length)),o=T((()=>!(!(e.person.status&&e.person.status.backgroundCheck.admin&&e.person.status.backgroundCheck.needed)||e.person.status.backgroundCheck.checks.find((t=>t.type.indexOf(e.person.status.backgroundCheck.needed)>=0)))&&e.person.status.backgroundCheck.needed)),r=i(null);return{editStatusModal:r,onEditStatus:async function(){await r.value.show()&&t("reload")},me:n,missingBGCheck:o,nothingElseToShow:s}}});const Os={id:"person-view-status-grid"},qs=f("div",null,"Volgistics",-1),Ms=f("div",null,"City volunteer",-1),js={key:0},zs=f("a",{href:"https://www.volgistics.com/ex/portal.dll/ap?AP=929478828",target:"_blank"},"Please register",-1),Hs={key:1,style:{color:"red"}},$s={key:0},Ws={key:1},Gs=f("div",null,"DSW CERT",-1),Ys={key:1},Zs={key:2},Xs=f("div",null,"DSW CERT",-1),Ks=f("div",{style:{color:"red"}},"Not registered",-1),Js=f("div",null,"DSW SARES",-1),Qs={key:1},eo={key:2},to=f("div",null,"DSW SARES",-1),no=f("div",{style:{color:"red"}},"Not registered",-1),so=f("div",null,"Background Checks",-1),oo={id:"person-view-status-checks"},ro={key:0,style:{color:"red"}},ao=f("div",null,"Background check",-1),io=f("div",null,"Cleared",-1),lo=f("div",null,"Background check",-1),uo=f("div",null,"Background check",-1),co=f("div",{style:{color:"red"}},"Not cleared",-1),po=f("div",null,"IDs issued",-1),ho={id:"person-view-status-identification"};Is.render=function(e,t,n,s,o,r){const a=c("PersonEditStatus"),i=c("PersonViewSection");return e.person.status?(h(),p(i,{key:0,title:"Volunteer Status",editable:e.person.status.canEdit,onEdit:e.onEditStatus},{default:m((()=>[f("div",Os,["admin"===e.person.status.level?(h(),p(v,{key:0},[qs,e.person.status.volgistics.id?(h(),p("div",{key:0,textContent:E(`#${e.person.status.volgistics.id}`)},null,8,["textContent"])):(h(),p("div",{key:1,style:{color:e.person.status.volgistics.needed?"red":null}},"Not registered",4))],64)):e.person.status.volgistics.needed&&!e.person.status.volgistics.id?(h(),p(v,{key:1},[Ms,e.me.id===e.person.id?(h(),p("div",js,[zs])):(h(),p("div",Hs,"Not registered"))],64)):e.nothingElseToShow?(h(),p(v,{key:2},[e.person.status.volgistics.id?(h(),p("div",$s,"Registered")):(h(),p("div",Ws,"Not registered"))],64)):g("",!0),e.person.status.dswCERT.registered?(h(),p(v,{key:3},[Gs,e.person.status.dswCERT.expired?(h(),p("div",{key:0,style:{color:e.person.status.dswCERT.needed?"red":null}},"Expired on "+E(e.person.status.dswCERT.expires),5)):"admin"==e.person.status.level?(h(),p("div",Ys,"Registered "+E(e.person.status.dswCERT.registered)+", expiresÂ "+E(e.person.status.dswCERT.expires.replace(/-/g,"â")),1)):(h(),p("div",Zs,"Expires on "+E(e.person.status.dswCERT.expires),1))],64)):e.person.status.dswCERT.needed?(h(),p(v,{key:4},[Xs,Ks],64)):g("",!0),e.person.status.dswComm.registered?(h(),p(v,{key:5},[Js,e.person.status.dswComm.expired?(h(),p("div",{key:0,style:{color:e.person.status.dswComm.needed?"red":null}},"Expired on "+E(e.person.status.dswComm.expires),5)):"admin"==e.person.status.level?(h(),p("div",Qs,"Registered "+E(e.person.status.dswComm.registered)+", expiresÂ "+E(e.person.status.dswComm.expires.replace(/-/g,"â")),1)):(h(),p("div",eo,"Expires on "+E(e.person.status.dswComm.expires),1))],64)):e.person.status.dswComm.needed?(h(),p(v,{key:6},[to,no],64)):g("",!0),e.person.status.backgroundCheck.admin?(h(),p(v,{key:7},[so,f("div",oo,[(h(!0),p(v,null,F(e.person.status.backgroundCheck.checks,(e=>(h(),p("div",{class:{"person-view-status-assumed":e.assumed}},[e.date?(h(),p("span",{key:0,class:"person-view-status-date",textContent:E(`${e.date} `)},null,8,["textContent"])):g("",!0),f("span",{textContent:E(e.type.join("+"))},null,8,["textContent"]),e.assumed?(h(),p("span",{key:1,textContent:E(" (assumed)")},null,8,["textContent"])):e.date?g("",!0):(h(),p("span",{key:2,textContent:E(" (date unknown)")},null,8,["textContent"]))],2)))),256)),e.missingBGCheck?(h(),p("div",ro,"Missing required "+E(e.missingBGCheck)+" check",1)):g("",!0)])],64)):(h(),p(v,{key:8},["true"===e.person.status.backgroundCheck.cleared?(h(),p(v,{key:0},[ao,io],64)):e.person.status.backgroundCheck.cleared?(h(),p(v,{key:1},[lo,f("div",null,"Cleared on "+E(e.person.status.backgroundCheck.cleared),1)],64)):e.person.status.backgroundCheck.needed?(h(),p(v,{key:2},[uo,co],64)):g("",!0)],64)),e.person.status.identification.length?(h(),p(v,{key:9},[po,f("div",ho,[(h(!0),p(v,null,F(e.person.status.identification,(e=>(h(),p("div",{textContent:E(e)},null,8,["textContent"])))),256))])],64)):g("",!0)]),e.person.canEdit?(h(),p(a,{key:0,ref:"editStatusModal",pid:e.person.id},null,8,["pid"])):g("",!0)])),_:1},8,["editable","onEdit"])):g("",!0)};var mo=t({components:{Modal:n,SubscriptionsForm:j},props:{pid:{type:Number,required:!0}},setup(e){const t=i(null);return{modal:t,onDone:function(e){t.value.close(e)},show:function(){return t.value.show()}}}});mo.render=function(e,t,n,s,o,r){const a=c("SubscriptionsForm"),i=c("Modal");return h(),p(i,{ref:"modal"},{default:m((()=>[f(a,{inModal:"",pid:e.pid,onDone:e.onDone},null,8,["pid","onDone"])])),_:1},512)};var fo=t({components:{PersonEditSubscriptions:mo,PersonViewSection:Dn},props:{person:{type:Object,required:!0}},emits:["reload"],setup(e,{emit:t}){const n=i(null);return{editSubscriptionsModal:n,onEditSubscriptions:async function(){await n.value.show()&&t("reload")}}}});const vo={id:"person-view-lists-list"},go={key:0,style:{color:"red"}},yo={key:1,style:{color:"red"}};fo.render=function(e,t,n,s,o,r){const a=c("PersonEditSubscriptions"),i=c("PersonViewSection");return e.person.noEmail||e.person.noText||e.person.lists.length||e.person.canEditLists?(h(),p(i,{key:0,title:"Subscriptions",editable:e.person.canEditLists,onEdit:e.onEditSubscriptions},{default:m((()=>[f("div",vo,[e.person.noEmail?(h(),p("div",go,"Unsubcribed from all email.")):g("",!0),e.person.noText?(h(),p("div",yo,"Unsubscribed from all text messaging.")):g("",!0),(h(!0),p(v,null,F(e.person.lists,(e=>(h(),p("div",{textContent:E(e)},null,8,["textContent"])))),256))]),e.person.canEditLists?(h(),p(a,{key:0,ref:"editSubscriptionsModal",pid:e.person.id},null,8,["pid"])):g("",!0)])),_:1},8,["editable","onEdit"])):g("",!0)};var wo=t({components:{MessageBox:q,PersonEditPassword:z,PersonViewContact:qn,PersonViewNames:os,PersonViewNotes:_s,PersonViewRoles:Rs,PersonViewSection:Dn,PersonViewStatus:Is,PersonViewSubscriptions:fo,SButton:A,SSpinner:a},props:{onLoadPerson:{type:Function,required:!0}},setup(e){const t=M(),n=i(null);d.get(`/api/people/${t.params.id}`).then((t=>{n.value=t.data,e.onLoadPerson(n.value)}));const s=i(null);const o=i(null);return{changePasswordModal:s,onChangePassword:function(){s.value.show()},onResetPassword:function(){o.value.show()&&d.post(`/api/people/${t.params.id}/pwreset`)},onReload:async function(){n.value=(await d.get(`/api/people/${t.params.id}`)).data},person:n,resetPasswordModal:o}}});const bo={key:0,id:"person-view-spinner"},_o={key:1,id:"person-view"},Co={id:"person-view-grid"},Eo=f("div",{class:"person-view-spacer"},null,-1),ko={id:"person-view-chpw"},So=P("Change Password"),xo=P("Reset Password");wo.render=function(e,t,n,s,o,r){const a=c("SSpinner"),i=c("PersonViewNames"),l=c("PersonViewRoles"),d=c("PersonViewContact"),u=c("PersonViewStatus"),v=c("PersonViewNotes"),y=c("PersonViewSubscriptions"),w=c("SButton"),b=c("PersonViewSection"),_=c("PersonEditPassword"),C=c("MessageBox");return e.person?(h(),p("div",_o,[f("div",Co,[f(i,{person:e.person,onReload:e.onReload},null,8,["person","onReload"]),Eo,f(l,{person:e.person,onReload:e.onReload,style:{"grid-row":"2/3"}},null,8,["person","onReload"]),f(d,{person:e.person,onReload:e.onReload},null,8,["person","onReload"]),f(u,{person:e.person,onReload:e.onReload},null,8,["person","onReload"]),f(v,{person:e.person,onReload:e.onReload},null,8,["person","onReload"]),f(y,{person:e.person,onReload:e.onReload},null,8,["person","onReload"]),e.person.canChangePassword||e.person.canResetPassword?(h(),p(b,{key:0,title:"Password",editable:!1},{default:m((()=>[f("div",ko,[e.person.canChangePassword?(h(),p(w,{key:0,variant:"primary",small:"",onClick:e.onChangePassword},{default:m((()=>[So])),_:1},8,["onClick"])):g("",!0),e.person.canResetPassword?(h(),p(w,{key:1,variant:"primary",small:"",onClick:e.onResetPassword},{default:m((()=>[xo])),_:1},8,["onClick"])):g("",!0)])])),_:1})):g("",!0)]),e.person.canChangePassword?(h(),p(_,{key:0,ref:"changePasswordModal",pid:e.person.id},null,8,["pid"])):g("",!0),f(C,{ref:"resetPasswordModal",title:"Reset Password",variant:"warning",okLabel:"Reset Password"},{default:m((()=>[P("This will replace "+E(e.person.informalName)+"âs current password with a new, randomly generated one, and send it to them by email. You should do this only if they have explicitly asked you to. Are you sure you want to reset "+E(e.person.informalName)+"âs password?",1)])),_:1},512)])):(h(),p("div",bo,[f(a)]))};export default wo;
