let e=document.createElement("style");e.innerHTML="#events-calendar{--dotsMaxWidth:360px;--minTouch:40px;--arrowSize:var(--minTouch);--printMargin:1rem;display:flex;flex-direction:column;align-items:center}#events-calendar-grid{display:grid;justify-content:center;margin-top:.5rem;max-width:var(--dotsMaxWidth);width:100%;grid:auto/repeat(7,14.2857%)}#events-calendar-heading{display:flex;grid-area:1/1/2/8}.events-calendar-weekday{margin-top:.5rem;padding:0 0 1rem;color:#888;text-align:center;line-height:1}.events-calendar-day{padding:0 0 1rem;min-height:3rem;text-align:center;line-height:1}.events-calendar-day:hover{background-color:#efefef}.events-calendar-day:hover.empty{background-color:#fff}.events-calendar-dot-space{margin-right:.25rem}.events-calendar-day-event{display:none;overflow:hidden;margin:0 .25rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;font-size:.875rem;line-height:1.2}@media print{#events-calendar{padding:var(--printMargin)}#events-calendar-grid{border-top:1px solid #eee}.events-calendar-day-event a{color:#000;text-decoration:none}}#events-calendar-footer{padding:0 .75rem;max-width:var(--dotsMaxWidth);width:100%}@media (min-width:576px){#events-calendar-grid{max-width:none;border-left:1px solid #eee}.events-calendar-weekday{border-top:1px solid #eee;border-right:1px solid #eee;border-bottom:1px solid #eee}.events-calendar-day{min-height:calc(1rem + 3 * .875rem + 1rem);border-right:1px solid #eee;border-bottom:1px solid #eee;color:#888}.events-calendar-day-dots{display:none}.events-calendar-day-event{display:block;color:#000}#events-calendar-footer{padding:.75rem}.mouse #events-calendar-footer{display:none}}#events-calendar-date{font-weight:700}.touch .events-calendar-event{margin:calc((var(--minTouch) - 1.5rem)/ 2) 0}",document.head.appendChild(e);import{d as t,B as n,C as a,f as o,D as l,z as d,E as r,G as s,i,_ as v,r as c,c as u,a as m,F as h,g,t as p,h as f,o as y}from"./index.2afa606e.js";import{s as x}from"./page.ac0bacd0.js";var M=t({components:{EventOrgDot:n,MonthSelect:a},setup(e,{emit:t}){x({title:"Events"});const n=i("touch"),a=o(l()),c=o(a.value.format("YYYY-MM"));d(c,(()=>{console.log("monthfmt",c.value),a.value=l(c.value,"YYYY-MM"),f()}));const u=o(null),m=o(!1);let h=null,g={};const p=o([]);async function f(){if(s.set("serv-events-month",a.value.format("YYYY-MM")),!h||h!=a.value.year()){const e=(await v.get(`/api/events?year=${a.value.year()}`)).data;g={},e.events.forEach((e=>{g[e.date]||(g[e.date]=[]),g[e.date].push(e)})),h=a.value.year()}p.value=[];const e=a.value.clone().startOf("month");e.subtract(e.day(),"days");const t=a.value.clone().endOf("month");t.add(6-t.day(),"days");for(let n=e;!n.isAfter(t,"day");n=n.clone().add(1,"day"))p.value.push(n.isSame(a.value,"month")?n:null);u.value=null,m.value=!1}return r((()=>{const e=s.get("serv-events-month");e&&(a.value=l(e,"YYYY-MM")),f(),s.set("serv-events-page","calendar",{expires:3650})})),{month:a,monthfmt:c,dates:p,onHoverDate:function(e){m.value||(u.value=e)},onNoHoverDate:function(){m.value||(u.value=null)},onClickDate:function(e){m.value=!0,u.value=e},eventsOn:function(e){return e&&g[e.format("YYYY-MM-DD")]||[]},touch:n,showDate:u}}});const Y={id:"events-calendar"},w={id:"events-calendar-grid"},k={id:"events-calendar-heading"},C={class:"events-calendar-day-dots"},D={key:0,id:"events-calendar-footer"},b={key:0,class:"events-calendar-event"};M.render=function(e,t,n,a,o,l){const d=c("MonthSelect"),r=c("EventOrgDot"),s=c("router-link");return y(),u("div",Y,[m("div",w,[m("div",k,[m(d,{modelValue:e.monthfmt,"onUpdate:modelValue":t[1]||(t[1]=t=>e.monthfmt=t)},null,8,["modelValue"])]),(y(),u(h,null,g(["S","M","T","W","T","F","S"],(e=>m("div",{class:"events-calendar-weekday",textContent:p(e)},null,8,["textContent"]))),64)),(y(!0),u(h,null,g(e.dates,(n=>(y(),u("div",{class:["events-calendar-day",n?null:"empty"],onMouseover:t=>e.onHoverDate(n),onMouseout:t[2]||(t[2]=(...t)=>e.onNoHoverDate&&e.onNoHoverDate(...t)),onClick:t=>e.onClickDate(n)},[m("div",{textContent:p(n?n.date():null)},null,8,["textContent"]),m("div",C,[(y(!0),u(h,null,g(e.eventsOn(n),(e=>(y(),u(r,{key:e.id,org:e.org},null,8,["org"])))),128))]),(y(!0),u(h,null,g(e.eventsOn(n),(t=>(y(),u("div",{class:"events-calendar-day-event",key:t.id},[m(r,{class:"events-calendar-dot-space",org:t.org},null,8,["org"]),e.touch?(y(),u("span",{key:0,textContent:p(t.name)},null,8,["textContent"])):(y(),u(s,{key:1,to:`/events/${t.id}`,title:t.name,textContent:p(t.name)},null,8,["to","title","textContent"]))])))),128))],42,["onMouseover","onClick"])))),256))]),e.showDate?(y(),u("div",D,[m("div",{id:"events-calendar-date",textContent:p(e.showDate.format("dddd, MMMM D, YYYY"))},null,8,["textContent"]),(y(!0),u(h,null,g(e.eventsOn(e.showDate),(e=>(y(),u("div",{class:"events-calendar-event",key:e.id},[m(r,{class:"mr-1",org:e.org},null,8,["org"]),m(s,{to:`/events/${e.id}`,textContent:p(e.name)},null,8,["to","textContent"])])))),128)),e.eventsOn(e.showDate).length?f("",!0):(y(),u("div",b,"No events scheduled."))])):f("",!0)])};export default M;
