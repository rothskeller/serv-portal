let e=document.createElement("style");e.innerHTML="#events-calendar{--dotsMaxWidth:360px;--minTouch:40px;--arrowSize:var(--minTouch);--printMargin:1rem;display:flex;flex-direction:column;align-items:center}#events-calendar-grid{display:grid;justify-content:center;margin-top:.5rem;max-width:var(--dotsMaxWidth);width:100%;grid:auto/repeat(7,14.2857%)}#events-calendar-heading{display:flex;grid-area:1/1/2/8}.events-calendar-arrow{display:flex;flex:none;justify-content:center;align-items:center;width:var(--arrowSize);height:var(--arrowSize);cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.events-calendar-arrow:hover{background-color:#efefef}.events-calendar-year-arrow{width:1rem}.events-calendar-month-arrow{width:.625rem}#events-calendar-month{display:block;flex:auto;align-self:center;text-align:center;white-space:nowrap;font-size:1.2rem}.events-calendar-weekday{margin-top:.5rem;padding:0 0 1rem;color:#888;text-align:center;line-height:1}.events-calendar-day{padding:0 0 1rem;min-height:3rem;text-align:center;line-height:1}.events-calendar-day:hover{background-color:#efefef}.events-calendar-day:hover.empty{background-color:#fff}.events-calendar-dot-space{margin-right:.25rem}.events-calendar-day-event{display:none;overflow:hidden;margin:0 .25rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;font-size:.875rem;line-height:1.2}@media print{#events-calendar{padding:var(--printMargin)}#events-calendar-grid{border-top:1px solid #eee}.events-calendar-month-arrow,.events-calendar-year-arrow{display:none}.events-calendar-day-event a{color:#000;text-decoration:none}}#events-calendar-footer{padding:0 .75rem;max-width:var(--dotsMaxWidth);width:100%}@media (min-width:576px){#events-calendar-grid{max-width:none;border-left:1px solid #eee}#events-calendar-arrow-last{border-right:1px solid #eee}.events-calendar-weekday{border-top:1px solid #eee;border-right:1px solid #eee;border-bottom:1px solid #eee}.events-calendar-day{min-height:calc(1rem + 3 * .875rem + 1rem);border-right:1px solid #eee;border-bottom:1px solid #eee;color:#888}.events-calendar-day-dots{display:none}.events-calendar-day-event{display:block;color:#000}#events-calendar-footer{padding:.75rem}.mouse #events-calendar-footer{display:none}}#events-calendar-date{font-weight:700}.touch .events-calendar-event{margin:calc((var(--minTouch) - 1.5rem)/ 2) 0}",document.head.appendChild(e);import{d as n,A as a,B as t,f as r,C as o,D as l,i as d,_ as s,r as i,c,a as v,t as u,F as m,g as h,z as g,o as f}from"./index.7c6b9706.js";import{s as p}from"./page.dded804e.js";import{m as w}from"./moment.min.f5f30fbb.js";var y=n({components:{EventOrgDot:a,SIcon:t},setup(e,{emit:n}){p({title:"Events"});const a=d("touch"),t=r(w());const i=r(null),c=r(!1);let v=null,u={};const m=r([]);async function h(){if(l.set("serv-events-month",t.value.format("YYYY-MM")),!v||v!=t.value.year()){const e=(await s.get("/api/events?year="+t.value.year())).data;u={},e.events.forEach((e=>{u[e.date]||(u[e.date]=[]),u[e.date].push(e)})),v=t.value.year()}m.value=[];const e=t.value.clone().startOf("month");e.subtract(e.day(),"days");const n=t.value.clone().endOf("month");n.add(6-n.day(),"days");for(let a=e;!a.isAfter(n,"day");a=a.clone().add(1,"day"))m.value.push(a.isSame(t.value,"month")?a:null);i.value=null,c.value=!1}return o((()=>{const e=l.get("serv-events-month");e&&(t.value=w(e,"YYYY-MM")),h(),l.set("serv-events-page","calendar",{expires:3650})})),{onYearBackward:function(){t.value.subtract(1,"year"),h()},onMonthBackward:function(){t.value.subtract(1,"month"),h()},onMonthForward:function(){t.value.add(1,"month"),h()},onYearForward:function(){t.value.add(1,"year"),h()},month:t,dates:m,onHoverDate:function(e){c.value||(i.value=e)},onNoHoverDate:function(){c.value||(i.value=null)},onClickDate:function(e){c.value=!0,i.value=e},eventsOn:function(e){return e&&u[e.format("YYYY-MM-DD")]||[]},touch:a,showDate:i}}});const x={id:"events-calendar"},k={id:"events-calendar-grid"},M={id:"events-calendar-heading"},b={class:"events-calendar-day-dots"},C={key:0,id:"events-calendar-footer"},Y={key:0,class:"events-calendar-event"};y.render=function(e,n,a,t,r,o){const l=i("SIcon"),d=i("EventOrgDot"),s=i("router-link");return f(),c("div",x,[v("div",k,[v("div",M,[v("div",{class:"events-calendar-arrow",onClick:n[1]||(n[1]=(...n)=>e.onYearBackward(...n))},[v(l,{class:"events-calendar-year-arrow",icon:"double-chevron-left"})]),v("div",{class:"events-calendar-arrow",onClick:n[2]||(n[2]=(...n)=>e.onMonthBackward(...n))},[v(l,{class:"events-calendar-month-arrow",icon:"chevron-left"})]),v("div",{id:"events-calendar-month",textContent:u(e.month.format("MMMM YYYY"))},null,8,["textContent"]),v("div",{class:"events-calendar-arrow",onClick:n[3]||(n[3]=(...n)=>e.onMonthForward(...n))},[v(l,{class:"events-calendar-month-arrow",icon:"chevron-right"})]),v("div",{class:"events-calendar-arrow",id:"events-calendar-arrow-last",onClick:n[4]||(n[4]=(...n)=>e.onYearForward(...n))},[v(l,{class:"events-calendar-year-arrow",icon:"double-chevron-right"})])]),(f(),c(m,null,h(["S","M","T","W","T","F","S"],(e=>v("div",{class:"events-calendar-weekday",textContent:u(e)},null,8,["textContent"]))),64)),(f(!0),c(m,null,h(e.dates,(a=>(f(),c("div",{class:["events-calendar-day",a?null:"empty"],onMouseover:n=>e.onHoverDate(a),onMouseout:n[5]||(n[5]=(...n)=>e.onNoHoverDate(...n)),onClick:n=>e.onClickDate(a)},[v("div",{textContent:u(a?a.date():null)},null,8,["textContent"]),v("div",b,[(f(!0),c(m,null,h(e.eventsOn(a),(e=>(f(),c(d,{key:e.id,organization:e.organization},null,8,["organization"])))),128))]),(f(!0),c(m,null,h(e.eventsOn(a),(n=>(f(),c("div",{class:"events-calendar-day-event",key:n.id},[v(d,{class:"events-calendar-dot-space",organization:n.organization},null,8,["organization"]),e.touch?(f(),c("span",{key:0,textContent:u(n.name)},null,8,["textContent"])):(f(),c(s,{key:1,to:"/events/"+n.id,title:n.name,textContent:u(n.name)},null,8,["to","title","textContent"]))])))),128))],42,["onMouseover","onClick"])))),256))]),e.showDate?(f(),c("div",C,[v("div",{id:"events-calendar-date",textContent:u(e.showDate.format("dddd, MMMM D, YYYY"))},null,8,["textContent"]),(f(!0),c(m,null,h(e.eventsOn(e.showDate),(e=>(f(),c("div",{class:"events-calendar-event",key:e.id},[v(d,{class:"mr-1",organization:e.organization},null,8,["organization"]),v(s,{to:"/events/"+e.id,textContent:u(e.name)},null,8,["to","textContent"])])))),128)),e.eventsOn(e.showDate).length?g("",!0):(f(),c("div",Y,"No events scheduled."))])):g("",!0)])};export default y;
